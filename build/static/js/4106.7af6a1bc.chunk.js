"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[4106],{94106:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(74165),i=n(15861),a=n(29439),d=n(47313),o=n(82626),c=n(98276),s=n(49355),l=n(54060),u=n(41586),f=n(37936),x=n(48897),h=n(98505),p=n(46417);function m(e){var t=e.tableData,n=e.tableLoading,r=e.emptyText,i=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"60px"},{title:"Agent",dataIndex:"amount",key:"amount",render:function(e,t){var n,r,i;return(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)("img",{src:"".concat(x.lj).concat(null===(n=t.user)||void 0===n?void 0:n.profile),alt:"profile",style:{width:"30px",height:"30px",borderRadius:"100%",objectFit:"cover"}}),(0,p.jsx)("div",{className:"ml-2 my-auto",children:(0,p.jsx)(o.ZT,{color:"dark-sub",size:"xs",children:"".concat(null===(r=t.user)||void 0===r?void 0:r.firstName," ").concat(null===(i=t.user)||void 0===i?void 0:i.lastName)})})]})}},{title:"Property",dataIndex:"property",key:"property",render:function(e,t){return(0,p.jsx)("div",{children:(0,p.jsx)("a",{href:"".concat(x.JH,"/en/property/").concat(e.slug),target:"_blank",rel:"noreferrer",title:e.localization[0].title,className:"color-dark-main font-size-sm d-flex justify-center",children:e.localization[0].title})})}},{title:"Credits Spent",dataIndex:"creditsSpent",key:"creditsSpent",className:"text-center",render:function(e,t){return(0,p.jsx)("div",{className:"color-dark-main font-size-sm d-flex justify-center",children:(0,p.jsxs)("div",{className:"\n                        ".concat("debit"===f.$r[t.transactionType]?"color-red-yp":"","\n                       ").concat("credit"===f.$r[t.transactionType]?"color-green-yp":"","\n                    "),children:["debit"===f.$r[t.transactionType]&&"-","credit"===f.$r[t.transactionType]&&"+","\xa0","".concat(e)]})})}},{title:"Eligible Refund",dataIndex:"refundCredits",key:"refundCredits",className:"text-center",render:function(e,t){return(0,p.jsx)("div",{className:"color-dark-main font-size-sm d-flex justify-center",children:(0,p.jsxs)("div",{className:"\n                        ".concat("debit"===f.$r[t.transactionType]?"color-red-yp":"","\n                       ").concat("credit"===f.$r[t.transactionType]?"color-green-yp":"","\n                    "),children:["debit"===f.$r[t.transactionType]&&"-","credit"===f.$r[t.transactionType]&&"+","\xa0","".concat(e||0)]})})}},{title:"Transaction Date",dataIndex:"transactionDate",key:"transactionDate",render:function(e,t){return(0,p.jsx)(o.ZT,{color:"dark-main",size:"sm",children:(0,h.Ny)(e,"dd M,yy-t")})}},{title:"Cancelled Date",dataIndex:"canceledAt",key:"canceledAt",render:function(e,t){return(0,p.jsx)(o.ZT,{color:"dark-main",size:"sm",children:(0,h.Ny)(e,"dd M,yy-t")})}},{title:"Reference ID",dataIndex:"referenceId",key:"referenceId",className:"text-center",render:function(e,t){return(0,p.jsx)(o.ZT,{color:"dark-main",size:"sm",children:"".concat(null===e?"":e)})}}];return(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,{sticky:!0,dataSource:t,columns:i,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"saved-searches-view-".concat(e.id)},locale:{emptyText:r}})})}var v=n(21600),y=n(5190),g=n(85554),j=n(3798),b=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Eligible Credits For Refund"}],k=function(){var e=(0,j.aY)(v.B),t=(0,g.v9)((function(e){return e.usersReducer})).loggedInUserData,n=(0,d.useState)({loading:!1,data:[]}),u=(0,a.Z)(n,2),f=u[0],x=u[1],h=(0,d.useState)(0),k=(0,a.Z)(h,2),Z=k[0],N=(k[1],(0,d.useMemo)((function(){return new y.L}),[])),T=(0,d.useCallback)((0,i.Z)((0,r.Z)().mark((function e(){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x({loading:!0}),null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.Organization)||void 0===i?void 0:i.id;case 2:case"end":return e.stop()}}),e)}))),[N,null===t||void 0===t?void 0:t.data]);return(0,d.useEffect)((function(){T()}),[T]),(0,p.jsxs)(l.Z,{permissionSlug:e,children:[(0,p.jsx)(o.mr,{heading:"Eligible Credits For Refund",breadCrumbData:b,buttonWithoutIcon:!0,buttonTooltip:Z<10?"You need at least 10 eligible credits to request for refund":null,buttonText:"Refund Credits",onButtonClick:function(){return function(){var e,n;null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.Organization)||void 0===n||n.id}()},buttonLoading:f.loading,buttonDisable:Z<10}),(0,p.jsx)("div",{className:"d-flex justify-end",children:(0,p.jsxs)("p",{className:"text-success",children:["Total Refundable Credits: ",Z]})}),(0,p.jsx)("div",{className:"d-flex overflow-hidden",children:(0,p.jsx)("div",{className:"d-flex flex-column w-100",children:(0,p.jsx)("div",{className:"overflow-auto",children:(0,p.jsx)("div",{children:f.loading?(0,p.jsx)(s.Z,{items:5,fullWidth:!0}):(0,p.jsx)(m,{tableData:null===f||void 0===f?void 0:f.data,tableLoading:f.loading,emptyText:(0,p.jsx)(c.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:150},description:(0,p.jsx)("span",{children:"No Eligible Credits For Refund Found"})})})})})})})]})}},5190:function(e,t,n){n.d(t,{L:function(){return o}});var r=n(43144),i=n(15671),a=n(49075),d=n(3135),o=(0,r.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.findPublished=function(e){return a.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e,{headers:d.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:d.C})},this.getTenants=function(){return a.Z.get("xero/getTenants")}}))}}]);