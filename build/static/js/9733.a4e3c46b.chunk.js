"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[9733],{70815:function(e,t,n){n.d(t,{r:function(){return g}});var i=n(1413),o=n(29439),a=n(45987),r=n(55291),d=n(86345),c=n(47313),s=n(40169),l=n(46417),u=["onChange","checked","recordId","allowChange"],g=function(e){var t=e.onChange,n=e.checked,g=e.recordId,f=e.allowChange,h=void 0===f||f,p=(0,a.Z)(e,u),Z=(0,c.useState)({loading:!1,checked:!1}),m=(0,o.Z)(Z,2),v=m[0],P=m[1];return(0,c.useEffect)((function(){P((0,i.Z)((0,i.Z)({},v),{},{checked:n}))}),[n]),(0,l.jsx)(d.Z,{checked:v.checked,onChange:function(e){!0===h?(P((0,i.Z)((0,i.Z)({},v),{},{loading:!0})),t(e,g,p).then((function(t){P((0,i.Z)((0,i.Z)({},v),{},{checked:e,loading:!1})),r.ZP.success(t.data.message)})).catch((function(e){P((0,i.Z)((0,i.Z)({},v),{},{loading:!1}));var t=(0,s.P)(e);"string"===typeof t.message?r.ZP.error(t.message):r.ZP.error("Something went wrong")}))):r.ZP.error("You don't have permission to change this record, please contact your admin.")},loading:v.loading})}},69733:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var i=n(1413),o=n(29439),a=n(47313),r=n(7532),d=n(25019),c=n(55291),s=n(82626),l=n(17327),u=n(49355),g=n(48897),f=n(46646),h=n(40169),p=n(59816),Z=n(2135),m=n(43144),v=n(15671),P=n(49075),x=n(3135),j=(0,m.Z)((function e(){var t=this;(0,v.Z)(this,e),this.endPoint="static-page-seo",this.createRecord=function(e){return P.Z.post(t.endPoint+"/",e,{headers:x.C})},this.getAllPublishedRecords=function(){return P.Z.get(t.endPoint+"/find-published")},this.getAllRecords=function(e){return P.Z.get(t.endPoint,{params:e})},this.getRecordBySlug=function(e){return P.Z.get("".concat(t.endPoint,"/").concat(e))},this.getRecordById=function(e){return P.Z.get("".concat(t.endPoint,"/findById/").concat(e))},this.updateRecord=function(e,n){return P.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:x.C})},this.makeDefault=function(e){return P.Z.patch("".concat(t.endPoint,"/make-default/").concat(e))},this.deleteRecord=function(e){return P.Z.delete("".concat(t.endPoint,"/").concat(e))}})),S=n(65960),b=n(46417),k=function(e){var t,n,r,m,v,P,x=e.openModal,k=e.onCancel,y=e.type,C=e.record,w=e.reloadTableData,E=e.permissions,I=E.createStaticPageSEO,R=E.updateStaticPageSEO,M=d.Z.useForm(),D=(0,o.Z)(M,1)[0],T=(0,a.useMemo)((function(){return new j}),[]),A=(0,a.useMemo)((function(){return new p.Y}),[]),L=(0,a.useMemo)((function(){return new S.E}),[]),O=(0,a.useState)(),F=(0,o.Z)(O,2),N=F[0],z=F[1],Y=(0,a.useState)([]),B=(0,o.Z)(Y,2),V=B[0],q=B[1],_=(0,a.useState)([]),H=(0,o.Z)(_,2),K=H[0],Q=H[1],U=(0,Z.lr)(),W=(0,o.Z)(U,1)[0].get("pageId");W&&D.setFieldsValue({sitePageId:W});var $=function(e){var t=(0,h.P)(e);if("string"==typeof t.message)z((0,i.Z)((0,i.Z)({},N),{},{error:t.message}));else{var n=(0,f.O)(t.message,[]);D.setFields(n),z((0,i.Z)((0,i.Z)({},N),{},{error:""}))}},G=(0,a.useCallback)((function(){T.getRecordById(C).then((function(e){e.data&&e.data.data&&(D.setFieldsValue((0,i.Z)({},e.data.data)),z((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1})))})).catch((function(e){$(e)}))}),[D,C,T]),J=(0,a.useCallback)((function(){A.getAllRecords().then((function(e){e.data&&e.data.data&&q(e.data.data)}))}),[A]),X=(0,a.useCallback)((function(){L.getAllRecords().then((function(e){e.data&&e.data.data&&Q(e.data.data)}))}),[L]);(0,a.useEffect)((function(){"edit"===y?(z({loading:!0}),G(),J(),X()):(J(),X(),D.resetFields())}),[x,y,D,G,J,X]);return(0,b.jsx)(s.P0,{visible:x,size:"800px",closable:!0,onCancel:k,titleText:"edit"===y?"Edit Static Page SEO":"Add New SEO",showFooter:!1,children:null!==N&&void 0!==N&&N.loading?(0,b.jsx)(u.Z,{items:10}):(0,b.jsxs)(d.Z,{className:l.Z.form,onFinish:function(e){z((0,i.Z)((0,i.Z)({},N),{},{buttonLoading:!0}));var t=new FormData,n=["image"];switch(Object.entries(e).forEach((function(e){n.includes(e[0])||t.append(e[0],e[1])})),e.image&&"string"!==typeof e.image&&e.image.fileList.length>0&&t.append("image",e.image.fileList[0].originFileObj),y){case"edit":!0===R?T.updateRecord(t,C).then((function(e){w(),k(),z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})).catch((function(e){$(e),z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})):(z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})})),c.ZP.error("You don't have permission to update this record"));break;case"new":!0===I?T.createRecord(t).then((function(e){w(),k(),z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){$(e),z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})):(z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})})),c.ZP.error("You don't have permission to create new record"))}},form:D,children:[(null===N||void 0===N?void 0:N.error)&&(0,b.jsx)(s.EQ,{description:null===N||void 0===N?void 0:N.error,isClosable:!0,onClose:function(){z((0,i.Z)((0,i.Z)({},N),{},{error:""}))}}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.Z.Item,{name:"countryId",rules:[{required:!0,message:"Please Select a country!"}],children:(0,b.jsx)(s.AP,{label:"Country",placeholder:"Please select country",options:null===V||void 0===V?void 0:V.map((function(e){return{label:e.name,value:e.id}})),asterisk:!0})}),(0,b.jsx)(d.Z.Item,{name:"sitePageId",rules:[{required:!0,message:"Please select a page"}],children:(0,b.jsx)(s.AP,{label:"Page",placeholder:"Please select a page",defaultValue:W||"",options:null===K||void 0===K?void 0:K.map((function(e){return{label:e.title,value:e.id.toString()}})),asterisk:!0})})]}),(0,b.jsx)("div",{children:(0,b.jsx)(d.Z.Item,{name:"seoTitle",rules:[{required:!0,message:"Please enter a title"}],children:(0,b.jsx)(s.t7,{size:"w100",label:"Title",asterisk:!0})})}),(0,b.jsx)("div",{children:(0,b.jsx)(d.Z.Item,{name:"seoDescription",rules:[{required:!0,message:"Please enter a description"}],children:(0,b.jsx)(s.t7,{size:"w100",label:"Description",type:"textArea",asterisk:!0,defaultValue:null===N||void 0===N||null===(t=N.data)||void 0===t?void 0:t.seoDescription})})}),(0,b.jsx)("div",{children:(0,b.jsx)(s.wA,{name:"image",defaultFileList:"edit"===y&&N&&(null===(n=N.data)||void 0===n?void 0:n.image)&&[{uid:null===(r=N.data)||void 0===r?void 0:r.id,name:null!==(m=N.data)&&void 0!==m&&m.image?"..."+(null===(v=N.data)||void 0===v?void 0:v.image.substr(N.data.image.length-20,N.data.image.length)):"",status:"done",url:g.lj+(null===(P=N.data)||void 0===P?void 0:P.image)}]})}),(0,b.jsxs)("div",{className:l.Z.footer,children:[(0,b.jsx)(s.op,{size:"normal",fontSize:"sm",onClick:k,type:"plain",children:"Cancel"}),(0,b.jsx)(s.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===N||void 0===N?void 0:N.buttonLoading,children:"Submit"})]})]})})},y=n(74165),C=n(15861),w=n(5900),E=n(21680),I=n(41586),R=n(98676),M=n(3109),D=n(98505),T=n(70815),A=n(85554),L=function(e){var t=e.record,n=e.onEditIconClick,r=e.reloadTableData,d=e.permissions.deleteStaticPageSEO,s=(0,a.useState)({confirmLoading:!1,openPopConfirm:!1}),u=(0,o.Z)(s,2),g=u[0],f=u[1],h=(0,a.useMemo)((function(){return new j}),[]);return(0,b.jsxs)("div",{className:l.Z.actions,children:[(0,b.jsx)("span",{onClick:function(){return n(t)},children:(0,b.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,b.jsx)(w.Z,{open:g.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(f((0,i.Z)((0,i.Z)({},g),{},{confirmLoading:!0})),!1===d)return c.ZP.error("You don't have permission to delete this record, please contact your admin."),void f((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}));h.deleteRecord(t.id).then((function(e){f((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1,confirmLoading:!1})),r()})).catch((function(e){f((0,i.Z)((0,i.Z)({},g),{},{confirmLoading:!1}))}))},onCancel:function(){return f((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}))},okButtonProps:{loading:g.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||f((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}))},children:(0,b.jsx)(R.Z,{className:l.Z.bg__red,onClick:function(){f((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!0}))}})})]})};function O(e){var t=e.tableData,n=e.tableLoading,i=e.onEditIconClick,o=e.reloadTableData,a=(0,A.v9)((function(e){return e.usersReducer})).userPermissions,r=new j,d=function(){var e=(0,C.Z)((0,y.Z)().mark((function e(t,n){var i,a;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.makeDefault(n);case 2:return(a=e.sent)&&null!==a&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.data&&o(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"5%"},{title:"Title",dataIndex:"seoTitle",key:"seoTitle",render:function(e,t){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M.Z,{color:"dark-main",size:"sm",weight:"bold",children:e}),(0,b.jsx)(M.Z,{color:"dark-sub",size:"xs",children:t.seoDescription})]})},width:"30%"},{title:"Image",dataIndex:"image",key:"image",render:function(e,t){return e?(0,b.jsx)(E.Z,{width:40,height:40,src:"".concat(g.lj).concat(e),preview:!1,rootClassName:"object-fit-contain"}):(0,b.jsx)(b.Fragment,{})}},{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M.Z,{color:"dark-sub",size:"sm",children:"Added: ".concat((0,D.Ny)(null===t||void 0===t?void 0:t.addedDate,"MM dd yy"))}),(0,b.jsx)(M.Z,{color:"dark-sub",size:"sm",children:"Modified: ".concat(null!==t&&void 0!==t&&t.modifiedDate?(0,D.Ny)(null===t||void 0===t?void 0:t.modifiedDate,"MM dd yy"):"Not Modified")})]})}},{title:"Default",dataIndex:"isDefault",key:"isDefault",render:function(e,t){return(0,b.jsx)(T.r,{checked:e,onChange:d,recordId:t.id,allowChange:a.updateStaticPageSEO})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return(0,b.jsx)(L,{record:t,onEditIconClick:i,reloadTableData:o,permissions:a})}}];return(0,b.jsx)("div",{className:l.Z.antdTableWrapper,children:(0,b.jsx)(I.Z,{sticky:!0,dataSource:t,columns:c,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"site-static-pages-seo-".concat(null===e||void 0===e?void 0:e.id)}})})}var F=n(31513),N=n(98276),z=n(7789),Y=n(18515),B=n(3798),V=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!0,text:"Site Pages",path:"/siteSettings/site-pages"},{isLink:!1,text:"Static Pages SEO"}];var q=function(){var e,t,n,d,l,u=(0,B.aY)(z.g),g=(0,A.v9)((function(e){return e.usersReducer})).userPermissions,f=g.readStaticPageSEO,h=g.createStaticPageSEO,p=g.updateStaticPageSEO,m=(0,a.useState)({editType:"new",recordId:0,openModal:!1}),v=(0,o.Z)(m,2),P=v[0],x=v[1],y=(0,a.useMemo)((function(){return new j}),[]),C=(0,a.useMemo)((function(){return new S.E}),[]),w=(0,Z.lr)(),E=(0,o.Z)(w,2),I=E[0],R=E[1],M=Number(I.get("pageId")),D=(0,a.useState)({isLoading:!1,error:{},data:[]}),T=(0,o.Z)(D,2),L=T[0],q=T[1],_=(0,a.useState)({isLoading:!1,error:{},data:[]}),H=(0,o.Z)(_,2),K=H[0],Q=H[1],U=function(){!1!==h?x((0,i.Z)((0,i.Z)({},P),{},{openModal:!P.openModal,editType:"new"})):c.ZP.error("You don't have permission to create new record, please contact your admin.")},W=function(){M&&0!==M&&(q((0,i.Z)((0,i.Z)({},L),{},{loading:!0})),y.getAllRecords({sitePageId:M}).then((function(e){q((0,i.Z)((0,i.Z)({},L),e.data))})).catch((function(e){})))};(0,a.useEffect)((function(){Q((0,i.Z)((0,i.Z)({},K),{},{loading:!0})),C.getAllRecords().then((function(e){Q(e.data)})).catch((function(e){}))}),[]),(0,a.useEffect)((function(){W()}),[M]);var $=(0,a.useCallback)((function(e,t){q((0,i.Z)((0,i.Z)({},L),{},{loading:!0}));var n={page:e,perPage:t};y.getAllRecords(n).then((function(e){q((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1}))})).catch((function(e){q((0,i.Z)((0,i.Z)({},L),{},{loading:!1}))}))}),[L,y]);return(0,b.jsxs)(r.default,{permissionSlug:u,children:[(0,b.jsx)(s.mr,{heading:"SEO of",buttonText:"Add New SEO",onButtonClick:U,breadCrumbData:V,showAdd:!0===h,children:(0,b.jsx)("div",{children:(0,b.jsx)(F.Z,{onChange:function(e){return R({pageId:null===e||void 0===e?void 0:e.toString()})},className:"w-200",defaultValue:M||null,placeholder:"Choose page",loading:null===K||void 0===K?void 0:K.loading,options:null===K||void 0===K||null===(e=K.data)||void 0===e?void 0:e.map((function(e){return{label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id}}))})})}),M?(0,b.jsxs)(b.Fragment,{children:[!0===f&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(O,{tableData:null===L||void 0===L?void 0:L.data,tableLoading:null===L||void 0===L?void 0:L.loading,onEditIconClick:function(e){!1!==p?x((0,i.Z)((0,i.Z)({},P),{},{editType:"edit",recordId:e.id,openModal:!0})):c.ZP.error("You don't have permission to update this record")},reloadTableData:W}),(0,b.jsx)(s.tl,{total:null===L||void 0===L||null===(t=L.meta)||void 0===t?void 0:t.total,current:null===L||void 0===L||null===(n=L.meta)||void 0===n?void 0:n.page,defaultPageSize:null!==L&&void 0!==L&&null!==(d=L.meta)&&void 0!==d&&d.perPage?null===L||void 0===L||null===(l=L.meta)||void 0===l?void 0:l.perPage:10,pageSizeOptions:[10,20,50,100],onChange:$})]}),!1===f&&(0,b.jsx)(Y.a$,{mainMessage:"You don't have permission to view this data"}),P.openModal&&(0,b.jsx)(k,{record:P.recordId,type:P.editType,reloadTableData:W,onCancel:U,openModal:P.openModal,permissions:g})]}):(0,b.jsx)(N.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:150},description:(0,b.jsx)("span",{children:"Please select a page to view its content"})})]})}},59816:function(e,t,n){n.d(t,{Y:function(){return d}});var i=n(43144),o=n(15671),a=n(49075),r=n(3135),d=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="country",this.allEndpoint="country/all",this.getAllRecords=function(){return a.Z.get(t.allEndpoint)},this.getAvailableRecords=function(){return a.Z.get("".concat(t.endPoint,"/available-country"))},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})}}))},65960:function(e,t,n){n.d(t,{E:function(){return d}});var i=n(43144),o=n(15671),a=n(49075),r=n(3135),d=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="site-pages",this.createRecord=function(e){return a.Z.post(t.endPoint+"/",e)},this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})},this.allowMultiples=function(e){return a.Z.patch("".concat(t.endPoint,"/allowMultiples/").concat(e))},this.disallowMultiples=function(e){return a.Z.patch("".concat(t.endPoint,"/disallowMultiples/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.deleteMultiple=function(e,n){return a.Z.delete("".concat(t.endPoint,"/removeMultipleSectionFromPage"),{params:{pageId:e,sectionIds:n}})}}))},7789:function(e,t,n){n.d(t,{g:function(){return i}});var i=function(e){return e.CREATE="createStaticPageSEO",e.UPDATE="updateStaticPageSEO",e.DELETE="deleteStaticPageSEO",e.READ="readStaticPageSEO",e}({})}}]);