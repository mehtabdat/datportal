"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[4555],{87971:function(e,n,t){var r=t(1413),o=t(45987),i=t(47313),a=t(86136),s=t(37388),d=t(67907),c=t(1623),l=t(46417),u=["label","hint","asterisk","helperText","className"],m=a.Z.TextArea,p=(0,i.forwardRef)((function(e,n){var t=e.label,i=e.hint,a=e.asterisk,p=e.helperText,h=e.className,f=(0,o.Z)(e,u);return(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsxs)("label",{className:c.Z.labelWrap,children:[(0,l.jsx)("span",{children:t}),i?(0,l.jsx)(s.Z,{title:i,children:(0,l.jsx)(d.Z,{})}):null,a?(0,l.jsx)("span",{className:c.Z.asterisk,children:"*"}):null]}):null,(0,l.jsx)(m,(0,r.Z)((0,r.Z)({ref:n},f),{},{className:"".concat(c.Z.inpt," ").concat(h)})),p?(0,l.jsx)("small",{className:c.Z.helperText,children:p}):null]})}));p.defaultProps={autoSize:{minRows:4},placeholder:"Enter text here",asterisk:!1,hint:""},n.Z=p},74555:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(1413),o=t(29439),i=t(47313),a=t(82626),s=t(85554),d=t(55291),c=t(18515),l=t(33813),u=t(39792),m=t(54060),p=t(41586),h=t(3109),f=t(5900),Z=t(98676),g=t(3113),x=t(46417),v=function(e){var n=e.record,t=e.onEditIconClick,a=e.reloadTableData,s=e.permissions.deleteBrandingTheme,c=(0,i.useMemo)((function(){return new u.p}),[]),l=(0,i.useState)({confirmLoading:!1,openPopConfirm:!1}),m=(0,o.Z)(l,2),p=m[0],h=m[1];return(0,x.jsxs)("div",{className:g.Z.actions,children:[(0,x.jsx)("span",{onClick:function(){return t(n)},children:(0,x.jsx)("img",{src:"/images/editicon.svg",alt:"Edit Icon"})}),(0,x.jsx)(f.Z,{open:p.openPopConfirm,placement:"rightBottom",title:"Are you sure?",onConfirm:function(){if(h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{confirmLoading:!0})})),!1===s)return d.ZP.error("You don't have permission to delete this record, please contact your admin."),void h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{confirmLoading:!1,openPopConfirm:!1})}));c.deleteRecord(n.id).then((function(){h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{openPopConfirm:!1,confirmLoading:!1})})),a()})).catch((function(e){var n,t,o=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message;d.ZP.error(o||"Something went wrong, please try again later."),h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{confirmLoading:!1,openPopConfirm:!1})}))}))},onCancel:function(){return h((0,r.Z)((0,r.Z)({},p),{},{openPopConfirm:!1}))},okButtonProps:{loading:p.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||h((0,r.Z)((0,r.Z)({},p),{},{openPopConfirm:!1}))},children:(0,x.jsx)(Z.Z,{className:g.Z.bg__red,onClick:function(){return h((function(e){return(0,r.Z)((0,r.Z)({},e),{},{openPopConfirm:!0})}))}})})]})},T=function(e){var n=e.tableData,t=e.tableLoading,r=e.onEditIconClick,o=e.reloadTableData,i=e.permissions,a=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1}},{title:"Title",dataIndex:"title",key:"title",render:function(e){return(0,x.jsx)(h.Z,{color:"dark-main",size:"sm",children:e})}},{title:"Payment Terms",dataIndex:"paymentTerms",key:"paymentTerms",render:function(e){return(0,x.jsx)(h.Z,{color:"dark-main",size:"sm",children:e})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,n){return(0,x.jsx)(v,{record:n,onEditIconClick:r,reloadTableData:o,permissions:i})},width:"120px"}];return(0,x.jsx)(p.Z,{sticky:!0,dataSource:n,columns:a,pagination:!1,scroll:{x:991},loading:t,rowKey:function(e){return"branding-theme-".concat(e.id)}})},j=t(29079),y=t(25019),P=t(3798),b=t(87971),k=function(e){var n=e.openModal,t=e.onCancel,r=e.type,s=e.record,c=e.reloadTableData,l=e.permissions,m=l.createBrandingTheme,p=l.updateBrandingTheme,h=y.Z.useForm(),f=(0,o.Z)(h,1)[0],Z=(0,i.useMemo)((function(){return new u.p}),[]),v=(0,j.K2)({method:function(){return Z.getRecordById(s)},condition:"edit"===r&&0!==s}).data,T=(0,i.useState)(!1),k=(0,o.Z)(T,2),C=k[0],w=k[1];return(0,i.useEffect)((function(){if("edit"===r&&v){var e=v.title,n=v.paymentTerms;f.setFieldsValue({title:e,paymentTerms:n})}else f.resetFields()}),[r,v]),(0,x.jsx)(a.P0,{visible:n,closable:!0,onCancel:t,showFooter:!1,titleText:"edit"===r?"Edit Branding Theme":"Add New Branding Theme",children:(0,x.jsxs)(y.Z,{className:g.Z.form,onFinish:function(e){switch(w(!0),r){case"new":!0===m?Z.createRecord(e).then((function(e){var n;d.ZP.success((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Branding theme created successfully"),c(),t()})).catch((function(e){var n=(0,P.S3)(e);d.ZP.error(n||"Something went wrong, please try again later.")})).finally((function(){w(!1)})):(w(!1),d.ZP.error("You don't have permission to create a new record"));break;case"edit":!0===p?Z.updateRecord(e,s).then((function(){c(),t()})).catch((function(e){var n=(0,P.S3)(e);d.ZP.error(n||"Something went wrong, please try again later.")})).finally((function(){w(!1)})):d.ZP.error("You don't have permission to update this record");break;default:w(!1)}},form:f,children:[(0,x.jsx)("div",{children:(0,x.jsx)(y.Z.Item,{name:"title",rules:[{required:!0,message:"Please add a title"}],children:(0,x.jsx)(a.t7,{label:"Title",asterisk:!0,size:"w100"})})}),(0,x.jsx)("div",{children:(0,x.jsx)(y.Z.Item,{name:"paymentTerms",rules:[{required:!0,message:"Please add payment terms"}],children:(0,x.jsx)(b.Z,{label:"Payment Terms",placeholder:"Add Payment Terms"})})}),(0,x.jsxs)("div",{className:g.Z.footer,children:[(0,x.jsx)(a.op,{size:"normal",fontSize:"sm",onClick:t,type:"plain",children:"Cancel"}),(0,x.jsx)(a.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:C,children:"Submit"})]})]})})},C=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Branding Theme"}],w=function(){var e=(0,P.aY)(l.F),n=(0,s.v9)((function(e){return e.usersReducer})).userPermissions,t=n.readBrandingTheme,p=n.createBrandingTheme,h=n.updateBrandingTheme,f=(0,i.useMemo)((function(){return new u.p}),[]),Z=(0,j.$5)({method:f.getAllRecords}),g=Z.data,v=Z.onRefresh,y=Z.loading,b=(0,i.useState)({type:"new",recordId:0,open:!1}),w=(0,o.Z)(b,2),B=w[0],I=w[1],S=function(){!1!==p?I((0,r.Z)((0,r.Z)({},B),{},{open:!B.open,type:"new"})):d.ZP.error("You don't have permission to update this record")};return(0,x.jsxs)(m.Z,{permissionSlug:e,children:[(0,x.jsx)(a.mr,{heading:"Branding Theme",buttonText:"Add Branding Theme",onButtonClick:S,breadCrumbData:C,showAdd:!!p}),!0===t&&(0,x.jsx)(T,{tableData:g,tableLoading:y,onEditIconClick:function(e){!1!==h?I((0,r.Z)((0,r.Z)({},B),{},{open:!B.open,type:"edit",recordId:e.id})):d.ZP.error("You don't have permission to update this record")},reloadTableData:v,permissions:n}),!1===t&&(0,x.jsx)(c.a$,{mainMessage:"You don't have permission to view this data"}),B.open&&(0,x.jsx)(k,{type:B.type,openModal:B.open,record:B.recordId,onCancel:S,reloadTableData:v,permissions:n})]})}},39792:function(e,n,t){t.d(n,{p:function(){return a}});var r=t(43144),o=t(15671),i=t(49075),a=(0,r.Z)((function e(){var n=this;(0,o.Z)(this,e),this.endPoint="branding-theme",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint,e)},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e)}}))}}]);