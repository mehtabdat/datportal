(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[5785],{50008:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var i=n(47312),a="styles_card__cH2rF",r=n(46417),o=function(){return(0,r.jsx)("div",{className:a,children:(0,r.jsx)(i.Z,{active:!0})})}},52386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n(1413),a=n(93433),r=n(29439),o=n(82626),s=n(54060),u="styles_container__jzi4c",c="styles_onlyMyTask__BK67X",d=n(47313),l=n(69309),v=n(55291),f=n(49958),p=n(29079),h=n(8875),g=n(85554),m=n(77448),Z=n(42623),j=n(84825),x=n(87927),y=n(51093),S=n(37936),R=n(3798),k=n(50008),C=n(46417),b=(l.Z.RangePicker,[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Employee Requests",path:"/employee-requests/?all"},{isLink:!1,text:"Cash Advance Request"}]),_=function(){var e,t,n=(0,R.aY)(m.S),l=(0,g.v9)((function(e){return e.usersReducer})).userPermissions,_=(l.createCashAdvance,(0,d.useState)({userId:void 0,fetchOpenRequest:!0,status:void 0,fromDate:void 0,toDate:void 0,page:1,perPage:6})),q=(0,r.Z)(_,2),O=q[0],D=q[1],I=(0,d.useState)({recordId:0}),P=(0,r.Z)(I,2),w=P[0],A=P[1],N=(0,d.useState)(!1),T=(0,r.Z)(N,2),z=T[0],U=T[1],X=(0,d.useMemo)((function(){return new h.a}),[]),L=(0,p.$5)({method:X.getAllRecords,initialQuery:{perPage:O.perPage,page:O.page,fetchOpenRequest:!0}}),M=L.data,E=L.onRefresh,H=(L.setData,L.loading),$=L.meta,B=(0,d.useState)(""),F=(0,r.Z)(B,2),K=F[0],Q=F[1],Y=(0,Z.N)(K,500),G=(0,d.useState)([]),J=(0,r.Z)(G,2),V=J[0],W=J[1],ee=(0,d.useMemo)((function(){return new j.z}),[]),te=(0,d.useCallback)((function(){Y&&ee.getAllRecords({name:Y}).then((function(e){W((function(t){var n,i,r=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,a.Z)(t),(0,a.Z)(r))}))})).catch((function(e){v.ZP.error(e.response.data.message)}))}),[Y]);return(0,d.useEffect)((function(){te()}),[te]),(0,C.jsxs)(s.Z,{permissionSlug:n,children:[(0,C.jsx)(o.mr,{heading:"Cash Advance Request",breadCrumbData:b,filters:(0,C.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,C.jsx)("div",{children:(0,C.jsx)(o.Xy,{type:"radio",label:"User",name:"userId",withSearch:!0,options:null===V||void 0===V?void 0:V.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.id.toString()}})),onChange:function(e){var t=(0,i.Z)((0,i.Z)({},O),{},{userId:e.target.value});D(t)},value:null===(e=O.userId)||void 0===e?void 0:e.toString(),onReset:function(){var e=(0,i.Z)((0,i.Z)({},O),{},{userId:void 0});D(e),E(e),Q("")},onUpdate:function(){return E(O)},searchTerm:K,onSearch:function(e){return Q(e.currentTarget.value)}})}),(0,C.jsx)("div",{children:(0,C.jsx)(o.Xy,{type:"radio",label:"Status",name:"status",withSearch:!1,options:Object.entries(S.zj).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return{label:(0,R.kC)(i.status.replaceAll("_"," ")),value:n}})),onChange:function(e){var t=(0,i.Z)((0,i.Z)({},O),{},{status:e.target.value});D(t)},value:null===(t=O.status)||void 0===t?void 0:t.toString(),onReset:function(){var e=(0,i.Z)((0,i.Z)({},O),{},{status:void 0});D(e),E(e)},onUpdate:function(){return E(O)}})}),(0,C.jsx)("div",{children:(0,C.jsx)(o.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){var t,n,a,r,o=(0,i.Z)((0,i.Z)({},O),{},{fromDate:e?null===(t=e[0])||void 0===t||null===(n=t._d)||void 0===n?void 0:n.toISOString().substring(0,10):void 0,toDate:e?null===(a=e[1])||void 0===a||null===(r=a._d)||void 0===r?void 0:r.toISOString().substring(0,10):void 0});D(o)},onReset:function(){var e=(0,i.Z)((0,i.Z)({},O),{},{fromDate:void 0,toDate:void 0});D(e),E(e)},onUpdate:function(){return E(O)}})}),(0,C.jsx)("div",{style:{backgroundColor:O.fetchOpenRequest?"var(--color-dark-main)":void 0,color:O.fetchOpenRequest?"var(--color-inactive)":void 0},onClick:function(){var e=(0,i.Z)((0,i.Z)({},O),{},{fetchOpenRequest:!O.fetchOpenRequest||void 0});D(e),E(e)},className:c,children:"Open Requests Only"})]})}),(0,C.jsx)("section",{className:u,children:H?(0,a.Z)(new Array(6)).map((function(e,t){return(0,C.jsx)(k.t,{},"shimmer".concat(t))})):0!==(null===M||void 0===M?void 0:M.length)?null===M||void 0===M?void 0:M.map((function(e,t){return(0,C.jsx)(y.R,{cashAdvance:e,onClick:function(){A((0,i.Z)((0,i.Z)({},w),{},{recordId:e.id})),U(!0)}},t)})):(0,C.jsx)("div",{style:{margin:"auto"},children:(0,C.jsx)(o.I$,{description:"No requests found for the given filters, please modify the search criteria"})})}),(0,C.jsx)(f.Z,{hideOnSinglePage:!0,current:null===$||void 0===$?void 0:$.page,total:null===$||void 0===$?void 0:$.total,pageSize:(null===$||void 0===$?void 0:$.perPage)||0,onChange:function(e,t){E((0,i.Z)((0,i.Z)({},O),{},{page:e,perPage:t}))},style:{alignSelf:"flex-end"}}),z&&(0,C.jsx)(x.e,{openDrawer:z,onClose:function(){return U(!1)},permissions:l,record:w.recordId,reloadTableData:E})]})}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);