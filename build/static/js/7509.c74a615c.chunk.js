"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[7509],{87509:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n(1413),o=n(29439),s=n(47313),a=n(2135),c="styles_header__2YcWg",r="styles_opacity_6__1KC-R",d=n(82626),l=n(55291),u=n(98276),m=n(31513),h=n(99420),f=n(50753),g=n(49355),v=n(17),x=n(54060),p=n(21680),Z=n(37388),j=n(41586),P=n(48897),N=n(32147),R=n(46417);function b(e){var t=e.tableData,n=e.tableLoading,i=e.rolePermissions,s=(e.roleData,(0,a.lr)()),c=((0,o.Z)(s,1)[0].get("roleId"),[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"60px"},{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return(0,R.jsxs)("div",{className:"d-flex",children:[(0,R.jsx)("div",{className:"w-50",children:t.icon?(0,R.jsx)(p.Z,{width:20,height:20,src:"".concat(P.lj).concat(t.icon),preview:!1,rootClassName:"object-fit-contain"}):(0,R.jsx)(R.Fragment,{})}),(0,R.jsxs)("div",{children:[(0,R.jsx)(d.ZT,{color:"dark-main",size:"sm",weight:"bold",children:e}),(0,R.jsx)("p",{className:"color-light-800 font-size-xs",children:t.description})]})]})}},{title:"Permissions",dataIndex:"permissions",key:"permissions",render:function(e){return(0,R.jsx)("div",{children:null===e||void 0===e?void 0:e.map((function(e){return(0,R.jsx)("div",{className:"d-flex",children:-1!==i.indexOf(e.action)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"pa-0 ma-0 font-size-sm color-green-yp",children:e.name}),(0,R.jsx)("div",{className:"ml-2",children:(0,R.jsx)(N.Ol,{className:"color-green-yp"})})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"pa-0 ma-0 font-size-sm color-red-yp ".concat(r),children:e.name}),(0,R.jsx)("div",{className:"ml-2 ".concat(r),children:(0,R.jsx)(N.DX,{className:"color-red-yp"})})]})})}))})}},{title:"Action",dataIndex:"action",key:"action",render:function(e,t){return(0,R.jsx)("div",{children:(0,R.jsx)(Z.Z,{placement:"top",title:"You cannot manage permissions for the selected role as \n                            it is determined by the system. You may duplicate the role and \n                            assign respective permissions.",children:(0,R.jsxs)("div",{className:"d-flex",children:[(0,R.jsx)(N.iK,{className:"my-auto ".concat(r)}),(0,R.jsx)(d.ZT,{color:"dark-sub",size:"sm",className:"ml-2 ".concat(r),children:"Manage Permissions"})]})})})}}]);return(0,R.jsx)("div",{children:(0,R.jsx)(j.Z,{sticky:!0,dataSource:t,columns:c,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"roles-permission-view-".concat(e.id)}})})}var y=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Roles",path:"/roles"},{isLink:!1,text:"Role Permissions"}],I=function(){var e=(0,s.useState)(0),t=(0,o.Z)(e,2),n=t[0],r=t[1],p=(0,s.useState)({loading:!1}),Z=(0,o.Z)(p,2),j=Z[0],P=(Z[1],(0,a.lr)()),N=(0,o.Z)(P,2),I=N[0],w=N[1],k=I.get("roleId"),C=I.get("moduleId"),S=function(e){w((0,a.fW)({roleId:String(e)}))},E=(0,s.useMemo)((function(){return new h.U}),[]),_=(0,s.useMemo)((function(){return new f.z}),[]),z=(0,s.useMemo)((function(){return new v.B}),[]),D=(0,s.useState)({data:[],loading:!1}),A=(0,o.Z)(D,2),B=A[0],L=A[1],F=(0,s.useState)({data:[],loading:!1,selectedId:0}),M=(0,o.Z)(F,2),T=M[0],Y=M[1],K=(0,s.useState)([]),H=(0,o.Z)(K,2),O=H[0],U=H[1],W=(0,s.useState)(),V=(0,o.Z)(W,2),X=V[0],q=V[1],G=(0,s.useCallback)((function(){_.getAllRecords().then((function(e){var t;e.data&&null!==(t=e.data)&&void 0!==t&&t.data&&L((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1}))}))}),[k]);(0,s.useEffect)((function(){G()}),[]);(0,s.useEffect)((function(){n&&0!==n&&T.selectedId&&0!==T.selectedId&&S(T.selectedId),T.selectedId&&0!==T.selectedId&&z.getRolePermissions(T.selectedId).then((function(e){var t,n,i=null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e){var t;return null===(t=e.permission)||void 0===t?void 0:t.action}));U(i),S(T.selectedId)})).catch((function(e){l.ZP.error(e.message)}))}),[n,T.selectedId]),(0,s.useEffect)((function(){C&&r(Number(C))}),[C]),(0,s.useEffect)((function(){Y((0,i.Z)((0,i.Z)({},T),{},{selectedId:Number(k),loading:!0})),E.getAllRecords().then((function(e){Y((0,i.Z)((0,i.Z)({},T),{},{data:e.data.data,selectedId:Number(k),loading:!1}))}))}),[E]);var J=(0,s.useCallback)((function(){if(0!==Number(k)){var e=T.data.find((function(e){return e.id===Number(k)}));q(e)}}),[k,T.data]);return(0,s.useEffect)((function(){J()}),[J]),(0,R.jsxs)(x.Z,{children:[(0,R.jsx)(d.mr,{heading:"Role Permissions",breadCrumbData:y}),(0,R.jsx)("div",{className:"d-flex overflow-hidden",children:(0,R.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,R.jsxs)("div",{className:c+" d-flex pb-4",children:[(0,R.jsx)("div",{className:"my-auto color-dark-main",children:"You are viewing permission of"}),(0,R.jsx)("div",{className:"ml-3",children:(0,R.jsx)(m.Z,{onChange:function(e){return Y((0,i.Z)((0,i.Z)({},T),{},{selectedId:e}))},placeholder:"Choose role",allowClear:!0,style:{width:200},className:"selectAntdCustom",loading:T.loading,options:T.data.map((function(e){return{label:e.title,value:e.id}})),defaultValue:Number(k)&&0!==Number(k)?Number(k):null})})]}),(0,R.jsx)("div",{className:"overflow-auto",children:(0,R.jsx)("div",{children:j.loading?(0,R.jsx)(g.Z,{items:16}):Number(k)&&0!==B.data.length?(0,R.jsx)("div",{children:(0,R.jsx)(b,{tableData:B.data,tableLoading:B.loading,rolePermissions:O,roleData:X})}):(0,R.jsx)(u.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:200},description:(0,R.jsx)("span",{children:"Please select a role to view the associated permissions"})})})})]})})]})}},17:function(e,t,n){n.d(t,{B:function(){return c}});var i=n(43144),o=n(15671),s=n(49075),a=n(3135),c=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="permissions",this.getAllRecords=function(){return s.Z.get(t.endPoint)},this.getRecordById=function(e){return s.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return s.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return s.Z.post(t.endPoint+"/",e,{headers:a.C})},this.updateRecord=function(e,n){return s.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:a.C})},this.getRolePermissions=function(e){return s.Z.get("".concat(t.endPoint,"/getRolePermissions/").concat(e))},this.getRolePermissionsByModuleId=function(e,n){return s.Z.get("".concat(t.endPoint,"/getRolePermissions/").concat(e,"/").concat(n))},this.grantPrivilegesToRole=function(e){return s.Z.post("".concat(t.endPoint,"/grantPrivilegesToRole"),e)},this.revokePrivilegesFromRole=function(e){return s.Z.post("".concat(t.endPoint,"/revokePrivilegesFromRole"),e)}}))},99420:function(e,t,n){n.d(t,{U:function(){return a}});var i=n(43144),o=n(15671),s=n(49075),a=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="role",this.getAllRecords=function(e){return s.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return s.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.deleteRecord=function(e){return s.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return s.Z.post(t.endPoint+"/",e)},this.updateRecord=function(e,n){return s.Z.patch("".concat(t.endPoint,"/").concat(n),e)},this.addElements=function(e,n){return s.Z.post("".concat(t.endPoint,"/addDashboardElement/").concat(n),e)},this.removeElements=function(e,n){return s.Z.post("".concat(t.endPoint,"/removeDashboardElement/").concat(n),e)}}))},50753:function(e,t,n){n.d(t,{z:function(){return c}});var i=n(43144),o=n(15671),s=n(49075),a=n(3135),c=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="system-modules",this.getAllRecords=function(){return s.Z.get(t.endPoint)},this.getRecordById=function(e){return s.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return s.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return s.Z.post(t.endPoint+"/",e,{headers:a.C})},this.updateRecord=function(e,n){return s.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:a.C})}}))}}]);