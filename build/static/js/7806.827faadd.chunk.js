"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[7806],{50008:function(e,t,n){n.d(t,{t:function(){return a}});var o=n(47312),r="styles_card__cH2rF",i=n(46417),a=function(){return(0,i.jsx)("div",{className:r,children:(0,i.jsx)(o.Z,{active:!0})})}},41746:function(e,t,n){var o=n(29439),r=n(47313),i=n(28080),a=n(32697),l=n(78267),s=n(45705),c=n(32344),d=n(25568),u=n(46417);t.Z=function(e){var t=e.options,n=e.onChange,m=e.value,f=(0,r.useState)(!1),v=(0,o.Z)(f,2),p=v[0],h=v[1],_=(0,u.jsx)(i.Z,{children:(0,u.jsx)("div",{className:"pa-3",children:(0,u.jsx)(a.Z.Group,{className:d.Z.checkboxGroup,options:t,onChange:function(e){n(e),h(!1)},value:m})})});return(0,u.jsx)("div",{children:(0,u.jsx)(l.Z,{trigger:["click"],open:p,onOpenChange:function(e){return h(e)},dropdownRender:function(){return _},children:(0,u.jsx)("div",{className:d.Z.label,children:(0,u.jsxs)(s.Z,{children:[(0,u.jsx)("span",{children:"More Filters"}),(0,u.jsx)(c.Z,{})]})})})})}},61272:function(e,t,n){var o=n(4942),r=n(29439),i=n(47313),a=n(58467),l=n(55291),s=n(78267),c=n(5900),d=n(95366),u=n(98676),m=n(37289),f=n(59423),v=n(69591),p=n(46417);t.Z=function(e){var t=e.item,n=e.onRefresh,h=e.permissions,_=(0,a.s0)(),j=(0,i.useState)({}),g=(0,r.Z)(j,2),Z=g[0],x=g[1],b=(0,i.useState)(!1),y=(0,r.Z)(b,2),S=y[0],C=y[1],N=(0,i.useMemo)((function(){return new v.Q}),[]);return(0,p.jsx)(s.Z,{trigger:["click"],open:Z[t.id],onOpenChange:function(e){return x((0,o.Z)({},t.id,e))},menu:{items:[{label:"Edit",key:"edit",icon:(0,p.jsx)(d.Z,{}),onClick:function(e){e.domEvent.preventDefault(),_("/projects/edit?id=".concat(t.id))}},{label:(0,p.jsx)(c.Z,{title:"Are you sure to delete this project?",onConfirm:function(){var e;e=t.id,!0===(null===h||void 0===h?void 0:h.deleteProject)?N.deleteRecord(e).then((function(){n()})).catch((function(e){var t=e.response.data.message||"Something went wrong!";l.ZP.error(t)})):l.ZP.error("You don't have permission to delete this project, Please contact your admin"),C(!1),x((0,o.Z)({},t.id,!1))},okText:"Yes",cancelText:"No",placement:"bottom",open:S,onOpenChange:function(e){return C(e)},children:"Delete"}),key:"delete",icon:(0,p.jsx)(u.Z,{}),danger:!0,onClick:function(e){e.domEvent.preventDefault(),C(!S)}}]},children:(0,p.jsx)(m.Z,{className:f.Z.project_item_header_actions_more,onClick:function(e){return e.preventDefault()}})})}},93696:function(e,t,n){var o=n(66204),r=n(8773),i=n(37388),a=n(39548),l=n(10177),s=n(37936),c=n(98505),d=n(48897),u=n(61272),m=n(41995),f=n(59423),v=n(69195),p=n(46417);t.Z=function(e){var t=e.data,n=e.permissions,h=t.onRefresh,_=t.allProjects,j=t.projectStates;return(0,p.jsx)("div",{className:f.Z.projects,children:null===_||void 0===_?void 0:_.map((function(e,t){var _,g,Z,x=e.ProjectMembers,b=e.ProjectClient,y=null===x||void 0===x?void 0:x.find((function(e){return e.projectRole===s.nV.projectIncharge})),S=null===x||void 0===x?void 0:x.filter((function(e){return e.projectRole===s.nV.supportEngineers})),C=b;return(0,p.jsxs)("a",{href:"/projects/".concat(e.slug,"?id=").concat(e.id),className:f.Z.project_item,children:[(0,p.jsxs)("div",{className:f.Z.project_item_header,children:[(0,p.jsxs)("div",{className:f.Z.project_item_header_left,children:[(0,p.jsx)("span",{className:f.Z.project_item_header_id,children:e.referenceNumber}),(0,p.jsx)(o.Z,{className:f.Z.project_item_header_priority,color:s.tt[e.priority].color,children:s.tt[e.priority].title})]}),(0,p.jsxs)("div",{className:f.Z.project_item_header_actions,children:[(0,p.jsx)(v.Z,{permissions:n,data:{projectStates:j,project:{data:e,onRefresh:h}},style:{padding:"3px 5px"}}),(0,p.jsx)(u.Z,{item:e,onRefresh:h,permissions:n})]})]}),(0,p.jsx)("div",{className:f.Z.project_item_body,children:(0,p.jsx)("h3",{className:f.Z.project_item_body_title,children:e.title})}),(0,p.jsxs)("div",{className:f.Z.project_item_footer,children:[(0,p.jsxs)("div",{className:f.Z.project_item_footer_left,children:[(0,p.jsx)(m.Z,{allClients:C,memberInCharge:y,supportEngineers:S,children:(0,p.jsxs)("div",{className:f.Z.project_item_footer_members,children:[(null===y||void 0===y?void 0:y.User)&&(0,p.jsx)("div",{className:f.Z.project_item_footer_members_incharge,children:(0,p.jsx)(r.C,{size:25,style:{border:"1px solid var(--color-light-200)"},src:"".concat(d.lj).concat(null===y||void 0===y||null===(_=y.User)||void 0===_?void 0:_.profile),icon:(0,p.jsx)(a.Z,{})})}),(null===S||void 0===S?void 0:S.length)>0&&(0,p.jsx)("div",{className:f.Z.project_item_footer_members_support,children:(0,p.jsx)(r.C.Group,{children:null===S||void 0===S?void 0:S.map((function(e){return(0,p.jsx)(r.C,{size:25,style:{border:"1px solid var(--color-light-200)",marginTop:"5px"},src:d.lj+e.User.profile,icon:(0,p.jsx)(a.Z,{})},"project-member-".concat(e.User.id))}))})}),(null===C||void 0===C?void 0:C.length)>0&&(0,p.jsx)("div",{className:f.Z.project_item_footer_members_clients,children:(0,p.jsx)(r.C.Group,{children:null===C||void 0===C?void 0:C.map((function(e){return(0,p.jsx)(r.C,{size:25,style:{border:"1px solid var(--color-light-200)"},src:"".concat(d.lj).concat(e.Client.logo),icon:(0,p.jsx)(a.Z,{})},"project-member-".concat(e.Client.id))}))})})]})}),(0,p.jsxs)("div",{className:f.Z.project_item_footer_date,children:[(0,p.jsx)("span",{className:f.Z.project_item_footer_date_start,children:(0,c.Ny)(e.startDate,"M dd,yy")}),(0,p.jsx)("span",{className:f.Z.project_item_footer_date_separator,children:"-"}),(0,p.jsx)("span",{className:f.Z.project_item_footer_date_end,children:(0,c.Ny)(e.endDate,"M dd,yy")})]})]}),(0,p.jsx)("div",{className:f.Z.project_item_footer_counts,children:(0,p.jsx)(i.Z,{title:"".concat(null===(g=e._count)||void 0===g?void 0:g.Resources," Files in this project"),placement:"left",children:(0,p.jsxs)("span",{className:f.Z.project_item_footer_counts_files,children:[(0,p.jsx)(l.Z,{style:{color:"var(--color-light-300)"}}),null===(Z=e._count)||void 0===Z?void 0:Z.Resources]})})})]})]},"project-".concat(t))}))})}},41995:function(e,t,n){var o=n(61677),r=n(59423),i=n(46417);t.Z=function(e){var t,n,a=e.memberInCharge,l=e.supportEngineers,s=e.allClients,c=e.children;return(0,i.jsx)(o.Z,{trigger:"hover",content:(0,i.jsxs)("div",{className:r.Z.project_item_footer_members_popover,children:[(null===a||void 0===a?void 0:a.User)&&(0,i.jsxs)("div",{className:r.Z.project_item_footer_members_popover_item,children:[(0,i.jsx)("strong",{className:r.Z.project_item_footer_members_popover_item_title,children:"Project Incharge"}),(0,i.jsx)("br",{}),"".concat(null===a||void 0===a||null===(t=a.User)||void 0===t?void 0:t.firstName," ").concat(null===a||void 0===a||null===(n=a.User)||void 0===n?void 0:n.lastName)]}),(null===l||void 0===l?void 0:l.length)>0&&(0,i.jsxs)("div",{className:r.Z.project_item_footer_members_popover_item,children:[(0,i.jsx)("strong",{className:r.Z.project_item_footer_members_popover_item_title,children:"Support Engineers"}),null===l||void 0===l?void 0:l.map((function(e,t){return(0,i.jsx)("div",{children:"".concat(t+1,". ").concat(e.User.firstName," ").concat(e.User.lastName)},"support-engineer-".concat(t))}))]}),(null===s||void 0===s?void 0:s.length)>0&&(0,i.jsxs)("div",{className:r.Z.project_item_footer_members_popover_item,children:[(0,i.jsx)("strong",{className:r.Z.project_item_footer_members_popover_item_title,children:"Clients"}),null===s||void 0===s?void 0:s.map((function(e,t){return(0,i.jsxs)("div",{children:["".concat(t+1,". ").concat(e.Client.name),!0===e.isRepresentative&&(0,i.jsx)("span",{children:"(Representative)"})]},"client-".concat(t))}))]})]}),children:c})}},69195:function(e,t,n){n.d(t,{Z:function(){return Z}});var o=n(1413),r=n(29439),i=n(47313),a=n(8570),l=n(55291),s=n(78267),c=n(46155),d=n(37388),u=n(32344),m=n(69591),f="styles_dropdownOverlay__P2gn7",v="styles_dropdownContainer__cMktZ",p="styles_searchContainer__zM6QV",h="styles_searchInput__oZFQF",_=n(37831),j=n(80235),g=n(46417),Z=(a.Z.Text,function(e){var t,n,a,Z,x,b=e.data,y=e.permissions,S=e.style,C=b.projectStates,N=b.project,P=N.data,w=N.onRefresh,R=(0,i.useMemo)((function(){return new m.Q}),[]),k=(0,i.useState)({data:C,query:""}),I=(0,r.Z)(k,2),E=I[0],M=I[1];return(0,i.useEffect)((function(){M({data:C,query:""})}),[C]),(0,g.jsx)(s.Z,{trigger:["click"],menu:{items:null===(t=E.data)||void 0===t?void 0:t.map((function(e){var t;return{key:"state-".concat(e.id),label:e.title,onClick:function(){return function(e){var t={projectId:P.id,projectStateId:e};!0===y.updateProject?R.updateProjectStatus(t).then((function(e){var t=e.data;l.ZP.success((null===t||void 0===t?void 0:t.message)||"States changed successfully"),w()})).catch((function(e){var t,n,o=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message;l.ZP.error(o||"Something went wrong")})):l.ZP.error("You do not have permission to update project States, please contact your administrator")}(e.id)},disabled:e.id===(null===P||void 0===P||null===(t=P.ProjectState)||void 0===t?void 0:t.id)}}))},overlayClassName:f,dropdownRender:function(e){var t;return(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)("div",{className:p,children:(0,g.jsx)(_.Z,{placeHolder:"Search",size:"w100",value:E.query,onChange:function(e){var t,n=e.target.value||"",o=null===n||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase(),r=C.filter((function(e){return e.title.toLowerCase().includes(o)}));M({data:r,query:o})},className:h})}),(0,g.jsx)(c.Z,{style:{marginBottom:10,marginTop:0}}),e,!(null!==(t=E.data)&&void 0!==t&&t.length)&&(0,g.jsx)(j.Z,{description:"No data found"})]})},children:(0,g.jsx)(d.Z,{title:null===P||void 0===P||null===(n=P.ProjectState)||void 0===n?void 0:n.title,children:(0,g.jsxs)("div",{style:(0,o.Z)({display:"flex",alignItems:"center",background:"".concat(null===P||void 0===P||null===(a=P.ProjectState)||void 0===a?void 0:a.bgColor),cursor:"pointer",color:"".concat((null===P||void 0===P||null===(Z=P.ProjectState)||void 0===Z?void 0:Z.textColor)||"var(--color-dark-sub"),padding:"5px 10px",borderRadius:"5px",fontSize:"14px",whiteSpace:"nowrap"},S),children:[(0,g.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",maxWidth:window.innerWidth>1500?"30ch":"15ch"},children:(null===P||void 0===P||null===(x=P.ProjectState)||void 0===x?void 0:x.title)||"Select States"}),(0,g.jsx)(u.Z,{style:{marginLeft:5}})]})})})})},57806:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var o=n(93433),r=n(4942),i=n(1413),a=n(29439),l=n(47313),s=n(2135),c=n(55291),d=n(70638),u=n(44658),m=n(87462),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},v=n(16141),p=function(e,t){return l.createElement(v.Z,(0,m.Z)({},e,{ref:t,icon:f}))};var h=l.forwardRef(p),_=n(85554),j=n(54060),g=n(82626),Z=n(18515),x=n(41746),b=n(29079),y=n(69591),S=n(96702),C=n(84825),N=n(5190),P=n(73257),w=n(3798),R=n(98505),k=n(37936),I=n(42623),E=n(93696),M=n(8570),z=n(66204),T=n(8773),U=n(41586),V=n(39548),F=n(48897),A=n(61272),O=n(41995),D=n(74165),H=n(15861),Q=n(25019),q=n(7655),B=n(3113),X=n(49355),G=n(46646),L=n(40169),W=n(43144),Y=n(15671),$=n(49075),J=(0,W.Z)((function e(){var t=this;(0,Y.Z)(this,e),this.endPoint="project-enable-states",this.getAllRecords=function(e){return $.Z.get(t.endPoint,{params:e})},this.getByProjectId=function(e){return $.Z.get(t.endPoint+"/by-project/"+e)},this.createRecord=function(e,n){return $.Z.post("".concat(t.endPoint,"/add"),(0,i.Z)((0,i.Z)({},e),{},{projectId:n}))},this.deleteRecord=function(e,n){return $.Z.delete("".concat(t.endPoint,"/remove"),{data:(0,i.Z)((0,i.Z)({},e),{},{projectId:n})})}})),K=n(46417),ee=function(e){var t=e.openModal,n=e.onCancel,o=e.projectId,r=e.reloadTableData,i=(e.permissions,Q.Z.useForm()),s=(0,a.Z)(i,1)[0],d=(0,l.useMemo)((function(){return new P.x}),[]),u=(0,l.useMemo)((function(){return new J}),[]),m=(0,l.useState)([]),f=(0,a.Z)(m,2),v=f[0],p=f[1],h=(0,l.useState)([]),_=(0,a.Z)(h,2),j=_[0],Z=_[1],x=[];null===j||void 0===j||j.forEach((function(e){null!==e&&void 0!==e&&e.pstateId&&x.push(e.pstateId.toString())}));var b=(0,l.useState)(x),y=(0,a.Z)(b,2),S=y[0],C=y[1],N=function(e){var t=(0,L.P)(e);if("string"==typeof t.message)c.ZP.error(t.message);else{var n=(0,G.O)(t.message,[]);s.setFields(n)}},w=(0,l.useCallback)((function(){d.getAllRecords().then((function(e){e.data&&p(e.data.data)})).catch((function(e){N(e)}))}),[d]),R=(0,l.useCallback)((0,H.Z)((0,D.Z)().mark((function e(){var t;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.getByProjectId(o);case 3:(t=e.sent).data&&Z(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[u,o]);(0,l.useEffect)((function(){t&&(w(),R())}),[t,s]);return(0,K.jsx)(g.P0,{visible:t,closable:!0,onCancel:n,titleText:"Manage Project States",showFooter:!1,children:0===v.length?(0,K.jsx)(X.Z,{items:10}):(0,K.jsxs)(Q.Z,{className:B.Z.form,onFinish:function(e){var t,i=null===e||void 0===e||null===(t=e.projectStateIds)||void 0===t?void 0:t.map((function(e){return Number(e)}));u.createRecord({projectStateIds:i},o).then((function(e){r(),n(),c.ZP.success("Saved Successfully")})).catch((function(e){N(e)}));var a=[];x.forEach((function(e){S.includes(e)||a.push(Number(e))})),a.length>0&&u.deleteRecord({projectStateIds:a},o).catch((function(e){c.ZP.error(e.message)}))},form:s,children:[(0,K.jsx)("div",{children:(0,K.jsx)(Q.Z.Item,{name:"projectStateIds",rules:[{required:!1}],children:(0,K.jsx)(q.Z,{dataSource:v.filter(Boolean).map((function(e){return{key:e.id.toString(),title:e.title,description:e.title.toLowerCase(),chosen:S.includes(e.id.toString())}})),listStyle:{width:250,height:400},showSearch:!0,filterOption:function(e,t){return t.description.indexOf(e.toLowerCase())>-1},targetKeys:S,onChange:function(e){C(e)},render:function(e){return e.title}})})}),(0,K.jsxs)("div",{className:B.Z.footer,children:[(0,K.jsx)(g.op,{size:"normal",fontSize:"sm",onClick:n,type:"plain",children:"Cancel"}),(0,K.jsx)(g.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",children:"Save"})]})]})})},te=M.Z.Paragraph,ne=function(e){var t=e.data,n=e.permissions,r=e.rowSelection,i=t.onRefresh,s=t.allProjects,c=t.projectStates,d=(Array.isArray(c)&&(0,o.Z)(c).sort((function(e,t){return e.title.localeCompare(t.title)})),(0,l.useState)(!1)),u=(0,a.Z)(d,2),m=u[0],f=u[1],v=(0,l.useState)(null),p=(0,a.Z)(v,2),h=p[0],_=p[1],j=[{title:"Reference Number",dataIndex:"referenceNumber",key:"referenceNumber",render:function(e){return(0,K.jsx)(g.ZT,{color:"dark-sub",size:"sm",children:e})}},{title:"Title",dataIndex:"title",key:"title",render:function(e,t){var n=t.priority;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("a",{href:"/projects/".concat(t.slug,"?id=").concat(t.id),title:"View Project Details",children:(0,K.jsx)(g.ZT,{color:"dark-main",weight:"semi",children:e})}),(0,K.jsxs)(te,{ellipsis:{rows:2,expandable:!0,symbol:"more"},className:"mt-1 color-dark-sub mb-0",children:["Slug: ",null===t||void 0===t?void 0:t.slug]}),(0,K.jsx)("div",{className:"d-flex mt-1",children:(0,K.jsx)(z.Z,{color:k.tt[n].color,style:{borderRadius:15},children:k.tt[n].title})})]})}},{title:"Client",dataIndex:"client",key:"client",render:function(e){return(0,K.jsxs)("div",{className:"d-flex",children:[(0,K.jsx)(T.C,{size:"small",className:"mr-2",src:"".concat(F.lj).concat(null===e||void 0===e?void 0:e.logo),icon:(0,K.jsx)(V.Z,{})}),(0,K.jsx)(g.ZT,{color:"dark-main",className:"mt-1",children:null===e||void 0===e?void 0:e.name})]})}},{title:"Members",dataIndex:"ProjectMembers",key:"ProjectMembers",render:function(e,t){var n=null===e||void 0===e?void 0:e.find((function(e){return e.projectRole===k.nV.projectIncharge})),o=null===e||void 0===e?void 0:e.filter((function(e){return e.projectRole===k.nV.supportEngineers})),r=t.ProjectClient;return(0,K.jsx)(O.Z,{allClients:r,memberInCharge:n,supportEngineers:o,children:(0,K.jsx)("div",{children:(0,K.jsx)(T.C.Group,{maxCount:3,size:"small",maxPopoverTrigger:"focus",children:null===e||void 0===e?void 0:e.map((function(e){var t;return(0,K.jsx)(T.C,{src:"".concat(F.lj).concat(null===e||void 0===e||null===(t=e.User)||void 0===t?void 0:t.profile),icon:(0,K.jsx)(V.Z,{})})}))})})})}},{title:"Status",dataIndex:"ProjectState",key:"ProjectState",render:function(e,t){return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(te,{ellipsis:{rows:1,expandable:!1},className:"my-0 color-dark-sub",children:(0,K.jsx)("ul",{style:{listStyle:"none",padding:0},children:c.map((function(e){return(0,K.jsx)("li",{className:"font-size-xs ml-0",children:e.title},e.id)}))})}),(0,K.jsx)("p",{className:"color-dark-main font-weight-bold font-size-sm mb-0 ml-1 cursor-pointer",onClick:function(){return function(e){_(e),f(!0)}(t)},children:"Manage State"})]})}},{title:"Type",dataIndex:"ProjectType",key:"ProjectType",render:function(e){return(0,K.jsx)(g.ZT,{color:"dark-main",className:"mt-1",children:null===e||void 0===e?void 0:e.title})}},{title:"Date",dataIndex:"startDate",key:"startDate",render:function(e,t){return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(g.ZT,{color:"dark-sub",size:"sm",children:"Start: ".concat((0,R.Ny)(e,"dd MM yy"))||0}),(0,K.jsx)(g.ZT,{color:"dark-sub",size:"sm",children:"End: ".concat((0,R.Ny)(null===t||void 0===t?void 0:t.endDate,"dd MM yy"))||0})]})}},{title:"Action",key:"action",render:function(e,t){return(0,K.jsx)(A.Z,{item:t,permissions:n,onRefresh:i})}}];return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(U.Z,{columns:j,dataSource:s,pagination:!1,rowKey:"id",rowSelection:r}),(0,K.jsx)(ee,{openModal:m,onCancel:function(){f(!1)},projectId:(null===h||void 0===h?void 0:h.id)||0,reloadTableData:i,permissions:n,currentForm:"projectForm",type:"edit"})]})},oe="styles_view_as__Gx3wn",re=n(50008),ie=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Projects"}],ae=function(){var e,t,n=(0,s.lr)(),m=(0,a.Z)(n,1)[0],f=(0,w.aY)(S.n),v=(0,_.v9)((function(e){return e.usersReducer})).userPermissions,p=v.readProject,M=(0,l.useMemo)((function(){return new y.Q}),[]),z=(0,l.useMemo)((function(){return new P.x}),[]),T=(0,l.useMemo)((function(){return new C.z}),[]),U=(0,l.useMemo)((function(){return new N.L}),[]),V=(0,l.useState)((function(){return"table"===localStorage.getItem("projectViewAs")?"table":"grid"})),F=(0,a.Z)(V,2),A=F[0],O=F[1],D=(0,l.useState)([]),H=(0,a.Z)(D,2),Q=H[0],q=H[1],X=(0,l.useState)([]),G=(0,a.Z)(X,2),L=G[0],W=G[1],Y=(0,l.useState)({title:"",slug:"",quoteNumber:"",projectStateSlugs:"",clientId:0,isClosed:void 0,dateRange:[],userIds:[],projectRole:0}),$=(0,a.Z)(Y,2),J=$[0],ee=$[1],te=(0,l.useState)(!1),ae=(0,a.Z)(te,2),le=ae[0],se=ae[1],ce=(0,l.useState)(),de=(0,a.Z)(ce,2),ue=de[0],me=de[1],fe=(0,l.useState)(""),ve=(0,a.Z)(fe,2),pe=ve[0],he=ve[1],_e=(0,l.useState)(""),je=(0,a.Z)(_e,2),ge=je[0],Ze=je[1],xe=(0,I.N)(ue,500),be=(0,I.N)(pe,500),ye=(0,I.N)(ge,500),Se=(0,b.$5)({method:M.getAllRecords,initialQuery:{isClosed:"true"===m.get("isClosed")||"false"!==m.get("isClosed")&&void 0,onHold:"true"===m.get("onHold")||"false"!==m.get("onHold")&&void 0}}),Ce=Se.data,Ne=Se.meta,Pe=Se.onRefresh,we=Se.loading,Re=(0,b.$5)({method:z.getPublishedRecords,initialQuery:{perPage:100}}).data,ke=(0,l.useState)({data:[],loading:!1}),Ie=(0,a.Z)(ke,2),Ee=Ie[0],Me=Ie[1],ze=(0,l.useState)({data:[],loading:!1}),Te=(0,a.Z)(ze,2),Ue=Te[0],Ve=Te[1],Fe=function(e){var t,n=e.target,o=n.name,a=n.value,l=[{key:"clientId",name:"Client"},{key:"projectRole",name:"Project Role"}];if(l.some((function(e){return e.key===o}))&&!(0,w.hj)(a))return void c.ZP.error("".concat(null===(t=l.find((function(e){return e.key===o})))||void 0===t?void 0:t.name," should be a number"));ee((0,i.Z)((0,i.Z)({},J),{},(0,r.Z)({},o,a)))},Ae=(0,l.useCallback)((function(e,t){e&&(se(!0),ee((0,i.Z)((0,i.Z)({},J),{},(0,r.Z)({},e,t))))}),[J]),Oe=(0,l.useCallback)((function(e){var t,n,o,r=(null===(t=J.dateRange)||void 0===t?void 0:t[0])||"",a=(null===(n=J.dateRange)||void 0===n?void 0:n[1])||"",l=r?(0,R.Ny)(r,"yy-mm-dd"):void 0,s=a?(0,R.Ny)(a,"yy-mm-dd"):void 0,c=(0,i.Z)({slug:J.slug||void 0,quoteNumber:J.quoteNumber||void 0,projectStateSlugs:J.projectStateSlugs?[J.projectStateSlugs]:void 0,clientId:Number(J.clientId)>0?Number(J.clientId):void 0,isClosed:J.isClosed||void 0,fromDate:l,toDate:s,userIds:null!==(o=J.userIds)&&void 0!==o&&o.length?J.userIds:void 0,projectRole:Number(J.projectRole)>0?Number(J.projectRole):void 0,title:xe||void 0},e);Pe(c)}),[J,Pe]),De=(0,l.useCallback)((function(){Oe(void 0!==xe?{title:xe}:{title:void 0})}),[xe]),He=(0,l.useCallback)((function(){be&&(Me((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!0})})),T.getAllRecords({name:be}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;Me((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.data.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t,n;c.ZP.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong"),Me((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})))}),[be]),Qe=(0,l.useCallback)((function(){ye&&(Ve((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!0})})),U.findPublished({name:ye}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;Ve((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.data.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t,n;c.ZP.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong"),Ve((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})))}),[ye]);(0,l.useEffect)((function(){De()}),[De]),(0,l.useEffect)((function(){He()}),[He]),(0,l.useEffect)((function(){Qe()}),[Qe]),(0,l.useEffect)((function(){le&&Oe();var e=setTimeout((function(){se(!1)}),2e3);return function(){return clearTimeout(e)}}),[le]),(0,l.useEffect)((function(){!1===p&&window.location.replace("/")}),[p]);var qe=[{label:"Users",value:"userIds"},{label:"Slug",value:"slug"},{label:"Closed Projects",value:"isClosed"}],Be={userIds:(0,K.jsx)(g.Xy,{type:"multiSelect",label:"Users",name:"userIds",withSearch:!0,options:null===Ee||void 0===Ee||null===(e=Ee.data)||void 0===e?void 0:e.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})),onChange:function(e){ee((0,i.Z)((0,i.Z)({},J),{},{userIds:e}))},onReset:function(){se(!0),Ae("userIds",[]),he("")},defaultVisible:L.includes("userIds"),onUpdate:Oe,loading:Ee.loading,searchTerm:pe,onSearch:function(e){return he(e.currentTarget.value)}}),slug:(0,K.jsx)(g.Xy,{type:"input",label:"Slug",name:"slug",value:String(null===J||void 0===J?void 0:J.slug),onChange:Fe,onReset:function(){return Ae("slug","")},onUpdate:Oe,defaultVisible:L.includes("slug")}),isClosed:(0,K.jsx)(g.Xy,{type:"radio",label:"Closed Projects",name:"isClosed",options:[{label:"Yes",value:"true"},{label:"No",value:"false"}],value:String(null===J||void 0===J?void 0:J.isClosed),onChange:Fe,onReset:function(){return Ae("isClosed","")},onUpdate:Oe,defaultVisible:L.includes("isClosed")})};return(0,l.useEffect)((function(){var e=m.get("isClosed");null!==e&&ee((function(t){return(0,i.Z)((0,i.Z)({},t),{},{isClosed:"true"===e})}))}),[]),(0,K.jsxs)(j.Z,{permissionSlug:f,onGetProjects:Oe,children:[(0,K.jsx)(g.mr,{heading:"Projects",breadCrumbData:ie,filters:p?(0,K.jsxs)("div",{className:B.Z.filterWrapper,children:[Q.length>0?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)("div",{children:"Bulk Action Components will be here"})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{children:(0,K.jsx)(g.t7,{placeHolder:"Search by title or reference number",onChange:function(e){var t=e.currentTarget;me(t.value),Fe(e)},value:ue})}),(0,K.jsx)("div",{children:(0,K.jsx)(g.Xy,{type:"radio",label:"Project Status",name:"projectStateSlugs",options:(null===Re||void 0===Re?void 0:Re.map((function(e){return{label:e.title,value:"".concat(e.slug)}})))||[],value:"".concat(null===J||void 0===J?void 0:J.projectStateSlugs),onChange:Fe,onReset:function(){return Ae("projectStateSlugs","")},onUpdate:Oe})}),(0,K.jsx)("div",{children:(0,K.jsx)(g.Xy,{type:"input",label:"Quote Number",name:"quoteNumber",value:"".concat(null===J||void 0===J?void 0:J.quoteNumber),onChange:Fe,onReset:function(){return Ae("quoteNumber","")},onUpdate:Oe})}),(0,K.jsx)(g.Xy,{type:"radio",label:"Client",name:"clientId",withSearch:!0,options:null===Ue||void 0===Ue||null===(t=Ue.data)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:"".concat(e.id)}})),onChange:Fe,value:Number(null===J||void 0===J?void 0:J.clientId)>0?"".concat(null===J||void 0===J?void 0:J.clientId):"",onReset:function(){Ae("clientId",0),Ze("")},onUpdate:Oe,loading:Ue.loading,searchTerm:ge,onSearch:function(e){return Ze(e.currentTarget.value)}}),(0,K.jsx)("div",{children:(0,K.jsx)(g.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){return ee((0,i.Z)((0,i.Z)({},J),{},{dateRange:e}))},onReset:function(){return Ae("dateRange","")},onUpdate:Oe})}),(0,K.jsx)("div",{children:(0,K.jsx)(g.Xy,{type:"radio",label:"Project Role",name:"projectRole",options:Object.entries(k.gJ).map((function(e){var t=(0,a.Z)(e,2);return{label:t[0],value:t[1]}})),value:String(null===J||void 0===J?void 0:J.projectRole),onChange:Fe,onReset:function(){return Ae("projectRole","")},onUpdate:Oe})}),Object.keys(Be).map((function(e){return(null===L||void 0===L?void 0:L.includes(e))&&Be[e]})),(0,K.jsx)("div",{children:(0,K.jsx)(x.Z,{options:null===qe||void 0===qe?void 0:qe.map((function(e){return{label:e.label,value:e.value}})),onChange:function(e){return W(e)},value:L})})]}),(0,K.jsx)("div",{style:{overflow:"auto"},className:oe,children:(0,K.jsx)(d.Z,{options:[{label:"Table",value:"table",icon:(0,K.jsx)(u.Z,{})},{label:"Grid",value:"grid",icon:(0,K.jsx)(h,{})}],onChange:function(e){O(e),function(e){localStorage.setItem("projectViewAs",e)}(e)},value:A})})]}):null}),!Ce&&we&&(0,K.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",gap:10},children:Array(6).fill(0).map((function(e,t){return(0,K.jsx)(re.t,{},"shimmerItem-".concat(t))}))}),!0===p&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:B.Z.antdTableWrapper,children:0===(null===Ce||void 0===Ce?void 0:Ce.length)?(0,K.jsx)("div",{style:{marginTop:"50px"},children:(0,K.jsx)(g.I$,{description:"No Projects found"})}):(0,K.jsx)(K.Fragment,{children:"table"===A?(0,K.jsx)(ne,{data:{allProjects:Ce,onRefresh:Oe,projectStates:Re},permissions:v,rowSelection:{selectedRowKeys:Q,onChange:q}}):(0,K.jsx)(E.Z,{data:{allProjects:Ce,onRefresh:Oe,projectStates:Re},permissions:v})})}),(0,K.jsx)(g.tl,{total:null===Ne||void 0===Ne?void 0:Ne.total,current:null===Ne||void 0===Ne?void 0:Ne.page,defaultPageSize:25,pageSizeOptions:[10,20,50,100],onChange:function(e,t){return Oe({page:e,perPage:t})}})]}),!1===p&&(0,K.jsx)(Z.a$,{mainMessage:"You don't have permission to view this data"})]})}},5190:function(e,t,n){n.d(t,{L:function(){return l}});var o=n(43144),r=n(15671),i=n(49075),a=n(3135),l=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return i.Z.get(t.endPoint,{params:e})},this.findPublished=function(e){return i.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(t.endPoint,e,{headers:a.C})},this.updateRecord=function(e,n){return i.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:a.C})},this.getTenants=function(){return i.Z.get("xero/getTenants")}}))},73257:function(e,t,n){n.d(t,{x:function(){return a}});var o=n(43144),r=n(15671),i=n(49075),a=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="project-state",this.getAllRecords=function(e){return i.Z.get(t.endPoint,{params:e})},this.getPublishedRecords=function(e){return i.Z.get("".concat(t.endPoint,"/find-published"),{params:e})},this.getRecordById=function(e){return i.Z.get(t.endPoint+"/"+e)},this.deleteRecord=function(e){return i.Z.delete(t.endPoint+"/"+e)},this.createRecord=function(e){return i.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return i.Z.patch(t.endPoint+"/"+n,e)}}))},44658:function(e,t,n){var o=n(87462),r=n(47313),i=n(58585),a=n(16141),l=function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:i.Z}))};t.Z=r.forwardRef(l)},95366:function(e,t,n){var o=n(87462),r=n(47313),i=n(95656),a=n(16141),l=function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:i.Z}))};t.Z=r.forwardRef(l)},10177:function(e,t,n){var o=n(87462),r=n(47313),i=n(63961),a=n(16141),l=function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:i.Z}))};t.Z=r.forwardRef(l)},37289:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(87462),r=n(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},a=n(16141),l=function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:i}))};var s=r.forwardRef(l)},70638:function(e,t,n){n.d(t,{Z:function(){return w}});var o=n(4942),r=n(87462),i=n(71002),a=n(46123),l=n.n(a),s=n(29439),c=n(45987),d=n(1413),u=n(47313),m=n(10288),f=n(16945),v=n(205),p=n(25266),h=n(72846),_=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},j=function(e){return void 0!==e?"".concat(e,"px"):void 0};function g(e){var t=e.prefixCls,n=e.containerRef,o=e.value,r=e.getValueIndex,i=e.motionName,a=e.onMotionStart,c=e.onMotionEnd,m=e.direction,v=u.useRef(null),g=u.useState(o),Z=(0,s.Z)(g,2),x=Z[0],b=Z[1],y=function(e){var o,i=r(e),a=null===(o=n.current)||void 0===o?void 0:o.querySelectorAll(".".concat(t,"-item"))[i];return(null===a||void 0===a?void 0:a.offsetParent)&&a},S=u.useState(null),C=(0,s.Z)(S,2),N=C[0],P=C[1],w=u.useState(null),R=(0,s.Z)(w,2),k=R[0],I=R[1];(0,h.Z)((function(){if(x!==o){var e=y(x),t=y(o),n=_(e),r=_(t);b(o),P(n),I(r),e&&t?a():c()}}),[o]);var E=u.useMemo((function(){return j("rtl"===m?-(null===N||void 0===N?void 0:N.right):null===N||void 0===N?void 0:N.left)}),[m,N]),M=u.useMemo((function(){return j("rtl"===m?-(null===k||void 0===k?void 0:k.right):null===k||void 0===k?void 0:k.left)}),[m,k]);return N&&k?u.createElement(p.ZP,{visible:!0,motionName:i,motionAppear:!0,onAppearStart:function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onAppearEnd:function(){P(null),I(null),c()}},(function(e,n){var o=e.className,r=e.style,i=(0,d.Z)((0,d.Z)({},r),{},{"--thumb-start-left":E,"--thumb-start-width":j(null===N||void 0===N?void 0:N.width),"--thumb-active-left":M,"--thumb-active-width":j(null===k||void 0===k?void 0:k.width)}),a={ref:(0,f.sQ)(v,n),style:i,className:l()("".concat(t,"-thumb"),o)};return u.createElement("div",a)})):null}var Z=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function x(e){return e.map((function(e){if("object"===(0,i.Z)(e)&&null!==e){var t=function(e){return"undefined"!==typeof e.title?e.title:"object"!==(0,i.Z)(e.label)?null===(t=e.label)||void 0===t?void 0:t.toString():void 0;var t}(e);return(0,d.Z)((0,d.Z)({},e),{},{title:t})}return{label:null===e||void 0===e?void 0:e.toString(),title:null===e||void 0===e?void 0:e.toString(),value:e}}))}var b=function(e){var t=e.prefixCls,n=e.className,r=e.disabled,i=e.checked,a=e.label,s=e.title,c=e.value,d=e.onChange;return u.createElement("label",{className:l()(n,(0,o.Z)({},"".concat(t,"-item-disabled"),r))},u.createElement("input",{className:"".concat(t,"-item-input"),type:"radio",disabled:r,checked:i,onChange:function(e){r||d(e,c)}}),u.createElement("div",{className:"".concat(t,"-item-label"),title:s},a))},y=u.forwardRef((function(e,t){var n,i,a=e.prefixCls,d=void 0===a?"rc-segmented":a,p=e.direction,h=e.options,_=e.disabled,j=e.defaultValue,y=e.value,S=e.onChange,C=e.className,N=void 0===C?"":C,P=e.motionName,w=void 0===P?"thumb-motion":P,R=(0,c.Z)(e,Z),k=u.useRef(null),I=u.useMemo((function(){return(0,f.sQ)(k,t)}),[k,t]),E=u.useMemo((function(){return x(h)}),[h]),M=(0,m.Z)(null===(n=E[0])||void 0===n?void 0:n.value,{value:y,defaultValue:j}),z=(0,s.Z)(M,2),T=z[0],U=z[1],V=u.useState(!1),F=(0,s.Z)(V,2),A=F[0],O=F[1],D=function(e,t){_||(U(t),null===S||void 0===S||S(t))},H=(0,v.Z)(R,["children"]);return u.createElement("div",(0,r.Z)({},H,{className:l()(d,(i={},(0,o.Z)(i,"".concat(d,"-rtl"),"rtl"===p),(0,o.Z)(i,"".concat(d,"-disabled"),_),i),N),ref:I}),u.createElement("div",{className:"".concat(d,"-group")},u.createElement(g,{prefixCls:d,value:T,containerRef:k,motionName:"".concat(d,"-").concat(w),direction:p,getValueIndex:function(e){return E.findIndex((function(t){return t.value===e}))},onMotionStart:function(){O(!0)},onMotionEnd:function(){O(!1)}}),E.map((function(e){return u.createElement(b,(0,r.Z)({key:e.value,prefixCls:d,className:l()(e.className,"".concat(d,"-item"),(0,o.Z)({},"".concat(d,"-item-selected"),e.value===T&&!A)),checked:e.value===T,onChange:D},e,{disabled:!!_||!!e.disabled}))}))))}));y.displayName="Segmented",y.defaultProps={options:[]};var S=y,C=n(74714),N=n(21631),P=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};var w=u.forwardRef((function(e,t){var n,a=e.prefixCls,s=e.className,c=e.block,d=e.options,m=void 0===d?[]:d,f=e.size,v=void 0===f?"middle":f,p=P(e,["prefixCls","className","block","options","size"]),h=u.useContext(C.E_),_=h.getPrefixCls,j=h.direction,g=_("segmented",a),Z=u.useContext(N.Z),x=v||Z,b=u.useMemo((function(){return m.map((function(e){if(function(e){return"object"===(0,i.Z)(e)&&!!(null===e||void 0===e?void 0:e.icon)}(e)){var t=e.icon,n=e.label,o=P(e,["icon","label"]);return(0,r.Z)((0,r.Z)({},o),{label:u.createElement(u.Fragment,null,u.createElement("span",{className:"".concat(g,"-item-icon")},t),n&&u.createElement("span",null,n))})}return e}))}),[m,g]);return u.createElement(S,(0,r.Z)({},p,{className:l()(s,(n={},(0,o.Z)(n,"".concat(g,"-block"),c),(0,o.Z)(n,"".concat(g,"-sm"),"small"===x),(0,o.Z)(n,"".concat(g,"-lg"),"large"===x),n)),options:b,ref:t,prefixCls:g,direction:j}))}))},59423:function(e,t){t.Z={projects:"styles_projects__DXSQd",project_item:"styles_project_item__Fg99x",project_item_header:"styles_project_item_header__rgB0Z",project_item_header_left:"styles_project_item_header_left__eC+o0",project_item_header_actions:"styles_project_item_header_actions__x75U0",project_item_header_actions_status:"styles_project_item_header_actions_status__qSUHJ",project_item_header_actions_more:"styles_project_item_header_actions_more__iS8gB",project_item_body:"styles_project_item_body__UjzWY",project_item_header_id:"styles_project_item_header_id__kOTR3",project_item_header_priority:"styles_project_item_header_priority__4GX4m",project_item_body_title:"styles_project_item_body_title__2Cw22",project_item_footer:"styles_project_item_footer__yAFlV",project_item_footer_left:"styles_project_item_footer_left__n48Nz",project_item_footer_members:"styles_project_item_footer_members__MdeU-",project_item_footer_members_popover:"styles_project_item_footer_members_popover__9yFQj",project_item_footer_members_popover_item:"styles_project_item_footer_members_popover_item__Iod6B",project_item_footer_members_popover_item_title:"styles_project_item_footer_members_popover_item_title__7zG53",project_item_footer_date:"styles_project_item_footer_date__PAQyw",project_item_footer_date_separator:"styles_project_item_footer_date_separator__JBZQO",project_item_footer_counts:"styles_project_item_footer_counts__72DN7",project_item_footer_counts_files:"styles_project_item_footer_counts_files__UnnHG",project_item_footer_counts_comments:"styles_project_item_footer_counts_comments__z-32X"}}}]);