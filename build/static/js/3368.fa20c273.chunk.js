"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[3368],{87971:function(e,t,n){var i=n(1413),o=n(45987),a=n(47313),r=n(86136),c=n(37388),l=n(67907),d=n(1623),u=n(46417),s=["label","hint","asterisk","helperText","className"],v=r.Z.TextArea,f=(0,a.forwardRef)((function(e,t){var n=e.label,a=e.hint,r=e.asterisk,f=e.helperText,m=e.className,h=(0,o.Z)(e,s);return(0,u.jsxs)(u.Fragment,{children:[n?(0,u.jsxs)("label",{className:d.Z.labelWrap,children:[(0,u.jsx)("span",{children:n}),a?(0,u.jsx)(c.Z,{title:a,children:(0,u.jsx)(l.Z,{})}):null,r?(0,u.jsx)("span",{className:d.Z.asterisk,children:"*"}):null]}):null,(0,u.jsx)(v,(0,i.Z)((0,i.Z)({ref:t},h),{},{className:"".concat(d.Z.inpt," ").concat(m)})),f?(0,u.jsx)("small",{className:d.Z.helperText,children:f}):null]})}));f.defaultProps={autoSize:{minRows:4},placeholder:"Enter text here",asterisk:!1,hint:""},t.Z=f},85860:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var i=n(93433),o=n(4942),a=n(1413),r=n(29439),c=n(47313),l=n(55291),d=n(70638),u=n(54060),s=n(85554),v=n(82626),f=n(18515),m=n(22367),h=n(21600),p=n(31366),Z=n(29079),g=n(25019),b=n(69309),j=n(14254),y=n(3113),x=n(86300),I=n(42623),P=n(87971),N=n(3798),S=n(69591),R=n(40096),w=n(70584),C=n(70816),k=n.n(C),A=n(48897),E=n(72333),F=n(46417),T=function(e){var t=e.openModal,n=e.onCancel,o=e.type,d=e.record,u=e.projectId,s=e.reloadTableData,f=e.permissions,h=f.createTransaction,p=f.updateTransaction,C=R.Z.getLocalAccessToken(),T=g.Z.useForm(),_=(0,r.Z)(T,1)[0],D=(0,c.useMemo)((function(){return new m.e}),[]),M=(0,c.useMemo)((function(){return new S.Q}),[]),L=(0,c.useMemo)((function(){return new x.U}),[]),O=(0,c.useMemo)((function(){return new E.b}),[]),U=(0,Z.K2)({method:function(){return D.getRecordById(d)},initialQuery:{onlyGovernmentFees:!0},condition:"edit"===o&&0!==d}).data,z=(0,c.useState)(""),B=(0,r.Z)(z,2),V=B[0],q=B[1],X=(0,I.N)(V,500),G=(0,c.useState)(""),Q=(0,r.Z)(G,2),Y=Q[0],H=Q[1],W=(0,I.N)(Y,500),K=(0,c.useState)([]),$=(0,r.Z)(K,2),J=$[0],ee=$[1],te=(0,c.useState)([]),ne=(0,r.Z)(te,2),ie=ne[0],oe=ne[1],ae=(0,c.useState)([]),re=(0,r.Z)(ae,2),ce=re[0],le=re[1],de=(0,c.useState)(!1),ue=(0,r.Z)(de,2),se=ue[0],ve=ue[1],fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.ids;M.getAllRecords({title:t,ids:n}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;ee((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.find((function(e){return e.id===t.id})))}));return[].concat((0,i.Z)(e),(0,i.Z)(n))}))})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t)}))},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.id;L.publishedRecords({title:t,id:n,perPage:100}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;oe((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.find((function(e){return e.id===t.id})))}));return[].concat((0,i.Z)(e),(0,i.Z)(n))}))})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t)}))},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clientId,n=e.invoiceNumber,i=e.invoiceId;O.getAllRecords({clientId:t,invoiceNumber:n,id:i}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;le(t)})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t)}))};return(0,c.useEffect)((function(){X&&fe({title:X})}),[X]),(0,c.useEffect)((function(){var e;if(W){var t=_.getFieldValue("projectId"),n=null===J||void 0===J?void 0:J.find((function(e){return e.id===t}));he({invoiceNumber:W,clientId:null===n||void 0===n||null===(e=n.Client)||void 0===e?void 0:e.id})}}),[W]),(0,c.useEffect)((function(){if(U){var e=U.authorityId,t=U.projectId,n=U.invoiceId;t&&fe({ids:[t]}),e&&me({id:e}),n&&he({invoiceId:n})}}),[null===U||void 0===U?void 0:U.projectId,null===U||void 0===U?void 0:U.authorityId]),(0,c.useEffect)((function(){if("edit"===o&&U){var e,t=U.projectId,n=U.authorityId,i=U.transactionDate,a=U.transactionReference,r=U.amount,c=U.status,l=U.title,d=U.remarks;_.setFieldsValue({projectId:t,authorityId:n,title:l,remarks:d,transactionDate:k()(i),transactionReference:a,amount:r,status:c,invoiceId:null===U||void 0===U||null===(e=U.Invoice)||void 0===e?void 0:e.id})}else _.resetFields()}),[o,U]),(0,c.useEffect)((function(){"new"===o&&u&&(fe({ids:[u]}),_.setFieldsValue({projectId:u}))}),[u]),(0,c.useEffect)((function(){me()}),[]),(0,F.jsx)(v.P0,{visible:t,closable:!0,onCancel:n,showFooter:!1,titleText:"edit"===o?"Edit Government Fee":"Add Government Fee",children:(0,F.jsxs)(g.Z,{className:y.Z.form,onFinish:function(e){var t,i,c,u;ve(!0);var v=new FormData,f=null===e||void 0===e||null===(t=e.transactionDate)||void 0===t?void 0:t.toISOString(),m=null===e||void 0===e||null===(i=e.receipt)||void 0===i||null===(c=i.fileList)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.originFileObj,Z=(0,a.Z)((0,a.Z)({},e),{},{transactionDate:f,receipt:m});switch(Object.entries(Z).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];i&&v.append(n,i)})),o){case"new":!0===h?D.createRecord(v).then((function(e){var t;l.ZP.success((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Government fee created successfully"),s(),n()})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t||"Something went wrong, please try again later.")})).finally((function(){ve(!1)})):(ve(!1),l.ZP.error("You don't have permission to create a new record"));break;case"edit":!0===p?D.updateRecord(v,d).then((function(e){s(),n()})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t||"Something went wrong, please try again later.")})).finally((function(){ve(!1)})):l.ZP.error("You don't have permission to update this record");break;default:ve(!1)}},form:_,children:[(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"projectId",rules:[{required:!0,message:"Please select a project"}],children:(0,F.jsx)(v.Ld,{label:"Select Project",notFoundDescription:"No projects found., Please search for projects.",onSearch:function(e){return q(e)},options:null===J||void 0===J?void 0:J.map((function(e){return{label:"".concat(e.referenceNumber," | ").concat(e.title),value:e.id}})),onChange:function(e){var t;_.setFieldsValue({projectId:e,invoiceId:void 0});var n=null===J||void 0===J?void 0:J.find((function(t){return t.id===e}));he({clientId:null===n||void 0===n||null===(t=n.Client)||void 0===t?void 0:t.id})}})})}),(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"invoiceId",help:(0,F.jsx)("small",{children:"If Invoice is attached, then the status is monitored by invoice status in Xero"}),children:(0,F.jsx)(v.Ld,{label:"Select Invoice",asterisk:!1,notFoundDescription:"No invoices found., Please search for invoices.",onSearch:function(e){return H(e)},options:null===ce||void 0===ce?void 0:ce.map((function(e){return{label:e.invoiceNumber,value:e.id}})),onChange:function(e){return _.setFieldsValue({invoiceId:e})}})})}),(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"authorityId",rules:[{required:!0,message:"Please select a authority"}],children:(0,F.jsx)(v.Ld,{label:"Select Authority",notFoundDescription:"No authority found., Please search for authority.",onSearch:function(){},options:null===ie||void 0===ie?void 0:ie.map((function(e){return{label:e.title,value:e.id}})),onChange:function(e){return _.setFieldsValue({authorityId:e})}})})}),(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"title",rules:[{required:!0,message:"Please add a title"}],children:(0,F.jsx)(v.t7,{label:"Title",asterisk:!0,size:"w100"})})}),(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"remarks",children:(0,F.jsx)(P.Z,{label:"Remarks",placeholder:"Add remarks"})})}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("label",{style:{width:"100%"},className:"d-flex flex-column font-size-sm color-dark-main",children:[(0,F.jsxs)("div",{className:"d-flex justify-between",children:["Transaction Date ",(0,F.jsx)("span",{className:"color-red-yp ml-1",children:"*"})]}),(0,F.jsx)(g.Z.Item,{name:"transactionDate",rules:[{required:!0,message:"Please add transaction date"}],children:(0,F.jsx)(b.Z,{style:{width:"100%",border:"2px solid #d9d9d9",borderRadius:"4px"}})})]}),(0,F.jsxs)("label",{style:{width:"100%"},className:"d-flex flex-column font-size-sm color-dark-main",children:[(0,F.jsxs)("div",{className:"d-flex justify-between",children:["Amount ",(0,F.jsx)("span",{className:"color-red-yp ml-1",children:"*"})]}),(0,F.jsx)(g.Z.Item,{name:"amount",rules:[{required:!0,message:"Please add amount"}],children:(0,F.jsx)(j.Z,{placeholder:"Add amount",style:{width:"100%",border:"2px solid #d9d9d9",borderRadius:"4px"}})})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)(g.Z.Item,{name:"transactionReference",children:(0,F.jsx)(v.t7,{label:"Transaction Reference",size:"w100"})}),(0,F.jsx)("div",{children:(0,F.jsx)(g.Z.Item,{name:"status",rules:[{required:!0,message:"Please select a status"}],children:(0,F.jsx)(v.AP,{label:"Status",asterisk:!0,options:null===w.Ug||void 0===w.Ug?void 0:w.Ug.map((function(e){return{label:e.label,value:e.value}}))})})})]}),(0,F.jsx)("div",{children:(0,F.jsx)(v.wA,{name:"receipt",title:"Receipt",listType:"picture-card",defaultFileList:"edit"===o&&(null===U||void 0===U?void 0:U.receipt)&&[{uid:"".concat(null===U||void 0===U?void 0:U.id),name:null===U||void 0===U?void 0:U.receipt,status:"done",url:"".concat(A.Q7).concat(U.receipt,"?authKey=").concat(C)}]||[]})}),(0,F.jsxs)("div",{className:y.Z.footer,children:[(0,F.jsx)(v.op,{size:"normal",fontSize:"sm",onClick:n,type:"plain",children:"Cancel"}),(0,F.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:se,children:"Submit"})]})]})})},_=n(2135),D=n(48297),M=n(98505),L=n(37936),O=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Government Fees"}],U=[{label:"Transaction Date",value:"transactionDate"},{label:"Amount",value:"amount"}],z=[{label:"All",value:"all"},{label:"Sent to client",value:"sent_to_client"},{label:"Pending payment",value:"pending_payment"},{label:"Paid",value:"paid"},{label:"Canceled",value:"canceled"}],B={sent_to_client:[L.LN["Sent to client"]],pending_payment:[L.LN["Pending payment"],L.LN["Sent to client"]],paid:[L.LN.Paid],canceled:[L.LN.Canceled]},V=function(){var e,t,n,g=(0,N.aY)(h.B),b=(0,s.v9)((function(e){return e.usersReducer})).userPermissions,j=b.readTransaction,y=b.createTransaction,P=b.updateTransaction,R=(0,_.lr)(),w=(0,r.Z)(R,2),C=w[0],k=w[1],A=C.get("id"),E=C.get("projectId"),L=C.get("actionType"),V=(0,c.useMemo)((function(){return new m.e}),[]),q=(0,c.useMemo)((function(){return new S.Q}),[]),X=(0,c.useMemo)((function(){return new D.V}),[]),G=(0,c.useMemo)((function(){return new x.U}),[]),Q=(0,Z.$5)({method:V.getAllRecords,initialQuery:{__status:L?void 0:B.pending_payment,projectId:E?Number(E):void 0,onlyGovernmentFees:!0}}),Y=Q.data,H=Q.onRefresh,W=Q.meta,K=Q.loading,$=(0,c.useState)("pending_payment"),J=(0,r.Z)($,2),ee=J[0],te=J[1],ne=(0,c.useState)({type:"new",recordId:0,open:!1}),ie=(0,r.Z)(ne,2),oe=ie[0],ae=ie[1],re=(0,c.useState)({dateRange:[""]}),ce=(0,r.Z)(re,2),le=ce[0],de=ce[1],ue=(0,c.useState)(!1),se=(0,r.Z)(ue,2),ve=se[0],fe=se[1],me=(0,c.useState)(void 0),he=(0,r.Z)(me,2),pe=he[0],Ze=he[1],ge=(0,I.N)(pe,500),be=(0,c.useState)(void 0),je=(0,r.Z)(be,2),ye=je[0],xe=je[1],Ie=(0,I.N)(ye,500),Pe=(0,c.useState)(void 0),Ne=(0,r.Z)(Pe,2),Se=Ne[0],Re=Ne[1],we=(0,I.N)(Se,500),Ce=(0,c.useState)({data:[],loading:!1}),ke=(0,r.Z)(Ce,2),Ae=ke[0],Ee=ke[1],Fe=(0,c.useState)({data:[],loading:!1}),Te=(0,r.Z)(Fe,2),_e=Te[0],De=Te[1],Me=(0,c.useState)({data:[],loading:!1}),Le=(0,r.Z)(Me,2),Oe=Le[0],Ue=Le[1],ze=function(){!1!==y?ae((0,a.Z)((0,a.Z)({},oe),{},{open:!oe.open,type:"new"})):l.ZP.error("You don't have permission to update this record")},Be=function(e){var t=null===e||void 0===e?void 0:e.target,n=t.name,i=t.value;if(("clientId"===n||"authorityId"===n||"projectId"===n)&&!(0,N.hj)(i)){var r="";switch(n){case"clientId":r="Client ID";break;case"authorityId":r="Authority ID";break;case"projectId":r="Project ID"}return l.ZP.error("".concat(r," should be a number"))}de((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,o.Z)({},n,i))}))},Ve=(0,c.useCallback)((function(e,t){e&&(fe(!0),de((0,a.Z)((0,a.Z)({},le),{},(0,o.Z)({},e,t))))}),[le]),qe=(0,c.useCallback)((function(e){var t,n,i=(null===(t=le.dateRange)||void 0===t?void 0:t[0])||"",o=(null===(n=le.dateRange)||void 0===n?void 0:n[1])||"",r=i?(0,M.Ny)(i,"yy-mm-dd"):void 0,c=o?(0,M.Ny)(o,"yy-mm-dd"):void 0,l=(0,a.Z)({__status:le.__status||void 0,fromDate:r,toDate:c,clientId:le.clientId||void 0,projectId:le.projectId||void 0,authorityId:le.authorityId||void 0,transactionReference:le.transactionReference||void 0,sortOrder:le.sortOrder||void 0,sortByField:le.sortByField||void 0},e);H(l)}),[le]),Xe=function(e){var t=e.title,n=e.ids;Ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),q.getAllRecords({title:t,ids:n}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;Ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{data:t,loading:!1})}))})).finally((function(){Ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))}))},Ge=(0,c.useCallback)((function(){Ie&&(De((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),X.findPublished({name:Ie}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;De((function(e){var t=null===n||void 0===n?void 0:n.filter((function(t){var n;return!(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,i.Z)(e.data),(0,i.Z)(t)),loading:!1}}))})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t||"Something went wrong, please try again later."),De((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})))}),[Ie]),Qe=(0,c.useCallback)((function(){we&&(Ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),G.getAllRecords({name:we}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;Ue((function(e){var t=null===n||void 0===n?void 0:n.filter((function(t){var n;return!(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,i.Z)(e.data),(0,i.Z)(t)),loading:!1}}))})).catch((function(e){var t=(0,N.S3)(e);l.ZP.error(t||"Something went wrong, please try again later."),Ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})))}),[we]);return(0,c.useEffect)((function(){ve&&qe();var e=setTimeout((function(){fe(!1)}),2e3);return function(){return clearTimeout(e)}}),[ve,le,qe]),(0,c.useEffect)((function(){ge&&Xe({title:ge})}),[ge]),(0,c.useEffect)((function(){Ge()}),[Ge]),(0,c.useEffect)((function(){Qe()}),[Qe]),(0,c.useEffect)((function(){var e=function(){te("all"),de((function(e){return(0,a.Z)((0,a.Z)({},e),{},{projectId:Number(E)})})),Xe({ids:[Number(E)]})};switch(L){case"create":E&&(e(),ae((0,a.Z)((0,a.Z)({},oe),{},{open:!0,type:"new",projectId:Number(E)})),(0,N.nA)(["actionType","projectId"],k));break;case"edit":A&&E&&(e(),ae((0,a.Z)((0,a.Z)({},oe),{},{open:!0,type:"edit",recordId:Number(A),projectId:Number(E)})),(0,N.nA)(["actionType","id","projectId"],k));break;case"view":A&&E&&(e(),(0,N.nA)(["actionType","id","projectId"],k))}}),[L,E,A]),(0,F.jsxs)(u.Z,{permissionSlug:g,children:[(0,F.jsx)(v.mr,{heading:"Government Fees",buttonText:"Add Government Fee",onButtonClick:ze,breadCrumbData:O,showAdd:!!y,filters:j?(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{overflow:"auto"},children:(0,F.jsx)(d.Z,{size:"middle",style:{fontSize:"var(--font-size-sm)"},options:z.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{title:e.label,value:e.value})})),value:ee,onChange:function(e){if("all"===e)Ve("__status",""),de((function(e){return(0,a.Z)((0,a.Z)({},e),{},{__status:[]})}));else{var t=e;qe({__status:B[t]}),de((function(e){return(0,a.Z)((0,a.Z)({},e),{},{__status:B[t]})}))}te(e)}})}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){return de((function(t){return(0,a.Z)((0,a.Z)({},t),{},{dateRange:e})}))},onReset:function(){return Ve("dateRange",[])},onUpdate:qe})}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Xy,{type:"radio",label:"Project",name:"projectId",withSearch:!0,options:null===Ae||void 0===Ae||null===(e=Ae.data)||void 0===e?void 0:e.map((function(e){return{label:"".concat(e.referenceNumber," | ").concat(e.title),value:"".concat(e.id)}})),onChange:Be,value:Number(null===le||void 0===le?void 0:le.projectId)>0?String(null===le||void 0===le?void 0:le.projectId):"",onReset:function(){Ve("projectId",0),Ze("")},onUpdate:qe,loading:null===Ae||void 0===Ae?void 0:Ae.loading,searchTerm:pe||"",onSearch:function(e){return Ze(e.currentTarget.value)},defaultValue:Number(null===le||void 0===le?void 0:le.projectId)>0?String(null===le||void 0===le?void 0:le.projectId):""})}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Xy,{type:"radio",label:"Client",name:"clientId",withSearch:!0,options:null===_e||void 0===_e||null===(t=_e.data)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:"".concat(e.id)}})),onChange:Be,value:Number(null===le||void 0===le?void 0:le.clientId)>0?String(null===le||void 0===le?void 0:le.clientId):"",onReset:function(){Ve("clientId",0),xe("")},onUpdate:qe,loading:null===_e||void 0===_e?void 0:_e.loading,searchTerm:ye||"",onSearch:function(e){return xe(e.currentTarget.value)}})}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Xy,{type:"radio",label:"Authority",name:"authorityId",withSearch:!0,options:null===Oe||void 0===Oe||null===(n=Oe.data)||void 0===n?void 0:n.map((function(e){return{label:e.title,value:"".concat(e.id)}})),onChange:Be,value:Number(null===le||void 0===le?void 0:le.authorityId)>0?String(null===le||void 0===le?void 0:le.authorityId):"",onReset:function(){Ve("authorityId",0),Re("")},onUpdate:qe,loading:null===Oe||void 0===Oe?void 0:Oe.loading,searchTerm:Se||"",onSearch:function(e){return Re(e.currentTarget.value)}})}),(0,F.jsx)("div",{children:(0,F.jsx)(v.Xy,{type:"input",label:"Reference",name:"transactionReference",value:null===le||void 0===le?void 0:le.transactionReference,onChange:Be,onReset:function(){return Ve("transactionReference","")},onUpdate:qe})}),(0,F.jsx)("div",{style:{marginLeft:"auto",marginRight:"0px"},children:(0,F.jsx)(v.Xy,{type:"radio",label:"Sort By",name:"sortByField",options:U,value:null===le||void 0===le?void 0:le.sortByField,onChange:Be,onReset:function(){return Ve("sortByField","")},onUpdate:qe,withSort:!0})})]}):null}),!0===j&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p.Z,{tableData:Y,tableLoading:K,onEditIconClick:function(e){!1!==P?ae((0,a.Z)((0,a.Z)({},oe),{},{open:!oe.open,type:"edit",recordId:e.id})):l.ZP.error("You don't have permission to update this record")},reloadTableData:H,permissions:b}),(0,F.jsx)(v.tl,{total:null===W||void 0===W?void 0:W.total,current:null===W||void 0===W?void 0:W.page,defaultPageSize:null!==W&&void 0!==W&&W.perPage?null===W||void 0===W?void 0:W.perPage:10,pageSizeOptions:[10,20,50,100],onChange:function(e,t){return qe({page:e,perPage:t})}})]}),!1===j&&(0,F.jsx)(f.a$,{mainMessage:"You don't have permission to view this data"}),oe.open&&(0,F.jsx)(T,{type:oe.type,openModal:oe.open,record:oe.recordId,projectId:oe.projectId,onCancel:ze,reloadTableData:function(){return qe()},permissions:b})]})}},86300:function(e,t,n){n.d(t,{U:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="authorities",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.publishedRecords=function(e){return a.Z.get("".concat(t.endPoint,"/find-published"),{params:e})},this.getRecordById=function(e){return a.Z.get(a._+t.endPoint+"/"+e)},this.deleteRecord=function(e){return a.Z.delete(a._+t.endPoint+"/"+e)},this.createRecord=function(e){return a.Z.post(a._+t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch(a._+t.endPoint+"/"+n,e)}}))},48297:function(e,t,n){n.d(t,{V:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="client",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.findPublished=function(e){return a.Z.get("".concat(t.endPoint,"/find-published"),{params:e})},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},72333:function(e,t,n){n.d(t,{b:function(){return c}});var i=n(43144),o=n(15671),a=n(49075),r=n(3135),c=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="invoice",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/findOne/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e,{headers:r.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/updateOne/").concat(n),e,{headers:r.C})},this.submitInvoice=function(e){return a.Z.patch("".concat(t.endPoint,"/submitInvoice/").concat(e))},this.changeStatus=function(e,n){return console.log(n),a.Z.patch("".concat(t.endPoint,"/changeStatus/").concat(e),n)},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/remove/").concat(e))},this.markAsSent=function(e){return a.Z.patch("".concat(t.endPoint,"/markAsSent/").concat(e))},this.prepareUniqueInvoiceNumber=function(){return a.Z.get("".concat(t.endPoint,"/prepareUniqueInvoiceNumber"))},this.checkForDuplicacy=function(e){return a.Z.get("".concat(t.endPoint,"/checkForDuplicacy"),{params:e})},this.quickUpdate=function(e,n){return a.Z.patch("".concat(t.endPoint,"/quickUpdate/").concat(e),n)},this.addNote=function(e,n){return a.Z.post("".concat(t.endPoint,"/addNote/").concat(e),n)},this.getNoteById=function(e){return a.Z.get("".concat(t.endPoint,"/notes/").concat(e))},this.removeNote=function(e){return a.Z.delete("".concat(t.endPoint,"/removeNote/").concat(e))},this.getLogsById=function(e,n){return a.Z.get("".concat(t.endPoint,"/logs/").concat(e),{params:n})},this.markConcernAsResolved=function(e){return a.Z.patch("".concat(t.endPoint,"/markConcernAsResolved/").concat(e))},this.getCounts=function(){return a.Z.get("".concat(t.endPoint,"/getCounts"))}}))},70584:function(e,t,n){n.d(t,{HH:function(){return c},JY:function(){return r},Ug:function(){return l},hx:function(){return a},vA:function(){return u},xy:function(){return d}});var i=n(29439),o=n(37936),a=function(e){return Object.entries(e).filter((function(e){var t=(0,i.Z)(e,1)[0];return isNaN(Number(t))})).map((function(e){var t=(0,i.Z)(e,2);return{label:t[0],value:t[1]}}))},r=a(o.dq),c=a(o.B1),l=a(o.LN),d=a(o.PH),u=a(o.fk)},70638:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(4942),o=n(87462),a=n(71002),r=n(46123),c=n.n(r),l=n(29439),d=n(45987),u=n(1413),s=n(47313),v=n(10288),f=n(16945),m=n(205),h=n(25266),p=n(72846),Z=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},g=function(e){return void 0!==e?"".concat(e,"px"):void 0};function b(e){var t=e.prefixCls,n=e.containerRef,i=e.value,o=e.getValueIndex,a=e.motionName,r=e.onMotionStart,d=e.onMotionEnd,v=e.direction,m=s.useRef(null),b=s.useState(i),j=(0,l.Z)(b,2),y=j[0],x=j[1],I=function(e){var i,a=o(e),r=null===(i=n.current)||void 0===i?void 0:i.querySelectorAll(".".concat(t,"-item"))[a];return(null===r||void 0===r?void 0:r.offsetParent)&&r},P=s.useState(null),N=(0,l.Z)(P,2),S=N[0],R=N[1],w=s.useState(null),C=(0,l.Z)(w,2),k=C[0],A=C[1];(0,p.Z)((function(){if(y!==i){var e=I(y),t=I(i),n=Z(e),o=Z(t);x(i),R(n),A(o),e&&t?r():d()}}),[i]);var E=s.useMemo((function(){return g("rtl"===v?-(null===S||void 0===S?void 0:S.right):null===S||void 0===S?void 0:S.left)}),[v,S]),F=s.useMemo((function(){return g("rtl"===v?-(null===k||void 0===k?void 0:k.right):null===k||void 0===k?void 0:k.left)}),[v,k]);return S&&k?s.createElement(h.ZP,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onAppearEnd:function(){R(null),A(null),d()}},(function(e,n){var i=e.className,o=e.style,a=(0,u.Z)((0,u.Z)({},o),{},{"--thumb-start-left":E,"--thumb-start-width":g(null===S||void 0===S?void 0:S.width),"--thumb-active-left":F,"--thumb-active-width":g(null===k||void 0===k?void 0:k.width)}),r={ref:(0,f.sQ)(m,n),style:a,className:c()("".concat(t,"-thumb"),i)};return s.createElement("div",r)})):null}var j=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function y(e){return e.map((function(e){if("object"===(0,a.Z)(e)&&null!==e){var t=function(e){return"undefined"!==typeof e.title?e.title:"object"!==(0,a.Z)(e.label)?null===(t=e.label)||void 0===t?void 0:t.toString():void 0;var t}(e);return(0,u.Z)((0,u.Z)({},e),{},{title:t})}return{label:null===e||void 0===e?void 0:e.toString(),title:null===e||void 0===e?void 0:e.toString(),value:e}}))}var x=function(e){var t=e.prefixCls,n=e.className,o=e.disabled,a=e.checked,r=e.label,l=e.title,d=e.value,u=e.onChange;return s.createElement("label",{className:c()(n,(0,i.Z)({},"".concat(t,"-item-disabled"),o))},s.createElement("input",{className:"".concat(t,"-item-input"),type:"radio",disabled:o,checked:a,onChange:function(e){o||u(e,d)}}),s.createElement("div",{className:"".concat(t,"-item-label"),title:l},r))},I=s.forwardRef((function(e,t){var n,a,r=e.prefixCls,u=void 0===r?"rc-segmented":r,h=e.direction,p=e.options,Z=e.disabled,g=e.defaultValue,I=e.value,P=e.onChange,N=e.className,S=void 0===N?"":N,R=e.motionName,w=void 0===R?"thumb-motion":R,C=(0,d.Z)(e,j),k=s.useRef(null),A=s.useMemo((function(){return(0,f.sQ)(k,t)}),[k,t]),E=s.useMemo((function(){return y(p)}),[p]),F=(0,v.Z)(null===(n=E[0])||void 0===n?void 0:n.value,{value:I,defaultValue:g}),T=(0,l.Z)(F,2),_=T[0],D=T[1],M=s.useState(!1),L=(0,l.Z)(M,2),O=L[0],U=L[1],z=function(e,t){Z||(D(t),null===P||void 0===P||P(t))},B=(0,m.Z)(C,["children"]);return s.createElement("div",(0,o.Z)({},B,{className:c()(u,(a={},(0,i.Z)(a,"".concat(u,"-rtl"),"rtl"===h),(0,i.Z)(a,"".concat(u,"-disabled"),Z),a),S),ref:A}),s.createElement("div",{className:"".concat(u,"-group")},s.createElement(b,{prefixCls:u,value:_,containerRef:k,motionName:"".concat(u,"-").concat(w),direction:h,getValueIndex:function(e){return E.findIndex((function(t){return t.value===e}))},onMotionStart:function(){U(!0)},onMotionEnd:function(){U(!1)}}),E.map((function(e){return s.createElement(x,(0,o.Z)({key:e.value,prefixCls:u,className:c()(e.className,"".concat(u,"-item"),(0,i.Z)({},"".concat(u,"-item-selected"),e.value===_&&!O)),checked:e.value===_,onChange:z},e,{disabled:!!Z||!!e.disabled}))}))))}));I.displayName="Segmented",I.defaultProps={options:[]};var P=I,N=n(74714),S=n(21631),R=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};var w=s.forwardRef((function(e,t){var n,r=e.prefixCls,l=e.className,d=e.block,u=e.options,v=void 0===u?[]:u,f=e.size,m=void 0===f?"middle":f,h=R(e,["prefixCls","className","block","options","size"]),p=s.useContext(N.E_),Z=p.getPrefixCls,g=p.direction,b=Z("segmented",r),j=s.useContext(S.Z),y=m||j,x=s.useMemo((function(){return v.map((function(e){if(function(e){return"object"===(0,a.Z)(e)&&!!(null===e||void 0===e?void 0:e.icon)}(e)){var t=e.icon,n=e.label,i=R(e,["icon","label"]);return(0,o.Z)((0,o.Z)({},i),{label:s.createElement(s.Fragment,null,s.createElement("span",{className:"".concat(b,"-item-icon")},t),n&&s.createElement("span",null,n))})}return e}))}),[v,b]);return s.createElement(P,(0,o.Z)({},h,{className:c()(l,(n={},(0,i.Z)(n,"".concat(b,"-block"),d),(0,i.Z)(n,"".concat(b,"-sm"),"small"===y),(0,i.Z)(n,"".concat(b,"-lg"),"large"===y),n)),options:x,ref:t,prefixCls:b,direction:g}))}))}}]);