"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[6170],{66170:function(e,s,n){n.r(s),n.d(s,{default:function(){return U}});var t=n(29439),r=n(47313),a=n(47312),i=n(2135),o=n(84825),l=n(54060),c=n(46417),d=function(e){var s=e.children,n=e.className;e.permissionSlug;return(0,c.jsx)(l.Z,{adminNav:!0,className:n,profileNav:!0,children:s})},u=n(16284),p=n(25019),m=n(55291),f=n(93709),h=n(28080),v=n(86136),Z=n(82626),x=n(3113),j=function(e){var s=e.defaultData,n=e.reload,a=e.drawer,i=p.Z.useForm(),l=(0,t.Z)(i,1)[0],d=(0,r.useState)(!1),j=(0,t.Z)(d,2),g=j[0],y=j[1],_=(0,r.useMemo)((function(){return new o.z}),[]),b=(0,r.useCallback)((function(){Object.keys(s).length>0&&l.setFieldsValue({firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone})}),[s,l]);return(0,r.useEffect)((function(){b()}),[b]),(0,c.jsxs)("div",{children:[!a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f.Z,{message:"Your admin now manages your account. Contact your admin to change your account details.",description:(0,c.jsx)("a",{href:"/",children:"Learn more about managed accounts"}),type:"info",showIcon:!0,closable:!0,className:u.Z.alert}),(0,c.jsxs)("div",{children:[(0,c.jsx)(Z.ZT,{color:"dark-main",size:"lg",className:"my-5",children:"Profile and Visibility"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"mb-2",children:"Manage your personal information, and control which information other people see and apps may access."}),(0,c.jsx)("a",{href:"/",children:"Learn more about your profile and visibility or view our privacy policy."})]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(Z.ZT,{color:"dark-main",size:"lg",className:"".concat(!a&&"mt-5"),children:"About You"}),(0,c.jsx)(h.Z,{className:"rounded-5 mt-4 pa-5",children:(0,c.jsxs)(p.Z,{className:x.Z.form,onFinish:function(e){delete e.email,y(!0),_.updateRecord(e,s.id).then((function(e){var s;m.ZP.success(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message),y(!1),n&&n()})).catch((function(e){var s,n;m.ZP.error(null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message),y(!1)}))},form:l,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(p.Z.Item,{name:"firstName",rules:[{required:!0,message:"Please enter first name"}],children:(0,c.jsx)(Z.t7,{size:"w100",label:"First Name",placeHolder:"Enter first name",asterisk:!0,type:"text",defaultValue:s.firstName})}),(0,c.jsx)(p.Z.Item,{name:"lastName",rules:[{required:!0,message:"Please enter last name"}],children:(0,c.jsx)(Z.t7,{size:"w100",label:"Last Name",placeHolder:"Enter last name",asterisk:!0,type:"text",defaultValue:s.lastName})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(p.Z.Item,{name:"phone",rules:[{required:!0,message:"Please enter phone number"}],children:(0,c.jsxs)("label",{className:"color-dark-main font-size-sm",children:["Phone",(0,c.jsx)("span",{className:"color-red-yp ml-1",children:"*"}),(0,c.jsx)(v.Z,{type:"tel",placeholder:"Enter your phone number",addonBefore:"\ud83c\udde6\ud83c\uddea +971",defaultValue:s.phone})]})}),(0,c.jsx)(p.Z.Item,{name:"whatsapp",rules:[{required:!0,message:"Please enter whatsapp number"}],children:(0,c.jsxs)("label",{className:"color-dark-main font-size-sm",children:["WhatsApp",(0,c.jsx)("span",{className:"color-red-yp ml-1",children:"*"}),(0,c.jsx)(v.Z,{type:"tel",placeholder:"Enter your whatsapp number",addonBefore:"\ud83c\udde6\ud83c\uddea +971"})]})})]}),(0,c.jsx)("div",{children:(0,c.jsx)(p.Z.Item,{name:"email",children:(0,c.jsx)(Z.t7,{size:"w100",label:"Email",placeHolder:"Enter email",asterisk:!0,type:"email",defaultValue:s.email,disabled:!0})})}),(0,c.jsx)("div",{className:"d-flex justify-end",children:(0,c.jsx)(Z.op,{type:"primary",size:"sm",htmlType:"submit",loading:g,children:"Save"})})]})})]})]})},g=n(1413),y=n(74165),_=n(15861),b=n(46155),N=n(77278),w=n(78267),P=n(8773),S=n(28770),k=n(48897),A=n(49075),C=n(85554),W=n(45020),T=function(e){e.defaultData;var s,n,a=(0,r.useState)(!1),i=(0,t.Z)(a,2),o=i[0],l=i[1],d=(0,r.useState)(!1),p=(0,t.Z)(d,2),f=p[0],v=p[1],x=(0,r.useState)([]),j=(0,t.Z)(x,2),T=j[0],E=j[1],z=(0,C.I0)(),I=(0,C.v9)((function(e){return e.usersReducer})).loggedInUserData,D=null===I||void 0===I?void 0:I.data,U="".concat(null===D||void 0===D?void 0:D.firstName," ").concat(null===D||void 0===D?void 0:D.lastName),F=(null===D||void 0===D||null===(s=D.firstName)||void 0===s?void 0:s.charAt(0))+(null===D||void 0===D||null===(n=D.lastName)||void 0===n?void 0:n.charAt(0)),L=null===D||void 0===D?void 0:D.profile,R=function(e){return v(e)},M=function(){var e=(0,_.Z)((0,y.Z)().mark((function e(s){var n,t,r,a,i,o,l,c;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.onSuccess,t=s.onError,r=s.file,a=new FormData,i={headers:{"content-type":"multipart/form-data"}},a.append("profile",r),e.prev=4,e.next=7,A.Z.patch("user/update-me",a,i);case 7:return l=e.sent,e.next=10,null===(o=l.data)||void 0===o?void 0:o.data;case 10:c=e.sent,n("ok"),c&&(m.ZP.success("Profile picture updated successfully"),z((0,W.r)({reload:!0})),E([])),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t({err:e.t0});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(s){return e.apply(this,arguments)}}(),V={beforeUpload:function(e){var s="image/png"===e.type,n="image/jpeg"===e.type||"image/jpg"===e.type;return s||n||m.ZP.error("You can only upload PNG or JPG file!"),s||n},onChange:function(e){"done"===e.file.status&&E(e.fileList)},name:"profile",multiple:!1,maxCount:1,customRequest:M,fileList:T},q=(0,c.jsx)(h.Z,{className:u.Z.overlay,children:(0,c.jsxs)("div",{className:u.Z.overlay_content,children:[(0,c.jsx)("button",{className:u.Z.overlay_content_btn,onClick:function(){R(!1),l(!0)},children:"View Photo"}),(0,c.jsx)(b.Z,{className:"my-0"}),(0,c.jsx)(N.Z,(0,g.Z)((0,g.Z)({},V),{},{children:(0,c.jsx)("button",{className:u.Z.overlay_content_btn,onClick:function(){return R(!1)},children:"Upload a photo"})}))]})});return(0,c.jsx)("div",{className:u.Z.profile,children:(0,c.jsxs)(h.Z,{className:"rounded-5",children:[(0,c.jsxs)("div",{className:u.Z.profile_header,children:[(0,c.jsx)(w.Z,{trigger:["click"],dropdownRender:function(){return q},placement:"bottom",arrow:{pointAtCenter:!0},onOpenChange:R,open:f,children:(0,c.jsx)(P.C,{size:80,src:L?"".concat(k.lj).concat(L):"",alt:U,className:"d-flex mx-auto",children:F||"Loading..."})}),(0,c.jsx)(S.Z,{title:U,visible:o,onCancel:function(){return l(!1)},footer:null,children:(0,c.jsx)("img",{src:L?"".concat(k.lj).concat(L):"",alt:U,className:u.Z.profile_viewer})}),(0,c.jsx)(Z.ZT,{color:"dark-main",className:"text-center mt-2",children:null!==D&&void 0!==D&&D.firstName?U:""})]}),(0,c.jsx)("div",{className:"ma-3",children:(0,c.jsx)(Z.ZT,{color:"dark-main",className:"text-center",children:"Profile Completeness"})}),(0,c.jsx)(b.Z,{className:"mt-0"}),(0,c.jsx)("div",{className:"ma-3"})]})})},E=function(e){var s=e.defaultData,n=e.reload,t=e.drawer;return(0,c.jsxs)("div",{className:u.Z.AccountSettingsWrapper,children:[(0,c.jsxs)("div",{className:u.Z.AccountSettingsWrapper_item1,children:[(0,c.jsx)("div",{children:(0,c.jsx)(j,{defaultData:s,reload:n,loading:!s,drawer:t})}),(0,c.jsx)("div",{className:"mt-10"})]}),(0,c.jsx)("div",{className:u.Z.AccountSettingsWrapper_item2,children:(0,c.jsx)(T,{defaultData:s,drawer:t})})]})},z=n(20897),I=n(83690),D=n(40096),U=function(){var e=(0,r.useMemo)((function(){return new o.z}),[]),s=D.Z.getUserData(),n=(0,r.useState)(),l=(0,t.Z)(n,2),u=l[0],p=l[1],m=(0,i.lr)(),f=(0,t.Z)(m,1)[0].get("tab");"profile"===f&&(window.location.href="/employees/"+s.id);var h=(0,r.useCallback)((function(){e.getUserProfileScores().then((function(e){p(null===e||void 0===e?void 0:e.data)})).catch((function(e){var s;console.error(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data),p(void 0)}))}),[e]);return(0,r.useEffect)((function(){h()}),[h]),(0,c.jsxs)(d,{children:["security"===f&&(0,c.jsx)(z.Z,{}),"manage_notifications"===f&&(0,c.jsx)(I.Z,{}),("profile"===f||null===f)&&(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)(E,{defaultData:null===u||void 0===u?void 0:u.data,reload:h}):(0,c.jsx)(a.Z,{active:!0})})]})}},83690:function(e,s,n){n.d(s,{Z:function(){return Z}});var t=n(4942),r=n(29439),a=n(47313),i=n(55291),o=n(47312),l=n(39180),c=n(16284),d=n(43144),u=n(15671),p=n(49075),m=(0,d.Z)((function e(){var s=this;(0,u.Z)(this,e),this.endPoint="user-alerts-setting",this.getAlertsSettings=function(e){return p.Z.get("".concat(s.endPoint,"/").concat(e))},this.getAlertsSettingsBySlug=function(e){return p.Z.get("".concat(s.endPoint,"/find-user-alert-by-slug/").concat(e))},this.subscribeAlertsUnsubscribe=function(e){return p.Z.post("".concat(s.endPoint,"/subscribe-unsubscribe"),e)},this.unsubscribeAlertsAll=function(){return p.Z.patch("".concat(s.endPoint,"/unsubscribe-all"))}})),f=n(53119),h=n(37936),v=n(46417),Z=function(){var e=(0,a.useState)(!1),s=(0,r.Z)(e,2),n=s[0],d=s[1],u=(0,a.useMemo)((function(){return new f.b}),[]),p=(0,a.useMemo)((function(){return new m}),[]),Z=(0,a.useState)([]),x=(0,r.Z)(Z,2),j=x[0],g=x[1],y=(0,a.useCallback)((function(){d(!0),u.getPublishedAlerts().then((function(e){var s;g(null===(s=e.data)||void 0===s?void 0:s.data),d(!1)})).catch((function(e){var s;console.error(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data),g([]),d(!1)}))}),[u]);(0,a.useEffect)((function(){y()}),[]);var _=function(e,s){return 0===e.length?h._v[s.type]:e[0][s.type]};return(0,v.jsxs)("section",{className:c.Z.manageNotificationsWrap,children:[(0,v.jsxs)("div",{className:c.Z.heading,children:[(0,v.jsx)("p",{className:c.Z.title,children:"Manage Subscription"}),(0,v.jsx)("p",{onClick:function(){p.unsubscribeAlertsAll().then((function(e){i.ZP.success(e.data.message),y()})).catch((function(e){var s,n;i.ZP.error(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)}))},className:c.Z.unsubscribe,children:"Unsubscribe All"})]}),n?(0,v.jsx)(o.Z,{active:!0}):(0,v.jsx)("div",{className:c.Z.subscriptionsTypeWrap,children:null===j||void 0===j?void 0:j.map((function(e,s){return(0,v.jsxs)("div",{className:c.Z.subscriptionType,children:[(0,v.jsx)("p",{style:{margin:0},children:null===e||void 0===e?void 0:e.title}),(0,v.jsx)("p",{className:c.Z.description,children:null===e||void 0===e?void 0:e.description}),(0,v.jsx)("div",{className:c.Z.subscriptionsWrap,children:h.di.map((function(s,n){return(0,v.jsxs)("div",{className:c.Z.subscription,children:[(0,v.jsxs)("div",{className:c.Z.textWrap,children:[(0,v.jsx)("p",{className:c.Z.subscriptionTitle,children:s.title}),(0,v.jsx)("p",{className:c.Z.subscriptionDescription,children:s.description})]}),(0,v.jsx)("div",{className:"manageNotificationOverrides",children:(0,v.jsx)(l.ZP.Group,{options:[{label:"Off",value:!1},{label:"On",value:!0}],onChange:function(n){return function(e,s,n){var r=e.target.value;p.subscribeAlertsUnsubscribe((0,t.Z)({alertsTypeId:n},s.type,r)).then((function(e){i.ZP.success(e.data.message)})).catch((function(e){var s,n;i.ZP.error(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)}))}(n,s,e.id)},defaultValue:_(e.UserAlertsSetting,s),optionType:"button",buttonStyle:"solid"})})]},n)}))})]},s)}))})]})}},20897:function(e,s,n){var t=n(1413),r=n(29439),a=n(25019),i=n(55291),o=n(28080),l=n(47313),c=n(69686),d=n(82626),u=n(16284),p=n(46417);s.Z=function(){var e=a.Z.useForm(),s=(0,r.Z)(e,1)[0],n=(0,l.useState)({newPassword:"",confirmNewPassword:"",error:"",loading:!1}),m=(0,r.Z)(n,2),f=m[0],h=m[1],v=(0,l.useMemo)((function(){return new c.n}),[]);return(0,p.jsx)("div",{children:(0,p.jsxs)(o.Z,{className:u.Z.AccountSettingsSecurity,children:[(0,p.jsx)(d.ZT,{color:"dark-main",size:"md",className:"mb-5",children:"Change Your Password"}),(0,p.jsxs)(a.Z,{className:u.Z.form,onFinish:function(e){if(h((0,t.Z)((0,t.Z)({},f),{},{loading:!0})),e.newPassword===e.confirmNewPassword){var s={password:e.currentPassword,newPassword:e.newPassword};v.changePassword(s).then((function(e){var s;i.ZP.success(null===(s=e.data)||void 0===s?void 0:s.message),h((0,t.Z)((0,t.Z)({},f),{},{loading:!1,error:""}))})).catch((function(e){var s,n,r=null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message;h((0,t.Z)((0,t.Z)({},f),{},{error:r,loading:!1}))}))}else h((0,t.Z)((0,t.Z)({},f),{},{error:"Passwords do not match",loading:!1}))},form:s,children:[f.error&&(0,p.jsx)(d.EQ,{description:f.error,isClosable:!0,onClose:function(){h((0,t.Z)((0,t.Z)({},f),{},{error:""}))}}),(0,p.jsx)("div",{children:(0,p.jsx)(a.Z.Item,{name:"currentPassword",rules:[{required:!0,message:"Please enter current password"}],children:(0,p.jsx)(d.t7,{size:"w100",label:"Current Password",placeHolder:"Enter current password",asterisk:!0,type:"password",className:"w-100"})})}),(0,p.jsx)("div",{children:(0,p.jsx)(a.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please enter new password"}],children:(0,p.jsx)(d.t7,{size:"w100",label:"Enter New Password",placeHolder:"Enter new password",asterisk:!0,type:"password"})})}),(0,p.jsx)("div",{children:(0,p.jsx)(a.Z.Item,{name:"confirmNewPassword",rules:[{required:!0,message:"Please confirm new password"}],children:(0,p.jsx)(d.t7,{size:"w100",label:"Confirm New Password",placeHolder:"Confirm new password",asterisk:!0,type:"password"})})}),(0,p.jsx)("div",{className:"d-flex justify-end",children:(0,p.jsx)(d.op,{type:"primary",htmlType:"submit",loading:f.loading,children:"Save Changes"})})]})]})})}},53119:function(e,s,n){n.d(s,{b:function(){return i}});var t=n(43144),r=n(15671),a=n(49075),i=(0,t.Z)((function e(){var s=this;(0,r.Z)(this,e),this.endPoint="alerts-type",this.getAllRecords=function(){return a.Z.get("".concat(s.endPoint))},this.getPublishedAlerts=function(){return a.Z.get("".concat(s.endPoint,"/find-published"))},this.getRecordById=function(e){return a.Z.get("".concat(s.endPoint,"/").concat(e))},this.getRecordBySlug=function(e){return a.Z.get("".concat(s.endPoint,"/find-by-slug/").concat(e))},this.createRecord=function(e){return a.Z.post(s.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(s.endPoint,"/").concat(n),e)},this.deleteRecord=function(e){return a.Z.delete("".concat(s.endPoint,"/").concat(e))}}))},16284:function(e,s){s.Z={alert:"styles_alert__Wkatv",AccountSettingsWrapper:"styles_AccountSettingsWrapper__LgPiI",orgWrapper:"styles_orgWrapper__yARhM",AccountSettingsWrapper_item2:"styles_AccountSettingsWrapper_item2__BafyP",AccountSettingsSecurity:"styles_AccountSettingsSecurity__hx-kc",profile:"styles_profile__D6Lsk",profile_header:"styles_profile_header__i3FmG",profile_viewer:"styles_profile_viewer__BlopE",addSocialLinkWrap:"styles_addSocialLinkWrap__PQJOJ",addSocialLink:"styles_addSocialLink__P+0X5",overlay:"styles_overlay__Fhfsl",overlay_content:"styles_overlay_content__-MULA",overlay_content_btn:"styles_overlay_content_btn__Vj9Zs",manageNotificationsWrap:"styles_manageNotificationsWrap__Ug25U",heading:"styles_heading__DznYn",title:"styles_title__c6S5k",unsubscribe:"styles_unsubscribe__KE87S",subscriptionsTypeWrap:"styles_subscriptionsTypeWrap__Oa00S",subscriptionType:"styles_subscriptionType__vXU-i",description:"styles_description__OumRM",subscriptionsWrap:"styles_subscriptionsWrap__0KZiU",subscription:"styles_subscription__aG10F",textWrap:"styles_textWrap__BvZ1V",subscriptionTitle:"styles_subscriptionTitle__3nf8k",subscriptionDescription:"styles_subscriptionDescription__MhET+",closeIcon:"styles_closeIcon__FCCk5"}}}]);