(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[7951],{9057:function(e,s,t){"use strict";t.d(s,{Q:function(){return w}});var n=t(29439),i=t(8570),l=t(25019),a=t(55291),o=t(97258),d=t(21680),r=t(39180),c=t(82626),u={drawerContainer:"styles_drawerContainer__c8B7O",attachmentsWrap:"styles_attachmentsWrap__fu2-y",attachment:"styles_attachment__ubXr2",amountWrap:"styles_amountWrap__f8grr",priceText:"styles_priceText__hKO43",resourceWrap:"styles_resourceWrap__R4dP5",hrWrap:"styles_hrWrap__2ExJF",title:"styles_title__kOoWg",hrInputs:"styles_hrInputs__CxvM8",dateWrap:"styles_dateWrap__YKgyU",fromDate:"styles_fromDate__fmncu",bold:"styles_bold__m4yDK",footerWrap:"styles_footerWrap__fvpT1",buttonWrap:"styles_buttonWrap__ruQnS",financeWrap:"styles_financeWrap__U339I",actionsWrap:"styles_actionsWrap__N9rYg",commentWrap:"styles_commentWrap__nVG2S"},m=t(37936),v=t(47313),h=t(29079),p=t(98505),y=t(95980),f=t(49075),_=t(51534),j=t(82334),x=t(48694),N=t(40096),b=t(84825),g=t(3798),Z=t(48897),W=t(70816),z=t.n(W),R=t(46417),A=i.Z.Text,w=function(e){var s,t,i,W,w,C,T,M,P,S,q=e.openDrawer,B=e.onClose,L=e.record,D=e.permissions,I=e.reloadTableData;_.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(_.version,"/pdf.worker.js");var k=N.Z.getLocalAccessToken(),F=(0,v.useState)(),E=(0,n.Z)(F,2),O=E[0],H=E[1],K=D.readLeaveRequest,G=D.leaveRequestHRApproval,U=D.leaveRequestProjectManagerApproval,Y=(0,v.useState)(),J=(0,n.Z)(Y,2),Q=(J[0],J[1]),V=l.Z.useForm(),X=(0,n.Z)(V,1)[0],$=(0,v.useState)(!1),ee=(0,n.Z)($,2),se=ee[0],te=ee[1],ne=new y.c,ie=new b.z,le=(0,h.$5)({method:function(){return ne.getRecordById(L)}}),ae=le.data,oe=le.onRefresh;(0,v.useEffect)((function(){0===(null===ae||void 0===ae?void 0:ae.AdminActions.length)&&1===ae.status?H("employee"):0===(null===ae||void 0===ae?void 0:ae.AdminActions.length)?H("manager"):1===Number(null===ae||void 0===ae?void 0:ae.AdminActions.length)?H("hr"):2===(null===ae||void 0===ae?void 0:ae.AdminActions.length)&&6===ae.status?H("rejectedByHr"):Number(null===ae||void 0===ae?void 0:ae.AdminActions.length)>=1&&H("done"),null!==ae&&void 0!==ae&&ae.requestById&&ie.getRecordById(null===ae||void 0===ae?void 0:ae.requestById).then((function(e){Q(e.data.data)}))}),[ae]);return(0,R.jsx)("section",{className:u.container,children:(0,R.jsx)(o.Z,{title:(0,R.jsxs)("div",{className:"d-flex align-center justify-space-between",children:[(0,R.jsxs)("div",{children:["LVE-",null===ae||void 0===ae?void 0:ae.id," - (",null!==ae&&void 0!==ae&&ae.status?(0,g.kC)(null===(s=m.pC[null===ae||void 0===ae?void 0:ae.status])||void 0===s?void 0:s.status):"",")"]}),(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.rejected&&(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.withdrawn&&z()(new Date).isBefore(null===ae||void 0===ae?void 0:ae.leaveFrom)?(0,R.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",onClick:function(){ne.withdrawLeaveRequest(L).then((function(){I(),oe(),X.resetFields(),B()})).catch((function(e){a.ZP.error(null===e||void 0===e?void 0:e.message)}))},children:"Withdraw Request"}):null]}),placement:"right",size:"large",width:window.innerWidth>768?"60%":"100%",onClose:B,open:q,children:(0,R.jsx)(l.Z,{className:u.form,onFinish:function(e){te(!0),G||U||K?"employee"===O?ne.employeeActionLeaveRequest(L).then((function(e){I(),te(!1),oe(),X.resetFields()})).catch((function(e){a.ZP.error(null===e||void 0===e?void 0:e.message),te(!1)})):"manager"===O?ne.projectManagerActionLeaveRequest({comment:e.comment,status:e.status},L).then((function(e){I(),te(!1),oe(),X.resetFields()})).catch((function(e){a.ZP.error(null===e||void 0===e?void 0:e.message),te(!1)})):"hr"===O&&ne.hrActionLeaveRequest({comment:e.comment,status:e.status},L).then((function(e){I(),te(!1),oe(),X.resetFields()})).catch((function(e){a.ZP.error(null===e||void 0===e?void 0:e.message),te(!1)})):(a.ZP.error("You don't have permission to create this record"),te(!1))},form:X,children:(0,R.jsxs)("div",{className:u.drawerContainer,children:[(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("b",{children:"Name:"}),"\xa0","".concat((null===ae||void 0===ae||null===(t=ae.RequestBy)||void 0===t?void 0:t.firstName)||""," ").concat((null===ae||void 0===ae||null===(i=ae.RequestBy)||void 0===i?void 0:i.lastName)||"")]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("b",{children:"Date:"}),"\xa0",(0,p.Ny)((null===ae||void 0===ae?void 0:ae.addedDate)||"","MM dd,yy")]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("b",{children:"Purpose:"}),(0,R.jsx)("div",{style:{fontSize:"var(--font-size-normal)"},children:null===ae||void 0===ae?void 0:ae.purpose})]}),null!==ae&&void 0!==ae&&null!==(W=ae.Attachments)&&void 0!==W&&W.length?(0,R.jsx)("div",{className:u.attachmentsWrap,children:null===ae||void 0===ae?void 0:ae.Attachments.map((function(e,s){var t;return(0,R.jsx)("div",{className:u.attachment,children:(0,R.jsxs)("div",{className:u.resourceWrap,children:[null!==e&&void 0!==e&&null!==(t=e.mimeType)&&void 0!==t&&t.includes("pdf")?(0,R.jsx)("a",{href:"".concat(Z.PO).concat(null===e||void 0===e?void 0:e.file),target:"_blank",rel:"noreferrer",children:(0,R.jsx)(j.Z,{file:"".concat(f._,"resources/all/").concat(e.file,"?authKey=").concat(k),children:(0,R.jsx)(x.Z,{renderTextLayer:!1,pageNumber:1})})}):(0,R.jsx)(d.Z,{style:{objectFit:"cover",borderRadius:"0.25rem 0.25rem 0 0"},width:150,height:100,src:"".concat(f._,"resources/all/").concat(e.file,"?authKey=").concat(k)}),(0,R.jsx)("div",{style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",display:"flex",flexDirection:"column"},children:(0,R.jsx)(A,{style:{width:125,fontSize:"var(--font-size-xs)"},strong:!0,ellipsis:!0,children:null===e||void 0===e?void 0:e.title})})]})},s)}))}):null,(null===ae||void 0===ae?void 0:ae.status)===m.Lz.not_yet_submitted?(0,R.jsxs)("div",{className:u.hrWrap,children:[(0,R.jsx)("div",{className:u.title,children:"Employee Actions"}),(0,R.jsxs)("div",{className:u.hrInputs,children:[(0,R.jsx)("b",{style:{fontSize:"var(--font-size-sm)"},children:"Leave dates"}),(0,R.jsxs)("div",{className:u.dateWrap,children:[(0,R.jsx)("div",{className:u.fromDate,children:(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"","dd MM,yy")}),(0,R.jsxs)("div",{className:u.fromDate,children:["to ",(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveTo)||"","dd MM,yy")]}),(0,R.jsxs)("div",{className:u.bold,children:["(",(0,p.I)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"",(null===ae||void 0===ae?void 0:ae.leaveTo)||"")+1," days)"]})]})]}),(0,R.jsx)("div",{className:u.footerWrap,style:{justifyContent:"flex-end"},children:"employee"===O?(0,R.jsxs)("div",{className:u.buttonWrap,children:[(0,R.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:B,type:"plain",children:"Cancel"}),(0,R.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:se,children:"Submit Request"})]}):null})]}):null,(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.not_yet_submitted&&(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.withdrawn&&"manager"===O?(0,R.jsxs)("div",{className:u.hrWrap,children:[(0,R.jsx)("div",{className:u.title,children:"Project Manager Actions"}),(0,R.jsxs)("div",{className:u.hrInputs,children:[(0,R.jsx)("b",{style:{fontSize:"var(--font-size-sm)"},children:"Leave dates"}),(0,R.jsxs)("div",{className:u.dateWrap,children:[(0,R.jsx)("div",{className:u.fromDate,children:(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"","dd MM,yy")}),(0,R.jsxs)("div",{className:u.fromDate,children:["to ",(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveTo)||"","dd MM,yy")]}),(0,R.jsxs)("div",{className:u.bold,children:["(",(0,p.I)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"",(null===ae||void 0===ae?void 0:ae.leaveTo)||"")+1," days)"]})]}),(0,R.jsxs)("div",{className:u.actionsWrap,children:[(0,R.jsx)("br",{}),U?(0,R.jsx)(l.Z.Item,{name:"status",rules:[{required:!0,message:"Please select a status"}],children:(0,R.jsx)(r.ZP.Group,{options:m.cR,optionType:"button",buttonStyle:"solid"})}):"No action from Project Manager yet"]})]}),(0,R.jsxs)("div",{className:u.footerWrap,children:[U&&(0,R.jsx)(l.Z.Item,{name:"comment",className:u.commentWrap,children:(0,R.jsx)(c.t7,{size:"w100",label:(0,R.jsx)("b",{children:"Comment"}),type:"textArea",placeHolder:"Enter comment"})}),!U&&(0,R.jsxs)("div",{className:u.priceText,children:[(0,R.jsx)("b",{style:{fontSize:"var(--font-size-sm)"},children:"Comment"}),(0,R.jsx)("div",{children:null===ae||void 0===ae||null===(w=ae.AdminActions[0])||void 0===w?void 0:w.comment})]}),U&&(0,R.jsxs)("div",{className:u.buttonWrap,children:[(0,R.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:B,type:"plain",children:"Cancel"}),(0,R.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:se,children:"Save"})]})]})]}):null,"rejectedByHr"===O||(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.not_yet_submitted&&(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.rejected&&(null===ae||void 0===ae?void 0:ae.status)!==m.Lz.withdrawn&&"manager"!==O?(0,R.jsxs)("div",{className:u.hrWrap,children:[(0,R.jsx)("div",{className:u.title,children:"HR Department Actions"}),(0,R.jsxs)("div",{className:u.hrInputs,children:[(0,R.jsx)("b",{style:{fontSize:"var(--font-size-sm)"},children:"Leave dates"}),(0,R.jsxs)("div",{className:u.dateWrap,children:[(0,R.jsx)("div",{className:u.fromDate,children:(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"","dd MM,yy")}),(0,R.jsxs)("div",{className:u.fromDate,children:["to ",(0,p.Ny)((null===ae||void 0===ae?void 0:ae.leaveTo)||"","dd MM,yy")]}),(0,R.jsxs)("div",{className:u.bold,children:["(",(0,p.I)((null===ae||void 0===ae?void 0:ae.leaveFrom)||"",(null===ae||void 0===ae?void 0:ae.leaveTo)||"")+1," days)"]})]}),(0,R.jsxs)("div",{className:u.actionsWrap,children:[(0,R.jsx)("br",{}),"hr"===O?G?(0,R.jsx)(l.Z.Item,{name:"status",rules:[{required:!0,message:"Please select a status"}],children:(0,R.jsx)(r.ZP.Group,{options:m.cR,optionType:"button",buttonStyle:"solid"})}):"No action from HR yet":("rejectedByHr"===O||"done"===O)&&(0,R.jsx)("div",{style:{textTransform:"capitalize",lineHeight:"1rem",color:null===(C=m.pC[null===ae||void 0===ae||null===(T=ae.AdminActions[1])||void 0===T?void 0:T.status])||void 0===C?void 0:C.color},children:null===(M=m.pC[null===ae||void 0===ae||null===(P=ae.AdminActions[1])||void 0===P?void 0:P.status])||void 0===M?void 0:M.status})]})]}),(0,R.jsxs)("div",{className:u.footerWrap,children:["hr"===O&&G&&(0,R.jsxs)("div",{className:u.buttonWrap,children:[(0,R.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:B,type:"plain",children:"Cancel"}),(0,R.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:se,children:"Save"})]}),"hr"===O?G&&(0,R.jsx)(l.Z.Item,{name:"comment",className:u.commentWrap,children:(0,R.jsx)(c.t7,{size:"w100",label:(0,R.jsx)("b",{children:"Comment"}),type:"textArea",placeHolder:"Enter comment"})}):"done"===O&&(0,R.jsxs)("div",{className:u.priceText,children:[(0,R.jsx)("b",{style:{fontSize:"var(--font-size-sm)"},children:"Comment"}),(0,R.jsx)("div",{children:null===ae||void 0===ae||null===(S=ae.AdminActions[1])||void 0===S?void 0:S.comment})]}),"hr"===O&&G&&(0,R.jsxs)("div",{className:u.buttonWrap,children:[(0,R.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:B,type:"plain",children:"Cancel"}),(0,R.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:se,children:"Save"})]})]})]}):null]})})})})}},47364:function(e,s,t){"use strict";t.d(s,{_:function(){return v}});var n=t(8570),i=t(28080),l=t(37388),a=t(10177),o=t(15491),d=t(37936),r=t(22698),c=t(98505),u=t(46417),m=n.Z.Paragraph,v=function(e){var s,t,n=e.leaveRequest,v=e.onClick,h=e.isFullWidth;return(0,u.jsx)(i.Z,{hoverable:!0,onClick:v,bodyStyle:{height:"100%"},className:"".concat(r.Z.card," ").concat(h?r.Z.fullWidth:""),children:(0,u.jsxs)("div",{className:r.Z.cardBody,children:[(0,u.jsxs)("div",{className:r.Z.cardBodyTop,children:[(0,u.jsxs)("div",{className:r.Z.cardTitle,children:["LVE-",n.id,(0,u.jsxs)("span",{style:{textTransform:"capitalize"},children:["\xa0(",d.rw[n.typeOfLeave],")"]})]}),(0,u.jsxs)("div",{className:r.Z.topRight,children:[n._count.Attachments>0&&(0,u.jsxs)("div",{className:r.Z.file,children:[(0,u.jsx)(a.Z,{}),"\xa0",n._count.Attachments]}),(0,u.jsx)("div",{className:r.Z.status,style:{backgroundColor:null===(s=d.pC[null===n||void 0===n?void 0:n.status])||void 0===s?void 0:s.color},children:null===(t=d.pC[n.status])||void 0===t?void 0:t.status.replace("_"," ")})]})]}),(0,u.jsxs)("div",{className:r.Z.cardBodyMiddle,children:[(0,u.jsx)(m,{ellipsis:{rows:2},className:r.Z.purpose,children:n.purpose}),(0,u.jsxs)("div",{className:"font-size-sm",children:["Requested by: ",n.RequestBy.firstName+" "+n.RequestBy.lastName]})]}),(0,u.jsxs)("div",{className:r.Z.cardBodyEnd,children:[(0,u.jsxs)("div",{className:r.Z.dateWrap,children:[(0,u.jsx)("div",{className:r.Z.fromDate,children:(0,c.Ny)(n.leaveFrom,"dd M,yy")}),(0,u.jsxs)("div",{className:r.Z.fromDate,children:["to ",(0,c.Ny)(n.leaveTo,"dd M,yy")]}),(0,u.jsxs)("div",{className:r.Z.bold,children:["(",(0,c.I)(n.leaveFrom,n.leaveTo)+1," days)"]})]}),(0,u.jsxs)(l.Z,{title:"Requested date",className:r.Z.date,children:[(0,u.jsx)(o.Z,{}),"\xa0\xa0",(0,c.Ny)(n.addedDate,"dd M,yy")]})]})]})})}},95980:function(e,s,t){"use strict";t.d(s,{c:function(){return d}});var n=t(1413),i=t(43144),l=t(15671),a=t(3135),o=t(49075),d=(0,i.Z)((function e(){var s=this;(0,l.Z)(this,e),this.endPoint="leave-request",this.getAllRecords=function(e){return o.Z.get(o._+s.endPoint,{params:(0,n.Z)({sortByField:"order",sortOrder:"asc",perPage:4},e)})},this.getOwnRecords=function(e){return o.Z.get(o._+s.endPoint+"/own",{params:(0,n.Z)({},e)})},this.getRecordById=function(e){return o.Z.get(o._+s.endPoint+"/findOne/"+e)},this.getLeavesRecordById=function(e){return o.Z.get(o._+s.endPoint+"/findLeavesReportOfUser/"+e)},this.deleteRecord=function(e){return o.Z.delete(o._+s.endPoint+"/remove/"+e)},this.createRecord=function(e){return o.Z.post(o._+s.endPoint,e,{headers:a.C})},this.withdrawLeaveRequest=function(e){return o.Z.patch(o._+s.endPoint+"/withdraw/".concat(e))},this.employeeActionLeaveRequest=function(e){return o.Z.patch(o._+s.endPoint+"/submitRequest/".concat(e))},this.hrActionLeaveRequest=function(e,t){return o.Z.patch(o._+s.endPoint+"/hrAction/".concat(t),e)},this.projectManagerActionLeaveRequest=function(e,t){return console.log(t,"id"),o.Z.patch(o._+s.endPoint+"/projectManagerAction/".concat(t),e)},this.financeActionLeaveRequest=function(e,t){return o.Z.patch(o._+s.endPoint+"/financeAction/".concat(t),e)}}))},22698:function(e,s){"use strict";s.Z={container:"styles_container__7Q4FT",card:"styles_card__H+hDk",cardBody:"styles_cardBody__qEgvd",cardBodyTop:"styles_cardBodyTop__Xyyxs",topRight:"styles_topRight__Td5bN",status:"styles_status__EU59m",file:"styles_file__Kc8hC",cardTitle:"styles_cardTitle__M+bYN",cardBodyMiddle:"styles_cardBodyMiddle__shOuX",purpose:"styles_purpose__nEMJE",cardBodyEnd:"styles_cardBodyEnd__St2Ie",dateWrap:"styles_dateWrap__6l0Ee",fromDate:"styles_fromDate__wPUJY",bold:"styles_bold__+AzNj",date:"styles_date__EvMCa",fullWidth:"styles_fullWidth__OIEGW"}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);