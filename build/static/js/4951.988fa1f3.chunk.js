"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[4951],{70815:function(e,n,t){t.d(n,{r:function(){return g}});var o=t(1413),i=t(29439),a=t(45987),r=t(55291),d=t(86345),s=t(47313),l=t(40169),c=t(46417),u=["onChange","checked","recordId","allowChange"],g=function(e){var n=e.onChange,t=e.checked,g=e.recordId,p=e.allowChange,v=void 0===p||p,f=(0,a.Z)(e,u),h=(0,s.useState)({loading:!1,checked:!1}),Z=(0,i.Z)(h,2),m=Z[0],x=Z[1];return(0,s.useEffect)((function(){x((0,o.Z)((0,o.Z)({},m),{},{checked:t}))}),[t]),(0,c.jsx)(d.Z,{checked:m.checked,onChange:function(e){!0===v?(x((0,o.Z)((0,o.Z)({},m),{},{loading:!0})),n(e,g,f).then((function(n){x((0,o.Z)((0,o.Z)({},m),{},{checked:e,loading:!1})),r.ZP.success(n.data.message)})).catch((function(e){x((0,o.Z)((0,o.Z)({},m),{},{loading:!1}));var n=(0,l.P)(e);"string"===typeof n.message?r.ZP.error(n.message):r.ZP.error("Something went wrong")}))):r.ZP.error("You don't have permission to change this record, please contact your admin.")},loading:m.loading})}},24951:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var o=t(4942),i=t(1413),a=t(29439),r=t(47313),d=t(7532),s=t(25019),l=t(55291),c=t(82626),u=t(17327),g=t(49355),p=t(3798),v=t(46646),f=t(40169),h=t(36131),Z=t(46417),m=function(e){var n=e.openModal,t=e.onCancel,o=e.type,d=e.record,m=e.reloadTableData,x=e.permissions,C=x.createFaqsCategory,b=x.updateFaqsCategory,j=s.Z.useForm(),y=(0,a.Z)(j,1)[0],P=(0,r.useMemo)((function(){return new h.H}),[]),k=(0,r.useState)(),I=(0,a.Z)(k,2),S=I[0],F=I[1],w=(0,r.useState)({data:[],loading:!1}),R=(0,a.Z)(w,2),T=R[0],L=R[1],A=function(e){var n=(0,f.P)(e);if("string"==typeof n.message)F((0,i.Z)((0,i.Z)({},S),{},{error:n.message}));else{var t=(0,v.O)(n.message,[]);y.setFields(t),F((0,i.Z)((0,i.Z)({},S),{},{error:""}))}},E=(0,r.useCallback)((function(){P.getRecordById(d).then((function(e){e.data&&e.data.data&&(y.setFieldsValue((0,i.Z)((0,i.Z)({},e.data.data),{},{isPublished:e.data.data.isPublished})),F((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1})))})).catch((function(e){A(e)}))}),[y,d,P]);(0,r.useEffect)((function(){P.getAllRecords({isRoot:!0}).then((function(e){var n;L((0,i.Z)((0,i.Z)({},T),{},{data:null===(n=e.data)||void 0===n?void 0:n.data,loading:!1}))})),"edit"===o?(F({loading:!0}),E()):y.resetFields()}),[n,o,y,E]);var q=function(e){var n=e.target,t=(0,p.V3)(n.value);y.setFieldsValue({slug:t})},z=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(F((0,i.Z)((0,i.Z)({},S),{},{buttonLoading:!0})),o){case"edit":!0===b?P.updateRecord(e,null===S||void 0===S?void 0:S.data.id).then((function(e){n&&t(),m(),y.resetFields(),F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){A(e),F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})):(F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})})),l.ZP.error("You don't have permission to update this record"));break;case"new":!0===C?P.createRecord(e).then((function(e){n&&t(),m(),y.resetFields(),F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){A(e),F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})):(F((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})})),l.ZP.error("You don't have permission to create this record"))}};return(0,Z.jsx)(c.P0,{visible:n,closable:!0,onCancel:t,titleText:"edit"===o?"Edit FAQ Category":"Add New FAQ Category",showFooter:!1,children:null!==S&&void 0!==S&&S.loading?(0,Z.jsx)(g.Z,{items:10}):(0,Z.jsxs)(s.Z,{className:u.Z.form,onFinish:z,form:y,children:[(null===S||void 0===S?void 0:S.error)&&(0,Z.jsx)(c.EQ,{description:null===S||void 0===S?void 0:S.error,isClosable:!0,onClose:function(){F((0,i.Z)((0,i.Z)({},S),{},{error:""}))}}),(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z.Item,{name:"parentId",children:(0,Z.jsx)(c.AP,{label:"Select Parent",options:T.data.map((function(e){return{label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id}}))})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z.Item,{name:"title",rules:[{required:!0,message:"Please add a title"}],children:(0,Z.jsx)(c.t7,{size:"w100",label:"Title",asterisk:!0,type:"text",onChange:q})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z.Item,{name:"description",rules:[{required:!0,message:"Please add a description"}],children:(0,Z.jsx)(c.t7,{size:"w100",label:"Description",asterisk:!0,type:"textArea"})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z.Item,{name:"slug",rules:[{required:!0,message:"Please add a slug"}],children:(0,Z.jsx)(c.t7,{onChange:q,size:"w100",label:"Slug",asterisk:!0,type:"text"})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z.Item,{name:"isPublished",children:(0,Z.jsx)(c.AP,{label:"Published",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}]})})}),(0,Z.jsxs)("div",{className:u.Z.footer,children:[(0,Z.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:t,type:"plain",children:"Cancel"}),"edit"!==o?(0,Z.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"button",onClick:function(){y.validateFields().then((function(e){z(e,!1)})).catch((function(e){}))},loading:null===S||void 0===S?void 0:S.buttonLoading,children:"Submit & Add More"}):"",(0,Z.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===S||void 0===S?void 0:S.buttonLoading,children:"Submit & Exit"})]})]})})},x=t(5900),C=t(41586),b=t(98676),j=t(3109),y=t(70815),P=t(85554),k=function(e){var n=e.record,t=e.onEditIconClick,o=e.reloadTableData,d=e.permissions.deleteFaqsCategory,s=(0,r.useState)({confirmLoading:!1,openPopConfirm:!1}),c=(0,a.Z)(s,2),g=c[0],p=c[1],v=(0,r.useMemo)((function(){return new h.H}),[]);return(0,Z.jsxs)("div",{className:u.Z.actions,children:[(0,Z.jsx)("span",{onClick:function(){return t(n)},children:(0,Z.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,Z.jsx)(x.Z,{open:g.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(p((0,i.Z)((0,i.Z)({},g),{},{confirmLoading:!0})),!1===d)return l.ZP.error("You don't have permission to delete this record, please contact your admin."),void p((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}));v.deleteRecord(n.id).then((function(e){p((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1,confirmLoading:!1})),o()})).catch((function(e){p((0,i.Z)((0,i.Z)({},g),{},{confirmLoading:!1}))}))},onCancel:function(){return p((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}))},okButtonProps:{loading:g.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||p((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!1}))},children:(0,Z.jsx)(b.Z,{className:u.Z.bg__red,onClick:function(){p((0,i.Z)((0,i.Z)({},g),{},{openPopConfirm:!0}))}})})]})};function I(e){var n=e.tableData,t=e.tableLoading,o=e.onEditIconClick,i=e.reloadTableData,a=(0,P.v9)((function(e){return e.usersReducer})).userPermissions,r=new h.H,d=function(e,n){return r.updateRecord({isPublished:e},n)},s=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1},width:"5%"},{title:"Title",dataIndex:"title",key:"title",render:function(e,n){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(j.Z,{color:"dark-main",size:"sm",children:e})})}},{title:"Slug",dataIndex:"slug",key:"slug",render:function(e,n){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(j.Z,{color:"dark-main",size:"sm",children:e})})}},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:function(e,n){return(0,Z.jsx)(y.r,{checked:e,onChange:d,recordId:n.id,allowChange:a.updateFaqsCategory})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,n){return(0,Z.jsx)(k,{record:n,onEditIconClick:o,reloadTableData:i,permissions:a})}}];return(0,Z.jsx)("div",{className:u.Z.antdTableWrapper,children:(0,Z.jsx)(C.Z,{sticky:!0,dataSource:n,columns:s,pagination:!1,scroll:{x:991},loading:t,rowKey:function(e){return"site-faqs-".concat(e.id)}})})}var S=t(42623),F=function(e){return e.CREATE="createFaqsCategory",e.UPDATE="updateFaqsCategory",e.DELETE="deleteFaqsCategory",e.READ="readFaqsCategory",e}({}),w=t(18515),R=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"FAQ Categories"}];var T=function(){var e,n,t,s,u=(0,p.aY)(F),g=(0,P.v9)((function(e){return e.usersReducer})).userPermissions,v=g.readFaqsCategory,f=g.createFaqsCategory,x=g.updateFaqsCategory,C=(0,r.useState)({editType:"new",recordId:0,openModal:!1}),b=(0,a.Z)(C,2),j=b[0],y=b[1],k=new h.H,T=(0,r.useState)(""),L=(0,a.Z)(T,2),A=L[0],E=L[1],q=(0,S.N)(A,500),z=(0,r.useState)({title:"",isRoot:void 0,parentId:0}),D=(0,a.Z)(z,2),M=D[0],N=D[1],Y=(0,r.useState)(!1),H=(0,a.Z)(Y,2),Q=H[0],_=H[1],B=function(e){var n=null===e||void 0===e?void 0:e.target,t=n.name,a=n.value;if("parentId"===t&&!(0,p.hj)(a))return l.ZP.error("Parent Id must be a number");N((0,i.Z)((0,i.Z)({},M),{},(0,o.Z)({},t,a)))},O=(0,r.useState)({isLoading:!1,error:{},data:[]}),U=(0,a.Z)(O,2),V=U[0],X=U[1],K=function(){!1!==f?y((0,i.Z)((0,i.Z)({},j),{},{openModal:!j.openModal,editType:"new"})):l.ZP.error("You don't have permission to create new record")},W=(0,r.useCallback)((function(e){X((0,i.Z)((0,i.Z)({},V),{},{loading:!0})),k.getAllRecords(e).then((function(e){X(e.data)})).catch((function(e){var n,t;l.ZP.error(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)}))}),[k,V]),$=(0,r.useCallback)((function(){var e={title:q||void 0,isRoot:M.isRoot||void 0,parentId:M.parentId||void 0};W(e)}),[M,q]),G=(0,r.useCallback)((function(e,n){X((0,i.Z)((0,i.Z)({},V),{},{loading:!0}));var t={page:e,perPage:n,title:q||void 0,isRoot:M.isRoot||void 0,parentId:M.parentId||void 0};W(t)}),[k,V,M,W,q]);return(0,r.useEffect)((function(){if(q){var e={title:q||void 0,isRoot:M.isRoot||void 0,parentId:M.parentId||void 0};W(e)}else W()}),[q]),(0,r.useEffect)((function(){Q&&$();var e=setTimeout((function(){_(!1)}),2e3);return function(){return clearTimeout(e)}}),[Q,M,$]),(0,Z.jsxs)(d.default,{permissionSlug:u,children:[(0,Z.jsx)(c.mr,{heading:"FAQ Categories",buttonText:"Add New Category",onButtonClick:K,breadCrumbData:R,showAdd:!0===f,filters:!0===v?(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(c.t7,{placeHolder:"Search...",icon:(0,Z.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",value:A,onChange:function(e){var n=e.currentTarget.value;E(n)}})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(c.Xy,{type:"radio",label:"Root Category",name:"isRoot",value:String(null===M||void 0===M?void 0:M.isRoot),options:[{label:"Yes",value:"true"},{label:"No",value:"false"}],onChange:B,onReset:function(){_(!0),N((0,i.Z)((0,i.Z)({},M),{},{isRoot:void 0}))},onUpdate:$})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(c.Xy,{type:"input",label:"Parent ID",name:"parentId",value:(null===M||void 0===M?void 0:M.parentId)>0?String(null===M||void 0===M?void 0:M.parentId):"",onChange:B,onReset:function(){_(!0),N((0,i.Z)((0,i.Z)({},M),{},{parentId:0}))},onUpdate:$})})]}):null}),!0===v&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(I,{tableData:V.data,tableLoading:V.loading,onEditIconClick:function(e){!1!==x?y((0,i.Z)((0,i.Z)({},j),{},{editType:"edit",recordId:e.id,openModal:!0})):l.ZP.error("You don't have permission to update record")},reloadTableData:W}),(0,Z.jsx)(c.tl,{total:null===V||void 0===V||null===(e=V.meta)||void 0===e?void 0:e.total,current:null===V||void 0===V||null===(n=V.meta)||void 0===n?void 0:n.page,defaultPageSize:null!==V&&void 0!==V&&null!==(t=V.meta)&&void 0!==t&&t.perPage?null===V||void 0===V||null===(s=V.meta)||void 0===s?void 0:s.perPage:10,pageSizeOptions:[10,20,50,100],onChange:G})]}),!1===v&&(0,Z.jsx)(w.a$,{mainMessage:"You don't have permission to view this data"}),j.openModal&&(0,Z.jsx)(m,{record:j.recordId,type:j.editType,reloadTableData:W,onCancel:K,openModal:j.openModal,permissions:g})]})}}}]);