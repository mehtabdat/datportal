"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[639],{80639:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var o=n(4942),i=n(1413),a=n(29439),r=n(47313),s=n(7532),d=n(25019),l=n(55291),c=n(82626),u=n(17327),g=n(49355),f=n(48897),h=n(3798),p=n(46646),m=n(40169),Z=n(59816),v=n(22461),x=n(46417),y=function(e){var t,n,o,s,y,j,C,b=e.openModal,P=e.onCancel,k=e.type,S=e.record,w=e.reloadTableData,I=e.permissions,B=I.createBlogsCategory,T=I.updateBlogsCategory,A=d.Z.useForm(),E=(0,a.Z)(A,1)[0],D=(0,r.useMemo)((function(){return new v.F}),[]),R=(0,r.useMemo)((function(){return new Z.Y}),[]),L=(0,r.useState)(),z=(0,a.Z)(L,2),F=z[0],M=z[1],N=(0,r.useState)([]),O=(0,a.Z)(N,2),Y=O[0],_=O[1],V=function(e){var t=(0,m.P)(e);if("string"==typeof t.message)M((0,i.Z)((0,i.Z)({},F),{},{error:t.message}));else{var n=(0,p.O)(t.message,[]);E.setFields(n),M((0,i.Z)((0,i.Z)({},F),{},{error:""}))}},H=(0,r.useCallback)((function(){D.getRecordById(S).then((function(e){e.data&&e.data.data&&(E.setFieldsValue((0,i.Z)((0,i.Z)({translations:e.data.data.localization},e.data.data),{},{isPublished:e.data.data.isPublished})),M((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1})))})).catch((function(e){V(e)}))}),[E,S,D]),q=(0,r.useCallback)((function(){"seo"!==k&&R.getAllRecords().then((function(e){e.data&&e.data.data&&_(e.data.data)}))}),[R,k]);(0,r.useEffect)((function(){"edit"===k?(M({loading:!0}),H(),q()):"seo"===k?H():(q(),E.resetFields())}),[b,k,E,H,q]);return(0,x.jsx)(c.P0,{visible:b,size:"seo"===k?"700px":"900px",closable:!0,onCancel:P,titleText:"new"===k?"Add New Blog Category":"edit"===k?"Edit Blog Category":"SEO",showFooter:!1,children:null!==F&&void 0!==F&&F.loading?(0,x.jsx)(g.Z,{items:10}):(0,x.jsxs)(d.Z,{className:u.Z.form,onFinish:function(e){M((0,i.Z)((0,i.Z)({},F),{},{buttonLoading:!0}));var t=new FormData;if("seo"!==k){var n=["image","translations"];Object.entries(e).forEach((function(e){n.includes(e[0])||t.append(e[0],e[1])})),e.image&&"string"!==typeof e.image&&e.image.fileList.length>0&&t.append("image",e.image.fileList[0].originFileObj),e.translations&&e.translations.forEach((function(e,n){t.append("translations[".concat(n+1,"][language]"),e.language),t.append("translations[".concat(n+1,"][title]"),e.title),t.append("translations[".concat(n+1,"][highlight]"),e.highlight),t.append("translations[".concat(n+1,"][description]"),e.description)}))}switch(k){case"new":!0===B?D.createRecord(t).then((function(e){w(),P(),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){V(e),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})}))})):(M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})})),l.ZP.error("You don't have permission to create a new record"));break;case"edit":!0===T?D.updateRecord(t,null===F||void 0===F?void 0:F.data.id).then((function(e){w(),P(),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})).catch((function(e){V(e),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})):(M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})})),l.ZP.error("You don't have permission to update this record"));break;case"seo":!0===T?D.updateSEOById(S,{seoTitle:null===e||void 0===e?void 0:e.seoTitle,seoDescription:null===e||void 0===e?void 0:e.seoDescription}).then((function(e){w(),P(),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})).catch((function(e){V(e),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{loading:!1})}))})):(M((function(e){return(0,i.Z)((0,i.Z)({},e),{},{buttonLoading:!1})})),l.ZP.error("You don't have permission to update this record"))}},form:E,children:[(null===F||void 0===F?void 0:F.error)&&(0,x.jsx)(c.EQ,{description:null===F||void 0===F?void 0:F.error,isClosable:!0,onClose:function(){M((0,i.Z)((0,i.Z)({},F),{},{error:""}))}}),("new"===k||"edit"===k)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(d.Z.Item,{name:"countryId",rules:[{required:!0,message:"Please Select a country!"}],children:(0,x.jsx)(c.AP,{label:"Country",placeholder:"Please select country",options:null===Y||void 0===Y?void 0:Y.map((function(e){return{label:e.name,value:e.id}})),asterisk:!0})}),(0,x.jsx)(d.Z.Item,{name:"slug",rules:[{required:!0,message:"Please add a slug"}],children:(0,x.jsx)(c.t7,{onChange:function(e){var t=e.target,n=(0,h.V3)(t.value);E.setFieldsValue({slug:n})},size:"w100",label:"Slug",asterisk:!0,type:"text"})})]}),(0,x.jsx)(c.WH,{title:"Blog Category",formName:"translations",description:!0,highlight:!0,form:E,defaultValue:null===F||void 0===F||null===(t=F.data)||void 0===t?void 0:t.localization}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Z.Item,{name:"imageAlt",rules:[{required:!1}],children:(0,x.jsx)(c.t7,{size:"w100",label:"Image Alt Text",type:"text"})})}),(0,x.jsx)("div",{children:(0,x.jsx)(c.wA,{name:"image",defaultFileList:"edit"===k&&F&&(null===(n=F.data)||void 0===n?void 0:n.image)&&[{uid:null===(o=F.data)||void 0===o?void 0:o.id,name:null===(s=F.data)||void 0===s?void 0:s.image,status:"done",url:f.lj+(null===(y=F.data)||void 0===y?void 0:y.image)}]})})]}),"seo"===k&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:(0,x.jsx)(d.Z.Item,{name:"seoTitle",rules:[{required:!0,message:"Please add SEO Title"}],children:(0,x.jsx)(c.t7,{size:"w100",label:"Title",type:"text",asterisk:!0})})}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Z.Item,{name:"seoDescription",rules:[{required:!0,message:"Please add SEO Description"}],children:null!==F&&void 0!==F&&null!==(j=F.data)&&void 0!==j&&j.seoDescription?(0,x.jsx)(c.t7,{size:"w100",label:"Description",type:"textArea",asterisk:!0,defaultValue:null===F||void 0===F||null===(C=F.data)||void 0===C?void 0:C.seoDescription}):null!==F&&void 0!==F&&F.data?(0,x.jsx)(c.t7,{size:"w100",label:"Description",type:"textArea",asterisk:!0}):(0,x.jsx)(g.Z,{items:1,fullWidth:!0})})})]}),(0,x.jsxs)("div",{className:u.Z.footer,children:[(0,x.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:P,type:"plain",children:"Cancel"}),(0,x.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===F||void 0===F?void 0:F.buttonLoading,children:"Submit"})]})]})})},j=n(8570),C=n(5900),b=n(21680),P=n(41586),k=n(98676),S=n(3109),w=n(98505),I=n(37936),B=n(32147),T=n(85554),A=j.Z.Paragraph,E=function(e){var t=e.record,n=e.onEditIconClick,o=e.reloadTableData,s=e.onSeoIconClick,d=e.permissions.deleteBlogsCategory,c=(0,r.useState)({confirmLoading:!1,openPopConfirm:!1}),g=(0,a.Z)(c,2),f=g[0],h=g[1],p=(0,r.useMemo)((function(){return new v.F}),[]);return(0,x.jsxs)("div",{className:u.Z.actions,children:[(0,x.jsx)("span",{onClick:function(){return s(t)},children:(0,x.jsx)(B.iC,{})}),(0,x.jsx)("span",{onClick:function(){return n(t)},children:(0,x.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,x.jsx)(C.Z,{open:f.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(h((0,i.Z)((0,i.Z)({},f),{},{confirmLoading:!0})),!1===d)return l.ZP.error("You don't have permission to delete this record, please contact your admin."),void h((0,i.Z)((0,i.Z)({},f),{},{openPopConfirm:!1}));p.deleteRecord(t.id).then((function(e){h((0,i.Z)((0,i.Z)({},f),{},{openPopConfirm:!1,confirmLoading:!1})),o()})).catch((function(e){h((0,i.Z)((0,i.Z)({},f),{},{confirmLoading:!1}))}))},onCancel:function(){return h((0,i.Z)((0,i.Z)({},f),{},{openPopConfirm:!1}))},okButtonProps:{loading:f.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||h((0,i.Z)((0,i.Z)({},f),{},{openPopConfirm:!1}))},children:(0,x.jsx)(k.Z,{className:u.Z.bg__red,onClick:function(){h((0,i.Z)((0,i.Z)({},f),{},{openPopConfirm:!0}))}})})]})};function D(e){var t=e.tableData,n=e.tableLoading,o=e.onEditIconClick,i=e.reloadTableData,r=e.onSeoIconClick,s=(0,T.v9)((function(e){return e.usersReducer})).userPermissions,d=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"5%"},{title:"Category",dataIndex:"description",key:"description",render:function(e,t){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(S.Z,{color:"dark-main",size:"sm",weight:"bold",children:t.localization[0].title}),null!==t&&void 0!==t&&t.slug?(0,x.jsxs)("a",{href:"".concat(f.JH,"/en/blogs/").concat(t.slug),target:"_blank",rel:"noreferrer",className:"d-flex",children:[(0,x.jsx)(A,{ellipsis:{rows:1,expandable:!1},title:t.localization[0].title,className:"font-size-xs color-light-800 mt-1",children:t.slug}),(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",height:"15px",width:"15px",className:"mt-1 ml-1",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]}):""]})}},{title:"Country",dataIndex:"country",key:"country",render:function(e,t){return(0,x.jsx)(S.Z,{color:"dark-sub",size:"sm",children:t.country.name})}},{title:"Image",dataIndex:"image",key:"image",render:function(e,t){return e?(0,x.jsx)(b.Z,{width:50,height:50,src:"".concat(f.lj).concat(e),alt:t.imageAlt,preview:!1,rootClassName:"object-fit-contain"}):(0,x.jsx)(x.Fragment,{})}},{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(S.Z,{color:"dark-sub",size:"sm",children:"Added: ".concat((0,w.Ny)(t.addedDate,"MM dd yy"))}),(0,x.jsx)(S.Z,{color:"dark-sub",size:"sm",children:"Modified: ".concat(t.modifiedDate?(0,w.Ny)(null===t||void 0===t?void 0:t.modifiedDate,"MM dd yy"):"Not Modified")})]})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return(0,x.jsx)(S.Z,{color:"dark-sub",size:"sm",children:Object.entries(I.PK).filter((function(t){var n=(0,a.Z)(t,2);n[0];return n[1]===String(e)}))[0][0]})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return(0,x.jsx)(E,{record:t,onEditIconClick:o,reloadTableData:i,onSeoIconClick:r,permissions:s})}}];return(0,x.jsx)("div",{className:u.Z.antdTableWrapper,children:(0,x.jsx)(P.Z,{sticky:!0,dataSource:t,columns:d,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"site-blogs-category-".concat(e.id)}})})}var R=n(42623),L=function(e){return e.CREATE="createBlogsCategory",e.UPDATE="updateBlogsCategory",e.DELETE="deleteBlogsCategory",e.READ="readBlogsCategory",e.CHANGE_STATUS="changeBlogsCategoryStatus",e.VERIFY_AND_PUBLISH="verifyAndPublishBlogsCategory",e.UPDATE_SEO="updateBlogsCategorySEO",e}({}),z=n(18515),F=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Blogs Category"}];var M=function(){var e,t,n,d,u=(0,h.aY)(L),g=(0,T.v9)((function(e){return e.usersReducer})).userPermissions,f=g.readBlogsCategory,p=g.createBlogsCategory,m=g.updateBlogsCategory,Z=g.updateBlogsCategorySEO,j=(0,r.useState)({editType:"new",recordId:0,openModal:!1}),C=(0,a.Z)(j,2),b=C[0],P=C[1],k=new v.F,S=(0,r.useState)(""),w=(0,a.Z)(S,2),B=w[0],A=w[1],E=(0,R.N)(B,500),M=(0,r.useState)({status:0}),N=(0,a.Z)(M,2),O=N[0],Y=N[1],_=(0,r.useState)(!1),V=(0,a.Z)(_,2),H=V[0],q=V[1],U=(0,r.useCallback)((function(e,t){e&&(q(!0),Y((0,i.Z)((0,i.Z)({},O),{},(0,o.Z)({},e,t))))}),[O]),W=(0,r.useState)({isLoading:!1,error:{},data:[]}),K=(0,a.Z)(W,2),G=K[0],J=K[1],Q=function(){!1!==p?P((0,i.Z)((0,i.Z)({},b),{},{openModal:!b.openModal,editType:"new"})):l.ZP.error("You don't have permission to create new record")},X=function(e){J((0,i.Z)((0,i.Z)({},G),{},{loading:!0})),k.getAllRecords(e).then((function(e){J(e.data)})).catch((function(e){J((0,i.Z)((0,i.Z)({},G),{},{loading:!1}))}))},$=(0,r.useCallback)((function(){var e={title:E||void 0,status:O.status||void 0};X(e)}),[O,E]),ee=(0,r.useCallback)((function(e,t){var n={page:e,perPage:t,title:E||void 0,status:O.status||void 0};X(n)}),[O,E]);return(0,r.useEffect)((function(){$()}),[E]),(0,r.useEffect)((function(){H&&$();var e=setTimeout((function(){q(!1)}),2e3);return function(){return clearTimeout(e)}}),[H,O,$]),(0,x.jsxs)(s.default,{permissionSlug:u,children:[(0,x.jsx)(c.mr,{heading:"Blogs Category",buttonText:"New Blog Category",onButtonClick:Q,breadCrumbData:F,showAdd:!0===p,filters:!0===f?(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:(0,x.jsx)(c.t7,{placeHolder:"Search...",icon:(0,x.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",className:"py-1",value:B,onChange:function(e){var t=e.currentTarget.value;A(t)}})}),(0,x.jsx)("div",{children:(0,x.jsx)(c.Xy,{type:"radio",label:"Status",name:"status",value:String(O.status),options:Object.entries(I.f4).map((function(e){var t=(0,a.Z)(e,2);return{label:t[0],value:t[1]}})),onChange:function(e){var t=null===e||void 0===e?void 0:e.target,n=t.name,a=t.value;Y((0,i.Z)((0,i.Z)({},O),{},(0,o.Z)({},n,a)))},onReset:function(){return U("status",0)},onUpdate:$})})]}):null}),!0===f&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D,{tableData:G.data,tableLoading:G.loading,onEditIconClick:function(e){!1!==m?P((0,i.Z)((0,i.Z)({},b),{},{editType:"edit",recordId:e.id,openModal:!0})):l.ZP.error("You don't have permission to update this record")},reloadTableData:X,onSeoIconClick:function(e){!1!==Z?P((0,i.Z)((0,i.Z)({},b),{},{editType:"seo",recordId:e.id,openModal:!0})):l.ZP.error("You don't have permission to update this record")}}),(0,x.jsx)(c.tl,{total:null===G||void 0===G||null===(e=G.meta)||void 0===e?void 0:e.total,current:null===G||void 0===G||null===(t=G.meta)||void 0===t?void 0:t.page,defaultPageSize:null!==G&&void 0!==G&&null!==(n=G.meta)&&void 0!==n&&n.perPage?null===G||void 0===G||null===(d=G.meta)||void 0===d?void 0:d.perPage:10,pageSizeOptions:[10,20,50,100],onChange:ee})]}),!1===f&&(0,x.jsx)(z.a$,{mainMessage:"You don't have permission to view this data"}),b.openModal&&(0,x.jsx)(y,{record:b.recordId,type:b.editType,reloadTableData:X,onCancel:Q,openModal:b.openModal,permissions:g})]})}},22461:function(e,t,n){n.d(t,{F:function(){return s}});var o=n(43144),i=n(15671),a=n(49075),r=n(3135),s=(0,o.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="blogs-category",this.createRecord=function(e){return a.Z.post(t.endPoint+"/",e,{headers:r.C})},this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.getAllPublishedRecords=function(){return a.Z.get("".concat(t.endPoint,"/find-published"))},this.getRecordByOneSlug=function(e){return a.Z.get("".concat(t.endPoint,"/findOneBySlug/").concat(e))},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.updateRecordByStatus=function(e,n){return a.Z.patch("".concat(t.endPoint,"/changeStatus/").concat(e),{data:{status:n}})},this.createVerifyAndPublish=function(e,n){return a.Z.post("".concat(t.endPoint,"/verifyAndPublish/").concat(n),e,{headers:r.C})},this.updateSEOById=function(e,n){return a.Z.patch("".concat(t.endPoint,"/update-seo/").concat(e),n)},this.unpublishedRecords=function(e,n){return a.Z.get("".concat(t.endPoint,"/publish-unpublished/").concat(e),{data:{status:n}})}}))},59816:function(e,t,n){n.d(t,{Y:function(){return s}});var o=n(43144),i=n(15671),a=n(49075),r=n(3135),s=(0,o.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="country",this.allEndpoint="country/all",this.getAllRecords=function(){return a.Z.get(t.allEndpoint)},this.getAvailableRecords=function(){return a.Z.get("".concat(t.endPoint,"/available-country"))},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})}}))}}]);