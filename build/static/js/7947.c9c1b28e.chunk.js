(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[7947],{41746:function(e,n,o){"use strict";var t=o(29439),a=o(47313),i=o(28080),r=o(32697),s=o(78267),l=o(45705),d=o(32344),c=o(25568),u=o(46417);n.Z=function(e){var n=e.options,o=e.onChange,v=e.value,m=(0,a.useState)(!1),f=(0,t.Z)(m,2),p=f[0],h=f[1],g=(0,u.jsx)(i.Z,{children:(0,u.jsx)("div",{className:"pa-3",children:(0,u.jsx)(r.Z.Group,{className:c.Z.checkboxGroup,options:n,onChange:function(e){o(e),h(!1)},value:v})})});return(0,u.jsx)("div",{children:(0,u.jsx)(s.Z,{trigger:["click"],open:p,onOpenChange:function(e){return h(e)},dropdownRender:function(){return g},children:(0,u.jsx)("div",{className:c.Z.label,children:(0,u.jsxs)(l.Z,{children:[(0,u.jsx)("span",{children:"More Filters"}),(0,u.jsx)(d.Z,{})]})})})})}},70815:function(e,n,o){"use strict";o.d(n,{r:function(){return v}});var t=o(1413),a=o(29439),i=o(45987),r=o(55291),s=o(86345),l=o(47313),d=o(40169),c=o(46417),u=["onChange","checked","recordId","allowChange"],v=function(e){var n=e.onChange,o=e.checked,v=e.recordId,m=e.allowChange,f=void 0===m||m,p=(0,i.Z)(e,u),h=(0,l.useState)({loading:!1,checked:!1}),g=(0,a.Z)(h,2),Z=g[0],x=g[1];return(0,l.useEffect)((function(){x((0,t.Z)((0,t.Z)({},Z),{},{checked:o}))}),[o]),(0,c.jsx)(s.Z,{checked:Z.checked,onChange:function(e){!0===f?(x((0,t.Z)((0,t.Z)({},Z),{},{loading:!0})),n(e,v,p).then((function(n){x((0,t.Z)((0,t.Z)({},Z),{},{checked:e,loading:!1})),r.ZP.success(n.data.message)})).catch((function(e){x((0,t.Z)((0,t.Z)({},Z),{},{loading:!1}));var n=(0,d.P)(e);"string"===typeof n.message?r.ZP.error(n.message):r.ZP.error("Something went wrong")}))):r.ZP.error("You don't have permission to change this record, please contact your admin.")},loading:Z.loading})}},41351:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return ke}});var t=o(1413),a=o(29439),i=o(47313),r=o(54060),s=o(52747),l=o(8570),d=o(55291),c=o(37388),u=o(5900),v=o(78267),m=o(28080),f=o(45705),p=o(21680),h=o(41586),g=o(87462),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},x=o(16141),j=function(e,n){return i.createElement(x.Z,(0,g.Z)({},e,{ref:n,icon:Z}))};var y=i.forwardRef(j),b=o(98676),k=o(82626),w=o(32344),N=o(3113),C={forgotPasswordImg:"styles_forgotPasswordImg__qaDw+",dropdown:"styles_dropdown__QV3Md",overlay:"styles_overlay__EDEZb",overlay_item:"styles_overlay_item__w+hrg",disabledButton:"styles_disabledButton__L8Hpg",profileScoreWrap:"styles_profileScoreWrap__q2hDM",scoreOverlay:"styles_scoreOverlay__AyAj3",cardWrap:"styles_cardWrap__-VT1k",card:"styles_card__oAls-",card__green:"styles_card__green__tO1i7",card__info:"styles_card__info__6qyAL"},P=o(48897),R=o(84825),_=o(85554),S=o(32147),I=o(28770),M=o(59491),z=o(39180),T=o(25019),A=o(3798),U=o(46417),D=l.Z.Paragraph,O=function(e){var n=e.isOpen,o=e.handleCancel,t=e.record,r=e.updateUser,s=(0,i.useState)("auto"),l=(0,a.Z)(s,2),c=l[0],u=l[1],v=(0,i.useState)("select"),m=(0,a.Z)(v,2),f=m[0],p=m[1],h=(0,i.useState)(""),g=(0,a.Z)(h,2),Z=g[0],x=g[1],j=(0,i.useState)(!1),y=(0,a.Z)(j,2),b=y[0],w=y[1],N=(0,i.useMemo)((function(){return new R.z}),[]);return(0,U.jsx)(I.Z,{title:"Reset password for ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName),visible:n,onCancel:o,footer:(0,U.jsxs)("div",{children:[(0,U.jsx)(M.Z,{className:"rounded-5",type:"text",onClick:o,children:"Cancel"}),(0,U.jsx)(M.Z,{className:"ml-2 rounded-5",type:"primary",onClick:function(){return"select"===f?function(){if(!0===r){var e=(0,A.F2)();"auto"===c&&x(e),p("next"),N.updateRecord({password:"auto"===c?e:Z},null===t||void 0===t?void 0:t.id).then((function(e){p("next")})).catch((function(e){var n,o,t=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Something went wrong";d.ZP.error(t)}))}else{var n="You don't have permission to reset password for\n             ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName,", please contact\n             your administrator");d.ZP.error(n)}}():o()},children:"select"===f?"Reset":"Done"})]}),children:"select"===f?(0,U.jsxs)(z.ZP.Group,{name:"password-reset-options",style:{display:"flex",flexDirection:"column"},onChange:function(e){return u(e.target.value)},defaultValue:c,children:[(0,U.jsxs)(z.ZP,{value:"auto",className:"font-size-md color-dark-main",children:["Automatically generate a password",(0,U.jsx)("p",{className:"font-size-sm color-dark-sub mb-0",children:"You will be able to view and copy the password in the next step."})]}),(0,U.jsx)(z.ZP,{value:"create",className:"font-size-md color-dark-main mt-2",children:"Create password"}),"create"===c&&(0,U.jsx)("div",{className:"mt-1 ml-6",children:(0,U.jsx)(T.Z,{children:(0,U.jsx)(k.t7,{label:"Password",placeHolder:"Enter password",type:"password",className:"mb-2",onChange:function(e){return x(e.target.value)}})})})]}):(0,U.jsxs)("div",{children:[(0,U.jsx)("img",{src:"/images/forgot-password.svg",className:C.forgotPasswordImg,alt:"forgot-password"}),(0,U.jsx)(k.ZT,{color:"dark-sub",size:"md",weight:"semi",className:"text-center my-4",children:"Password has been reset successfully."}),(0,U.jsxs)(D,{copyable:{text:Z},className:"font-size-md color-dark-main text-center mb-0",children:["Password: ","",(0,U.jsx)("span",{className:"font-weight-bold",children:b?Z:"********"})]}),(0,U.jsx)("p",{className:"font-size-sm color-dark-sub text-center mb-0 mt-2 cursor-pointer",onClick:function(){return w(!b)},children:b?"Hide Password":"Show Password"})]})})},L=o(69686),E=o(40096),F=function(e){var n=e.isOpen,o=e.handleCancel,t=e.record,a=e.loginAsOtherUser,r=(0,i.useMemo)((function(){return new L.n}),[]);return(0,U.jsx)(I.Z,{title:"Login as ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName),visible:n,onCancel:o,footer:(0,U.jsxs)("div",{children:[(0,U.jsx)(M.Z,{className:"rounded-5",type:"text",onClick:o,children:"Cancel"}),(0,U.jsx)(M.Z,{className:"ml-2 rounded-5",type:"primary",onClick:function(){return function(){if(!0===a)r.loginAsUser(null===t||void 0===t?void 0:t.id).then((function(e){var n,a=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;if(null!==a&&void 0!==a&&a.token){var i,r,s,l="Login as ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName," successfully"),c=E.Z.getUserData(),u=E.Z.getLocalAccessToken()||"",v=E.Z.getLocalRefreshToken()||"";E.Z.saveTempUserData(c),E.Z.updateTempAccessToken(u),E.Z.updateTempRefreshToken(v),E.Z.updateLocalAccessToken(null===a||void 0===a||null===(i=a.token)||void 0===i?void 0:i.access_token),E.Z.updateLocalRefreshToken(null===a||void 0===a||null===(r=a.token)||void 0===r?void 0:r.refresh_token),E.Z.saveUserData(null===(s=e.data.data)||void 0===s?void 0:s.userData),d.ZP.success(l),o(),window.location.href="/"}})).catch((function(e){var n,o,a=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Login as ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName," failed");d.ZP.error(a)}));else{var e="You don't have permission to login as \n            ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName,",\n             please contact your administrator");d.ZP.error(e)}}()},children:"Continue"})]}),children:(0,U.jsx)(k.ZT,{color:"dark-main",size:"normal",className:"text-center my-4",children:"When logging in as ".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName,",\n                    we'll send them an email to let them know you've logged in\n                    as them. including your name and email address.")})})},Y=o(37936),H=o(98505),V=o(47312),B=o(46155),q=o(8773),W=o(39548),$=o(42623),G=function(e){var n=e.Manager,o=e.users,t=e.loading,r=e.permissions.updateUser,s=e.getUsers,l=e.userId,c=e.reloadTableData,u=d.ZP.useMessage(),p=(0,a.Z)(u,2),h=p[0],g=p[1],Z=(0,i.useMemo)((function(){return new R.z}),[]),x=(0,i.useState)(""),j=(0,a.Z)(x,2),y=j[0],b=j[1],N=(0,$.N)(y,500),_=function(e){h.open({key:e.key,type:e.type,content:e.content,duration:"loading"===e.type?0:2})},S=(0,i.useState)(!1),I=(0,a.Z)(S,2),M=I[0],z=I[1];(0,i.useEffect)((function(){N&&s({name:N})}),[N]);var T=(0,U.jsxs)(m.Z,{className:"".concat(C.overlay," pa-2"),children:[(0,U.jsx)(k.t7,{label:"Assign this employee to",placeHolder:"Search User...",value:y,size:"w100",onChange:function(e){var n=e.target.value;y!==n&&b(n)},icon:(0,U.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"})}),t?(0,U.jsx)(V.Z,{active:!0,className:"mt-1"}):(0,U.jsx)(U.Fragment,{children:(null===o||void 0===o?void 0:o.length)>0?(0,U.jsx)(U.Fragment,{children:null===o||void 0===o?void 0:o.map((function(e){return(0,U.jsxs)("div",{className:C.overlay_item,onClick:function(){if((null===n||void 0===n?void 0:n.id)!==(null===e||void 0===e?void 0:e.id)&&!0===r){var o=Number(null===e||void 0===e?void 0:e.id);(t=o)&&!0===r?(_({key:"update",type:"loading",content:"Updating..."}),Z.updateRecord({managerId:t},l).then((function(e){var n,o;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&(_({key:"update",type:"success",content:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message}),z(!M),c())})).catch((function(e){var n=(0,A.S3)(e);_({key:"update",type:"error",content:n||"Something went wrong"})}))):_({key:"update",type:"error",content:"You don't have permission to assign enquiry"})}var t},children:[(0,U.jsxs)("span",{className:(null===n||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)?C.disabledButton:"",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName," - ","(".concat(null===e||void 0===e?void 0:e.email,")")]}),(0,U.jsx)(B.Z,{className:"my-0"})]},"users-".concat(null===e||void 0===e?void 0:e.id))}))}):(0,U.jsx)("div",{className:C.overlay_item_noData,children:(0,U.jsx)(k.I$,{description:N?"No results found, please modify your search term":"Please search for a manager to assign this employee to"})})})]});return(0,U.jsxs)(U.Fragment,{children:[g,(0,U.jsx)(v.Z,{dropdownRender:function(){return T},trigger:!0===r?["click"]:[],open:!0===r&&M,onOpenChange:function(e){return z(e)},className:C.dropdown,children:(0,U.jsxs)(f.Z,{children:[(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",cursor:!0===r?"pointer":"default"},children:[(0,U.jsx)(q.C,{src:"".concat(P.lj).concat(null===n||void 0===n?void 0:n.profile),icon:(0,U.jsx)(W.Z,{}),size:30,style:{border:"0.5px solid var(--color-border)"}}),(0,U.jsx)(k.ZT,{color:"dark-sub",size:"sm",className:"ml-1",children:"".concat(null!==n&&void 0!==n&&n.firstName&&null!==n&&void 0!==n&&n.lastName?"".concat(null===n||void 0===n?void 0:n.firstName," ").concat(null===n||void 0===n?void 0:n.lastName):"Assign To")})]}),!0===r&&(0,U.jsx)(w.Z,{})]})})]})},J=o(70815),K=l.Z.Paragraph,Q=function(e){var n=e.record,o=e.onEditIconClick,r=e.reloadTableData,s=e.onLoginAsClick,l=e.onPasswordResetClick,m=e.permissions,f=m.deleteUser,p=m.updateUser,h=m.loginAsOtherUser,g=(0,_.v9)((function(e){return e.usersReducer})).loggedInUserData,Z=null===g||void 0===g?void 0:g.data,x=(0,i.useState)({confirmLoading:!1,openPopConfirm:!1}),j=(0,a.Z)(x,2),k=j[0],w=j[1],P=(0,i.useMemo)((function(){return new R.z}),[]),I=[{key:"1",label:p&&(0,U.jsx)(c.Z,{title:"Edit",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),onClick:function(){return o(n)},children:[(0,U.jsx)("span",{children:(0,U.jsx)("img",{src:"/images/editicon.svg",alt:""})}),"Edit"]})})},{key:"2",label:!0===p?(0,U.jsx)(U.Fragment,{children:null!==Y.Bl&&void 0!==Y.Bl&&Y.Bl.includes(n.email)?(0,U.jsx)(c.Z,{title:"You cannot reset password for super admin.",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),children:[(0,U.jsx)("span",{children:(0,U.jsx)(S.Ob,{color:"#fff",width:18,height:18,style:{cursor:"not-allowed",opacity:"0.6"}})}),"Reset Password"]})}):(0,U.jsx)(c.Z,{title:"Reset Password for this user.",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),onClick:function(){return l(n)},children:[(0,U.jsx)("span",{children:(0,U.jsx)(S.Ob,{color:"#fff",width:18,height:18})}),"Reset Password"]})})}):null},{key:"3",label:!0===p?(0,U.jsx)(c.Z,{title:"Allocate resources to this user.",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),onClick:function(){return o(n,"4")},children:[(0,U.jsx)("span",{children:(0,U.jsx)(y,{style:{color:"#fff"},width:18,height:18})}),"Allocate Resources"]})}):null},{key:"4",label:!0===h&&(0,U.jsx)(c.Z,{title:"Login as ".concat(null===n||void 0===n?void 0:n.firstName," ").concat(null===n||void 0===n?void 0:n.lastName),placement:"left",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),onClick:function(){return s(n)},children:[(0,U.jsx)("span",{children:(0,U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",color:"#fff",width:20,height:20,children:(0,U.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})})}),"Login as ",null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]})})},{key:"5",label:f&&(null===Z||void 0===Z?void 0:Z.id)===(null===n||void 0===n?void 0:n.id)?(0,U.jsx)(c.Z,{title:"You cannot delete yourself.",children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),children:[(0,U.jsx)(b.Z,{className:N.Z.bg__red,style:{cursor:"not-allowed",opacity:"0.2"}}),"Delete"]})}):(0,U.jsx)(u.Z,{open:k.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(w((0,t.Z)((0,t.Z)({},k),{},{confirmLoading:!0})),!1===f)return d.ZP.error("You don't have permission to delete this user, please contact your admin."),void w((0,t.Z)((0,t.Z)({},k),{},{openPopConfirm:!1}));P.deleteRecord(n.id).then((function(e){w((0,t.Z)((0,t.Z)({},k),{},{openPopConfirm:!1,confirmLoading:!1})),r()})).catch((function(e){w((0,t.Z)((0,t.Z)({},k),{},{confirmLoading:!1}))}))},onCancel:function(){return w((0,t.Z)((0,t.Z)({},k),{},{openPopConfirm:!1}))},okButtonProps:{loading:k.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||w((0,t.Z)((0,t.Z)({},k),{},{openPopConfirm:!1}))},children:(0,U.jsxs)("div",{className:"".concat(N.Z.actions," ").concat(C.overlay_card_item),onClick:function(){w((0,t.Z)((0,t.Z)({},k),{},{openPopConfirm:!0}))},children:[(0,U.jsx)(b.Z,{className:N.Z.bg__red}),"Delete"]})})}];return(0,U.jsx)(v.Z,{menu:{items:I},trigger:["click"],children:(0,U.jsx)("span",{style:{cursor:"pointer",padding:"5px"},children:(0,U.jsx)(S.nX,{height:25,width:25,color:"#7e869a"})})})},X={1:"#00A884",2:"#f50"},ee=function(e){var n=e.record,o=e.status,t=e.reloadTableData,r=e.permissions.updateUser,s=d.ZP.useMessage(),l=(0,a.Z)(s,2),c=l[0],u=l[1],p=(0,i.useMemo)((function(){return new R.z}),[]),h=function(e){c.open({key:e.key,type:e.type,content:e.content,duration:"loading"===e.type?0:2})},g=(0,i.useState)(!1),Z=(0,a.Z)(g,2),x=Z[0],j=Z[1],y=(0,U.jsxs)(m.Z,{className:"".concat(C.overlay," pa-2"),children:[u,Object.entries(Y.J0).map((function(e){var i=(0,a.Z)(e,2),s=i[0],l=i[1];return(0,U.jsx)("div",{className:C.overlay_item,onClick:function(){o!==Number(l)&&!0===r&&function(e){null!==n&&void 0!==n&&n.id&&!0===r?(h({key:"update",type:"loading",content:"Updating..."}),p.updateRecord({status:e},null===n||void 0===n?void 0:n.id).then((function(e){var n,o;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&(h({key:"update",type:"success",content:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message}),j(!x),t())})).catch((function(e){var n,o;h({key:"update",type:"error",content:null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message})}))):h({key:"update",type:"error",content:"You don't have permission to change status"})}(Number(l))},children:(0,U.jsx)("span",{className:o===Number(l)?C.disabledButton:"",children:(0,A.kC)(s)})},"user-status-".concat(s))}))]});return(0,U.jsx)("div",{children:(0,U.jsx)(v.Z,{dropdownRender:function(){return y},trigger:!0===r?["click"]:[],open:!0===r&&x,onOpenChange:function(e){j(e)},className:C.dropdown,children:(0,U.jsx)("div",{children:(0,U.jsxs)(f.Z,{style:{backgroundColor:X[o],color:"#fff",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.8rem",display:"flex",width:"100%",justifyContent:"space-between"},children:[Object.entries(Y.J0).map((function(e){var n=(0,a.Z)(e,2),t=n[0];return n[1]===String(o)&&(0,A.kC)(t)})),!0===r&&(0,U.jsx)(w.Z,{})]})})})})};function ne(e){var n=e.tableData,o=e.tableLoading,r=e.onEditIconClick,s=e.reloadTableData,l=e.onManageRolesClick,c=e.meta,u=(0,_.v9)((function(e){return e.usersReducer})).userPermissions,v=u.updateUser,m=u.loginAsOtherUser,f=(0,i.useMemo)((function(){return new R.z}),[]),g=(0,i.useState)({data:[],loading:!1}),Z=(0,a.Z)(g,2),x=Z[0],j=Z[1],y=E.Z.getUserData(),b=function(e){var n;j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!0})})),e={name:(null===(n=e)||void 0===n?void 0:n.name)||""},f.getAllRecords(e).then((function(e){var n,o=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;j({data:o,loading:!1})})).catch((function(e){var n,o;d.ZP.error((null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Something went wrong"),j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!1})}))}))},w=function(e,n){return f.updateRecord({enableRemoteCheckin:e},n)},C=(0,i.useState)({isOpen:!1,record:void 0}),I=(0,a.Z)(C,2),M=I[0],z=I[1],T=function(e){!0===v?z({isOpen:!0,record:e}):d.ZP.error("You don't have permission to reset password for ".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName))},D=(0,i.useState)({isOpen:!1,record:void 0}),L=(0,a.Z)(D,2),Y=L[0],V=L[1],B=function(e){!0===m?(V({isOpen:!0,record:e}),(0,A.Eq)()):d.ZP.error("You don't have permission to login as ".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName))},q=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,o){return(0,U.jsx)(U.Fragment,{children:(0,A.k7)(o,c)})},width:"5%"},{title:"Name",dataIndex:"name",key:"name",render:function(e,n){return(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{style:{display:"flex"},children:(0,U.jsx)("a",{href:y.id===n.id||null!==u&&void 0!==u&&u.manageAllUser?"/employees/"+n.id:void 0,children:(0,U.jsx)(k.ZT,{color:"dark-main",size:"sm",weight:"bold",className:"my-auto mr-1",children:"".concat(n.firstName," ").concat(n.lastName)})})}),(0,U.jsx)("div",{children:(0,U.jsx)(K,{ellipsis:{rows:1,expandable:!1},className:"my-0 color-dark-sub",children:(0,U.jsx)("a",{href:"mailto:".concat(n.email),className:"font-size-xs",children:(0,U.jsx)("span",{className:"color-dark-sub",children:n.email})})})}),(0,U.jsx)("div",{children:n.phone?(0,U.jsx)("a",{href:"tel:".concat(n.phone),className:"color-dark-sub font-size-xs",children:null!==n.phone&&null!==n.phoneCode?"+"+(null===n||void 0===n?void 0:n.phoneCode)+n.phone:"N/A"}):(0,U.jsx)(k.ZT,{color:"dark-sub",size:"xs",children:"N/A"})}),(0,U.jsx)("div",{children:(0,U.jsxs)(K,{className:"font-size-xs color-dark-sub mb-0",title:n.id.toString(),children:["Employee ID: ",n.id]})}),n.addedDate&&(0,U.jsxs)("div",{className:"d-flex mt-2",children:[(0,U.jsx)(S.$$,{className:"mr-2"}),(0,U.jsx)(k.ZT,{color:"dark-sub",size:"sm",children:"".concat((0,H.Ny)(n.addedDate,"dd MM yy"))})]})]})}},{title:"Profile",dataIndex:"profile",key:"profile",render:function(e){return e?(0,U.jsx)(p.Z,{width:80,height:80,src:"".concat(P.lj).concat(e),preview:!1,rootClassName:"object-fit-cover",style:{borderRadius:"50%",border:"0.5px solid var(--color-border)"}}):(0,U.jsx)(U.Fragment,{})}},{title:"Designation",dataIndex:"designation",key:"designation",render:function(e){return(0,U.jsx)(k.ZT,{color:"dark-sub",size:"xs",children:e||""})}}];return u.manageAllUser&&q.push({title:"Manager",dataIndex:"Manager",key:"Manager",render:function(e,n){return(0,U.jsx)(G,{Manager:e,userId:n.id,permissions:u,loading:x.loading,users:x.data,getUsers:b,reloadTableData:s})}},{title:"Role",dataIndex:"role",key:"role",render:function(e,n){var o;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(K,{ellipsis:{rows:1,expandable:!1},className:"my-0 color-dark-sub",children:(0,U.jsx)("ul",{style:{listStyle:"none",padding:0},children:null===(o=n.userRole)||void 0===o?void 0:o.map((function(e){return(0,U.jsx)("li",{className:"font-size-xs ml-0",children:e.Role.title})}))})}),(0,U.jsx)("p",{className:"color-dark-main font-weight-bold font-size-sm mb-0 ml-1 cursor-pointer",onClick:function(){return l(n)},children:"Manage Roles"})]})}},{title:"Remote Checkin",dataIndex:"enableRemoteCheckin",key:"enableRemoteCheckin",render:function(e,n){return(0,U.jsx)(J.r,{checked:e,onChange:w,recordId:n.id})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,n){return(0,U.jsx)(ee,{status:e,record:n,reloadTableData:s,permissions:u})},width:"150px"}),(null!==u&&void 0!==u&&u.manageAllUser||null!==u&&void 0!==u&&u.deleteUser)&&q.push({title:"Actions",dataIndex:"actions",key:"actions",render:function(e,n){return(0,U.jsx)(Q,{record:n,onEditIconClick:r,reloadTableData:s,onPasswordResetClick:T,onLoginAsClick:B,permissions:u})},width:"7.5%"}),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:N.Z.antdTableWrapper,children:(0,U.jsx)(h.Z,{sticky:!0,dataSource:n,columns:q,pagination:!1,scroll:{x:991},loading:o,rowKey:function(e){return"site-user-".concat(e.id)}})}),M.isOpen&&(0,U.jsx)(O,{isOpen:M.isOpen,handleCancel:function(){return z((0,t.Z)((0,t.Z)({},M),{},{isOpen:!1}))},record:M.record,updateUser:v}),Y.isOpen&&(0,U.jsx)(F,{isOpen:Y.isOpen,handleCancel:function(){return V((0,t.Z)((0,t.Z)({},Y),{},{isOpen:!1}))},record:Y.record,loginAsOtherUser:m})]})}var oe=o(4942),te=o(37831),ae=function(e){return e[e.active=1]="active",e[e.suspended=2]="suspended",e}({}),ie=o(6056),re=o(41746),se=o(70584),le=o(38859),de=o(5190),ce=o(29079),ue=o(99420),ve=o(93433);function me(e){var n=(0,i.useState)({data:[],loading:!1}),o=(0,a.Z)(n,2),r=o[0],s=o[1];return{state:r,search:(0,i.useCallback)((function(n){void 0===n.name&&void 0===n.title||(s((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!0})})),e(n).then((function(e){var n=e.data.data;s((function(e){var o=null===n||void 0===n?void 0:n.filter((function(n){return!(null!==e&&void 0!==e&&e.data.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.id})))}));return{data:[].concat((0,ve.Z)(e.data),(0,ve.Z)(o)),loading:!1}}))})).catch((function(e){var n,o;d.ZP.error((null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Something went wrong"),s((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!1})}))})))}),[])}}var fe=function(e){var n,o,r=e.selectedFilters,s=e.setSelectedFilters,l=e.onUpdate,d=(0,i.useState)(void 0),c=(0,a.Z)(d,2),u=c[0],v=c[1],m=(0,$.N)(u,500),f=(0,i.useState)(void 0),p=(0,a.Z)(f,2),h=p[0],g=p[1],Z=(0,$.N)(h,500),x=(0,i.useState)(void 0),j=(0,a.Z)(x,2),y=j[0],b=j[1],k=(0,$.N)(y,500),w=(0,i.useState)([]),N=(0,a.Z)(w,2),C=N[0],P=N[1],_=(0,i.useState)(!1),S=(0,a.Z)(_,2),I=S[0],M=S[1],z=(0,i.useMemo)((function(){return new R.z}),[]),T=(0,i.useMemo)((function(){return new le.o}),[]),D=(0,i.useMemo)((function(){return new de.L}),[]),O=(0,i.useMemo)((function(){return new ue.U}),[]),L=(0,ce.$5)({method:T.getAllPublishedRecords}).data,E=(0,ce.$5)({method:D.findPublished}).data,F=me(z.getAllRecords),Y=F.state,H=F.search,V=me(O.getAllRecords),B=V.state,q=V.search,W=function(e){var n=null===e||void 0===e?void 0:e.target,o=n.name,a=n.value;s((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,oe.Z)({},o,a))}))},G=(0,i.useCallback)((function(e,n){e&&(M(!0),s((0,t.Z)((0,t.Z)({},r),{},(0,oe.Z)({},e,n))))}),[r]),J=(0,i.useCallback)((function(){l(void 0!==m?{name:m}:{name:void 0})}),[m]);(0,i.useEffect)((function(){J()}),[J]),(0,i.useEffect)((function(){H({name:Z})}),[Z,H]),(0,i.useEffect)((function(){q({title:k})}),[k,q]),(0,i.useEffect)((function(){I&&l();var e=setTimeout((function(){M(!1)}),2e3);return function(){return clearTimeout(e)}}),[I,r,l]);var K=[{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Employees",value:"ids"},{label:"Roles",value:"roleIds"}],Q={email:(0,U.jsx)(ie.Z,{type:"email",label:"Email",name:"email",value:null===r||void 0===r?void 0:r.email,onChange:W,onReset:function(){return G("email","")},onUpdate:l,defaultVisible:C.includes("email")}),phone:(0,U.jsx)(ie.Z,{type:"input",label:"Phone",name:"phone",value:null===r||void 0===r?void 0:r.phone,onChange:W,onReset:function(){return G("phone","")},onUpdate:l,defaultVisible:C.includes("phone")}),ids:(0,U.jsx)(ie.Z,{type:"multiSelect",label:"Employees",name:"ids",withSearch:!0,options:null===Y||void 0===Y||null===(n=Y.data)||void 0===n?void 0:n.map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})),onChange:function(e){return s((function(n){return(0,t.Z)((0,t.Z)({},n),{},{ids:e})}))},onReset:function(){M(!0),G("ids",[]),g("")},defaultVisible:C.includes("ids"),onUpdate:l,loading:Y.loading,searchTerm:h||"",onSearch:function(e){return g(e.currentTarget.value)}}),roleIds:(0,U.jsx)(ie.Z,{type:"multiSelect",label:"Roles",name:"roleIds",withSearch:!0,options:null===B||void 0===B||null===(o=B.data)||void 0===o?void 0:o.map((function(e){return{label:"".concat(e.title),value:"".concat(e.id)}})),onChange:function(e){return s((function(n){return(0,t.Z)((0,t.Z)({},n),{},{roleIds:e})}))},onReset:function(){M(!0),G("roleIds",[]),b("")},defaultVisible:C.includes("roleIds"),onUpdate:l,loading:B.loading,searchTerm:y||"",onSearch:function(e){return b(e.currentTarget.value)}})};return(0,U.jsxs)("div",{className:"mt-5 align-center",children:[(0,U.jsx)("div",{children:(0,U.jsx)(te.Z,{value:u,onChange:function(e){return v(e.target.value)},size:"w100",placeHolder:"Search by Name",icon:(0,U.jsx)("img",{src:"/images/searchIcon.svg",alt:""})})}),(0,U.jsx)("div",{children:(0,U.jsx)(ie.Z,{type:"radio",label:"Organization",name:"organizationId",options:(null===E||void 0===E?void 0:E.map((function(e){return{label:e.name,value:String(e.id)}})))||[],value:String(null===r||void 0===r?void 0:r.organizationId),onChange:W,onReset:function(){return G("organizationId","")},onUpdate:l})}),(0,U.jsx)("div",{children:(0,U.jsx)(ie.Z,{type:"radio",label:"Department",name:"departmentId",options:(null===L||void 0===L?void 0:L.map((function(e){return{label:e.title,value:String(e.id)}})))||[],value:String(null===r||void 0===r?void 0:r.departmentId),onChange:W,onReset:function(){return G("departmentId","")},onUpdate:l})}),(0,U.jsx)("div",{children:(0,U.jsx)(ie.Z,{type:"radio",label:"Status",name:"status",options:(0,se.hx)(ae).map((function(e){return{label:(0,A.kC)(e.label),value:String(e.value)}})),value:String(null===r||void 0===r?void 0:r.status),onChange:W,onReset:function(){return G("status","")},onUpdate:l})}),(0,U.jsx)("div",{children:(0,U.jsx)(ie.Z,{type:"datepicker",label:"Registered Date",name:"dateRange",onChange:function(e){return s((function(n){return(0,t.Z)((0,t.Z)({},n),{},{dateRange:e})}))},onReset:function(){return G("dateRange",[])},onUpdate:l})}),Object.keys(Q).map((function(e){var n=e;return null!==C&&void 0!==C&&C.includes(n)?Q[n]:null})),(0,U.jsx)("div",{children:(0,U.jsx)(re.Z,{options:null===K||void 0===K?void 0:K.map((function(e){return{label:e.label,value:e.value}})),onChange:function(e){return P(e)},value:C})})]})},pe=o(7655),he=o(49355),ge=o(46646),Ze=o(40169),xe=function(e){var n,o,r=e.openModal,s=e.onCancel,l=e.record,c=e.reloadTableData,u=e.recordData,v=e.permissions.addUserRole,m=T.Z.useForm(),f=(0,a.Z)(m,1)[0],p=(0,i.useMemo)((function(){return new R.z}),[]),h=(0,i.useMemo)((function(){return new ue.U}),[]),g=(0,i.useState)(),Z=(0,a.Z)(g,2),x=Z[0],j=Z[1],y=[];u&&u.userRole&&(null===u||void 0===u||null===(o=u.userRole)||void 0===o||o.map((function(e){y.push(e.Role.id.toString())})));var b=(0,i.useState)(y),w=(0,a.Z)(b,2),C=w[0],P=w[1],_=function(e){var n=(0,Ze.P)(e);if("string"==typeof n.message)j((0,t.Z)((0,t.Z)({},x),{},{error:n.message}));else{var o=(0,ge.O)(n.message,[]);f.setFields(o),j((0,t.Z)((0,t.Z)({},x),{},{error:""}))}},S=(0,i.useCallback)((function(){h.getAllRecords().then((function(e){var n;e.data&&null!==(n=e.data)&&void 0!==n&&n.data&&j((0,t.Z)((0,t.Z)({},e.data),{},{loading:!1}))})).catch((function(e){_(e)}))}),[f,l,p,h]);(0,i.useEffect)((function(){j({loading:!0}),S()}),[r,f]);return(0,U.jsx)(k.P0,{visible:r,closable:!0,onCancel:s,titleText:"Manage Roles",showFooter:!1,children:null!==x&&void 0!==x&&x.loading?(0,U.jsx)(he.Z,{items:10}):(0,U.jsxs)(T.Z,{className:N.Z.form,onFinish:function(e){if(e.roleIds)if(!0===v){var n;j((0,t.Z)((0,t.Z)({},x),{},{buttonLoading:!0}));var o=null===e||void 0===e||null===(n=e.roleIds)||void 0===n?void 0:n.map((function(e){return Number(e)}));p.addRoles({roleIds:o},l).then((function(e){c(),s(),j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!1})})),d.ZP.success("Saved Successfully")})).catch((function(e){_(e),j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:!1})}))}));var a=[];y.map((function(e){C.includes(e)||a.push(Number(e))})),(null===a||void 0===a?void 0:a.length)>0&&p.removeRoles({roleIds:a},l).catch((function(e){d.ZP.error(e.message)}))}else d.ZP.error("You don't have permission to manage roles, please contact your admin");else d.ZP.success("No changes made"),s()},form:f,children:[(null===x||void 0===x?void 0:x.error)&&(0,U.jsx)(k.EQ,{description:null===x||void 0===x?void 0:x.error,isClosable:!0,onClose:function(){j((0,t.Z)((0,t.Z)({},x),{},{error:""}))}}),(0,U.jsx)("div",{children:(0,U.jsx)(T.Z.Item,{name:"roleIds",rules:[{required:!1}],children:(0,U.jsx)(pe.Z,{dataSource:null===x||void 0===x||null===(n=x.data)||void 0===n?void 0:n.map((function(e,n){var o;return{key:e.id.toString(),title:e.title,description:null===(o=e.title)||void 0===o?void 0:o.toLowerCase()}})),listStyle:{width:250,height:400},showSearch:!0,filterOption:function(e,n){var o;return(null===n||void 0===n||null===(o=n.description)||void 0===o?void 0:o.indexOf(null===e||void 0===e?void 0:e.toLowerCase()))>-1},targetKeys:C,onChange:function(e){P(e)},render:function(e){return e.title}})})}),(0,U.jsxs)("div",{className:N.Z.footer,children:[(0,U.jsx)(k.op,{size:"normal",fontSize:"sm",onClick:s,type:"plain",children:"Cancel"}),(0,U.jsx)(k.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===x||void 0===x?void 0:x.buttonLoading,children:"Save"})]})]})})},je=o(18515),ye=o(18136),be=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Employees"}],ke=function(){var e=(0,A.aY)(ye.f),n=(0,_.v9)((function(e){return e.usersReducer})).userPermissions,o=n.readUser,l=n.createUser,c=n.updateUser,u=n.addUserRole,v=(0,i.useState)({editType:"new",recordId:0,openModal:!1,form:"1"}),m=(0,a.Z)(v,2),f=m[0],p=m[1],h=(0,i.useState)({recordId:0,openModal:!1,recordData:{}}),g=(0,a.Z)(h,2),Z=g[0],x=g[1],j=(0,i.useMemo)((function(){return new R.z}),[]),y=(0,ce.$5)({method:j.getAllRecords}),b=y.data,w=y.meta,N=y.onRefresh,C=y.loading,P=(0,i.useState)({dateRange:[]}),S=(0,a.Z)(P,2),I=S[0],M=S[1],z=function(){!1!==l?p((0,t.Z)((0,t.Z)({},f),{},{openModal:!f.openModal,editType:"new",recordId:0,form:"1"})):d.ZP.error("You don't have permission to create new user")},T=(0,i.useCallback)((function(e){var n,o,a=(null===(n=I.dateRange)||void 0===n?void 0:n[0])||"",i=(null===(o=I.dateRange)||void 0===o?void 0:o[1])||"",r=a?(0,H.Ny)(a,"yy-mm-dd"):void 0,s=i?(0,H.Ny)(i,"yy-mm-dd"):void 0,l=(0,t.Z)({fromDate:r,toDate:s,status:I.status||void 0,name:I.name||void 0,organizationId:I.organizationId||void 0,departmentId:I.departmentId||void 0,userType:I.userType||void 0,ids:I.ids||void 0,roleIds:I.roleIds||void 0,roleSlugs:I.roleSlugs||void 0,departmentSlug:I.departmentSlug||void 0,email:I.email||void 0,phone:I.phone||void 0,perPage:I.perPage||void 0,page:I.page||void 0},e);N(l)}),[I,N]);return(0,U.jsxs)(r.Z,{permissionSlug:e,children:[(0,U.jsx)(k.mr,{heading:"Employees",buttonText:"Add New Employee",onButtonClick:z,breadCrumbData:be,showAdd:!!l,filters:!0===o?(0,U.jsx)(fe,{selectedFilters:I,setSelectedFilters:M,onUpdate:T}):null}),!0===o&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ne,{tableData:b||[],tableLoading:C,onEditIconClick:function(e,n){!1!==c?p((0,t.Z)((0,t.Z)({},f),{},{editType:"edit",recordId:e.id,openModal:!0,form:n||"1"})):d.ZP.error("You don't have permission to update this user")},reloadTableData:T,onManageRolesClick:function(e){!1!==u?x((0,t.Z)((0,t.Z)({},Z),{},{recordId:e.id,recordData:e,openModal:!0})):d.ZP.error("You don't have permission to manage roles for this user")},meta:w}),(0,U.jsx)(k.tl,{total:(null===w||void 0===w?void 0:w.total)||0,current:(null===w||void 0===w?void 0:w.page)||1,defaultPageSize:null!==w&&void 0!==w&&w.perPage?null===w||void 0===w?void 0:w.perPage:10,pageSizeOptions:[10,20,50,100],onChange:function(e,n){T({page:e,perPage:n}),M((function(o){return(0,t.Z)((0,t.Z)({},o),{},{page:e,perPage:n})}))}})]}),!1===o&&(0,U.jsx)(je.a$,{mainMessage:"You don't have permission to view this data"}),f.openModal&&(0,U.jsx)(s.o,{record:f.recordId,type:f.editType,reloadTableData:T,onCancel:z,openModal:f.openModal,permissions:n,currentForm:f.form}),Z.openModal&&(0,U.jsx)(xe,{record:Z.recordId,recordData:Z.recordData,type:"edit",reloadTableData:T,onCancel:function(){return x((0,t.Z)((0,t.Z)({},Z),{},{openModal:!1}))},openModal:Z.openModal,permissions:n})]})}},95980:function(e,n,o){"use strict";o.d(n,{c:function(){return l}});var t=o(1413),a=o(43144),i=o(15671),r=o(3135),s=o(49075),l=(0,a.Z)((function e(){var n=this;(0,i.Z)(this,e),this.endPoint="leave-request",this.getAllRecords=function(e){return s.Z.get(s._+n.endPoint,{params:(0,t.Z)({sortByField:"order",sortOrder:"asc",perPage:4},e)})},this.getOwnRecords=function(e){return s.Z.get(s._+n.endPoint+"/own",{params:(0,t.Z)({},e)})},this.getRecordById=function(e){return s.Z.get(s._+n.endPoint+"/findOne/"+e)},this.getLeavesRecordById=function(e){return s.Z.get(s._+n.endPoint+"/findLeavesReportOfUser/"+e)},this.deleteRecord=function(e){return s.Z.delete(s._+n.endPoint+"/remove/"+e)},this.createRecord=function(e){return s.Z.post(s._+n.endPoint,e,{headers:r.C})},this.withdrawLeaveRequest=function(e){return s.Z.patch(s._+n.endPoint+"/withdraw/".concat(e))},this.employeeActionLeaveRequest=function(e){return s.Z.patch(s._+n.endPoint+"/submitRequest/".concat(e))},this.hrActionLeaveRequest=function(e,o){return s.Z.patch(s._+n.endPoint+"/hrAction/".concat(o),e)},this.projectManagerActionLeaveRequest=function(e,o){return console.log(o,"id"),s.Z.patch(s._+n.endPoint+"/projectManagerAction/".concat(o),e)},this.financeActionLeaveRequest=function(e,o){return s.Z.patch(s._+n.endPoint+"/financeAction/".concat(o),e)}}))},70584:function(e,n,o){"use strict";o.d(n,{HH:function(){return s},JY:function(){return r},Ug:function(){return l},hx:function(){return i},vA:function(){return c},xy:function(){return d}});var t=o(29439),a=o(37936),i=function(e){return Object.entries(e).filter((function(e){var n=(0,t.Z)(e,1)[0];return isNaN(Number(n))})).map((function(e){var n=(0,t.Z)(e,2);return{label:n[0],value:n[1]}}))},r=i(a.dq),s=i(a.B1),l=i(a.LN),d=i(a.PH),c=i(a.fk)},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);