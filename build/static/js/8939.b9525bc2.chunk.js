"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[8939],{87971:function(e,n,t){var r=t(1413),o=t(45987),i=t(47313),a=t(86136),s=t(37388),d=t(67907),c=t(1623),l=t(46417),u=["label","hint","asterisk","helperText","className"],p=a.Z.TextArea,h=(0,i.forwardRef)((function(e,n){var t=e.label,i=e.hint,a=e.asterisk,h=e.helperText,f=e.className,Z=(0,o.Z)(e,u);return(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsxs)("label",{className:c.Z.labelWrap,children:[(0,l.jsx)("span",{children:t}),i?(0,l.jsx)(s.Z,{title:i,children:(0,l.jsx)(d.Z,{})}):null,a?(0,l.jsx)("span",{className:c.Z.asterisk,children:"*"}):null]}):null,(0,l.jsx)(p,(0,r.Z)((0,r.Z)({ref:n},Z),{},{className:"".concat(c.Z.inpt," ").concat(f)})),h?(0,l.jsx)("small",{className:c.Z.helperText,children:h}):null]})}));h.defaultProps={autoSize:{minRows:4},placeholder:"Enter text here",asterisk:!1,hint:""},n.Z=h},70815:function(e,n,t){t.d(n,{r:function(){return p}});var r=t(1413),o=t(29439),i=t(45987),a=t(55291),s=t(86345),d=t(47313),c=t(40169),l=t(46417),u=["onChange","checked","recordId","allowChange"],p=function(e){var n=e.onChange,t=e.checked,p=e.recordId,h=e.allowChange,f=void 0===h||h,Z=(0,i.Z)(e,u),m=(0,d.useState)({loading:!1,checked:!1}),g=(0,o.Z)(m,2),x=g[0],b=g[1];return(0,d.useEffect)((function(){b((0,r.Z)((0,r.Z)({},x),{},{checked:t}))}),[t]),(0,l.jsx)(s.Z,{checked:x.checked,onChange:function(e){!0===f?(b((0,r.Z)((0,r.Z)({},x),{},{loading:!0})),n(e,p,Z).then((function(n){b((0,r.Z)((0,r.Z)({},x),{},{checked:e,loading:!1})),a.ZP.success(n.data.message)})).catch((function(e){b((0,r.Z)((0,r.Z)({},x),{},{loading:!1}));var n=(0,c.P)(e);"string"===typeof n.message?a.ZP.error(n.message):a.ZP.error("Something went wrong")}))):a.ZP.error("You don't have permission to change this record, please contact your admin.")},loading:x.loading})}},58939:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var r=t(1413),o=t(29439),i=t(47313),a=t(7532),s=t(25019),d=t(55291),c=t(82626),l=t(17327),u=t(49355),p=t(46646),h=t(40169),f=t(3798),Z=t(53119),m=t(87971),g=t(46417),x=function(e){var n=e.openModal,t=e.onCancel,a=e.type,x=e.record,b=e.reloadTableData,v=e.permissions,j=v.updateAlertsType,y=v.createAlertsType,P=s.Z.useForm(),k=(0,o.Z)(P,1)[0],T=(0,i.useMemo)((function(){return new Z.b}),[]),C=(0,i.useState)(),A=(0,o.Z)(C,2),w=A[0],I=A[1],N=function(e){var n=(0,h.P)(e);if("string"==typeof n.message)I((0,r.Z)((0,r.Z)({},w),{},{error:n.message}));else{var t=(0,p.O)(n.message,[]);k.setFields(t),I((0,r.Z)((0,r.Z)({},w),{},{error:""}))}},R=(0,i.useCallback)((function(){T.getRecordById(x).then((function(e){e.data&&e.data.data&&(k.setFieldsValue((0,r.Z)((0,r.Z)({},e.data.data),{},{translations:e.data.data.localization,isPublished:e.data.data.isPublished})),I((0,r.Z)((0,r.Z)({},e.data),{},{loading:!1})))})).catch((function(e){N(e)}))}),[k,x,T]);(0,i.useEffect)((function(){"edit"===a?(I({loading:!0}),R()):k.resetFields()}),[n,a,k,R]);return(0,g.jsx)(c.P0,{visible:n,closable:!0,onCancel:t,titleText:"edit"===a?"Edit Alerts Type":"Add New Alerts Type",showFooter:!1,children:null!==w&&void 0!==w&&w.loading?(0,g.jsx)(u.Z,{items:10}):(0,g.jsxs)(s.Z,{className:l.Z.form,onFinish:function(e){switch(a){case"edit":!0===j?(I((0,r.Z)((0,r.Z)({},w),{},{buttonLoading:!0})),T.updateRecord((0,r.Z)({},e),null===w||void 0===w?void 0:w.data.id).then((function(e){b(),t(),I((function(e){return(0,r.Z)((0,r.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){N(e),I((function(e){return(0,r.Z)((0,r.Z)({},e),{},{buttonLoading:!1})}))}))):d.ZP.error("You don't have permission to update this record");break;case"new":!0===y?(I((0,r.Z)((0,r.Z)({},w),{},{buttonLoading:!0})),T.createRecord(e).then((function(e){b(),t(),I((function(e){return(0,r.Z)((0,r.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){N(e),I((function(e){return(0,r.Z)((0,r.Z)({},e),{},{buttonLoading:!1})}))}))):d.ZP.error("You don't have permission to create this record")}},form:k,children:[(null===w||void 0===w?void 0:w.error)&&(0,g.jsx)(c.EQ,{description:null===w||void 0===w?void 0:w.error,isClosable:!0,onClose:function(){I((0,r.Z)((0,r.Z)({},w),{},{error:""}))}}),(0,g.jsx)("div",{children:(0,g.jsx)(s.Z.Item,{name:"title",rules:[{required:!0,message:"Please add title"}],children:(0,g.jsx)(c.t7,{size:"w100",label:"Title",asterisk:!0,type:"text"})})}),(0,g.jsx)("div",{children:(0,g.jsx)(s.Z.Item,{name:"description",rules:[{required:!0,message:"Please add description"}],children:(0,g.jsx)(m.Z,{label:"Description",asterisk:!0})})}),(0,g.jsx)("div",{children:(0,g.jsx)(s.Z.Item,{name:"slug",rules:[{required:!0,message:"Please add slug"}],children:(0,g.jsx)(c.t7,{size:"w100",label:"Slug",asterisk:!0,type:"text",onChange:function(e){var n=e.target,t=(0,f.V3)(n.value);k.setFieldsValue({slug:t})}})})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(s.Z.Item,{name:"forAdminpanel",children:(0,g.jsx)(c.AP,{label:"For Admin Panel",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}]})}),(0,g.jsx)(s.Z.Item,{name:"isPublished",children:(0,g.jsx)(c.AP,{label:"Published",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}]})})]}),(0,g.jsxs)("div",{className:l.Z.footer,children:[(0,g.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:t,type:"plain",children:"Cancel"}),(0,g.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===w||void 0===w?void 0:w.buttonLoading,children:"Submit"})]})]})})},b=t(74165),v=t(15861),j=t(5900),y=t(41586),P=t(98676),k=t(3109),T=t(32147),C=t(98505),A=t(70815),w=t(85554),I=function(e){var n=e.record,t=e.onEditIconClick,a=e.reloadTableData,s=e.permissions,c=s.deleteAlertsType,u=s.updateAlertsType,p=(0,i.useState)({confirmLoading:!1,openPopConfirm:!1}),h=(0,o.Z)(p,2),f=h[0],m=h[1],x=(0,i.useMemo)((function(){return new Z.b}),[]);return(0,g.jsxs)("div",{className:l.Z.actions,children:[(0,g.jsx)("span",{onClick:function(){!1!==u?t(n):d.ZP.error("You don't have permission to edit this record, please contact your admin.")},children:(0,g.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,g.jsx)(j.Z,{open:f.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(!1===c)return d.ZP.error("You don't have permission to delete this record, please contact your admin."),void m((0,r.Z)((0,r.Z)({},f),{},{openPopConfirm:!1}));m((0,r.Z)((0,r.Z)({},f),{},{confirmLoading:!0})),x.deleteRecord(n.id).then((function(e){m((0,r.Z)((0,r.Z)({},f),{},{openPopConfirm:!1,confirmLoading:!1})),a()})).catch((function(e){var n,t;m((0,r.Z)((0,r.Z)({},f),{},{confirmLoading:!1})),d.ZP.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)}))},onCancel:function(){return m((0,r.Z)((0,r.Z)({},f),{},{openPopConfirm:!1}))},okButtonProps:{loading:f.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||m((0,r.Z)((0,r.Z)({},f),{},{openPopConfirm:!1}))},children:(0,g.jsx)(P.Z,{className:l.Z.bg__red,onClick:function(){m((0,r.Z)((0,r.Z)({},f),{},{openPopConfirm:!0}))}})})]})};function N(e){var n=(0,w.v9)((function(e){return e.usersReducer})).userPermissions,t=e.tableData,r=e.tableLoading,o=e.onEditIconClick,i=e.reloadTableData,a=new Z.b,s=function(){var e=(0,v.Z)((0,b.Z)().mark((function e(n,t){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.updateRecord({isPublished:n},t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),d=function(){var e=(0,v.Z)((0,b.Z)().mark((function e(n,t){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.updateRecord({forAdminpanel:n},t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),c=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1},width:"6%"},{title:"Title",dataIndex:"title",key:"title",render:function(e,n){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.Z,{color:"dark-main",size:"normal",children:e}),(0,g.jsx)(k.Z,{color:"dark-main",size:"xs",children:"Description: ".concat(n.description)}),(0,g.jsx)(k.Z,{color:"dark-main",size:"xs",className:"my-1",children:"Slug: ".concat(n.slug)}),(0,g.jsxs)("div",{className:"d-flex mt-1",children:[(0,g.jsx)(T.$$,{className:"mr-2"}),(0,g.jsx)(k.Z,{color:"dark-sub",size:"sm",children:"".concat((0,C.Ny)(n.addedDate,"dd MM yy"))})]})]})},width:"30%"},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:function(e,t){return(0,g.jsx)(A.r,{checked:e,onChange:function(){return s(e,t.id)},recordId:t.id,allowChange:n.updateAlertsType})}},{title:"For Admin Panel",dataIndex:"forAdminpanel",key:"forAdminpanel",render:function(e,t){return(0,g.jsx)(A.r,{checked:e,onChange:d,recordId:t.id,allowChange:n.updateAlertsType})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return(0,g.jsx)(I,{record:t,onEditIconClick:o,reloadTableData:i,permissions:n})}}];return(0,g.jsx)("div",{className:l.Z.antdTableWrapper,children:(0,g.jsx)(y.Z,{sticky:!0,dataSource:t,columns:c,pagination:!1,scroll:{x:991},loading:r,rowKey:function(e){return"site-alert-type-".concat(e.id)}})})}var R=function(e){return e.CREATE="createAlertsType",e.UPDATE="updateAlertsType",e.DELETE="deleteAlertsType",e.READ="readAlertsType",e}({}),S=t(18515),L=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Alerts Type"}];var E=function(){var e=(0,f.aY)(R),n=(0,w.v9)((function(e){return e.usersReducer})).userPermissions,t=n.readAlertsType,s=n.createAlertsType,l=(0,i.useState)({editType:"new",recordId:0,openModal:!1}),u=(0,o.Z)(l,2),p=u[0],h=u[1],m=new Z.b,b=(0,i.useState)({data:[]}),v=(0,o.Z)(b,2),j=v[0],y=v[1],P=function(){!1!==s?h((0,r.Z)((0,r.Z)({},p),{},{openModal:!p.openModal,editType:"new"})):d.ZP.error("You don't have permission to create new record")},k=function(){y((0,r.Z)((0,r.Z)({},j),{},{loading:!0})),m.getAllRecords().then((function(e){y(e.data)})).catch((function(e){}))};return(0,i.useEffect)((function(){k()}),[]),(0,g.jsxs)(a.default,{permissionSlug:e,children:[(0,g.jsx)(c.mr,{heading:"Alerts Type",buttonText:"Add New Alert Type",onButtonClick:P,breadCrumbData:L,showAdd:!0===s}),!0===t&&(0,g.jsx)(N,{tableData:j.data,tableLoading:j.loading,onEditIconClick:function(e){h((0,r.Z)((0,r.Z)({},p),{},{editType:"edit",recordId:e.id,openModal:!0}))},reloadTableData:k}),!1===t&&(0,g.jsx)(S.a$,{mainMessage:"You don't have permission to view this data"}),p.openModal&&(0,g.jsx)(x,{record:p.recordId,type:p.editType,reloadTableData:k,onCancel:P,openModal:p.openModal,permissions:n})]})}},53119:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(43144),o=t(15671),i=t(49075),a=(0,r.Z)((function e(){var n=this;(0,o.Z)(this,e),this.endPoint="alerts-type",this.getAllRecords=function(){return i.Z.get("".concat(n.endPoint))},this.getPublishedAlerts=function(){return i.Z.get("".concat(n.endPoint,"/find-published"))},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.getRecordBySlug=function(e){return i.Z.get("".concat(n.endPoint,"/find-by-slug/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint,e)},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e)},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))}}))}}]);