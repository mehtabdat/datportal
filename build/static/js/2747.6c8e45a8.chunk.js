"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[2747],{52747:function(e,t,n){n.d(t,{o:function(){return ye}});var a=n(29439),i=n(97258),o=n(6929),r=n(74165),s=n(15861),l=n(1413),d=n(93433),c=n(31513),u=n(25019),m=n(55291),h=n(14254),f=n(98276),p=n(69309),v=n(82626),Z=n(3113),g="styles_Tasktitle__DDAlS",x="styles_resourceWrap__+HiUC",j="styles_deleteWrap__hRRXB",y="styles_image__eN4V2",b="styles_date_picker__A+agM",P=n(47313),S=n(48897),C=n(46646),w=n(40169),N=n(84825),I=n(59816),z=n(42623),k=n(5190),R=n(99420),F=n(38859),A=n(37936),L=n(49355),D=n(3798),E=n(70816),T=n.n(E),M=n(46417),U=c.Z.Option,O=function(e){var t,n,i,o,g,x,j,y,E,O,_,B,V,q=e.type,W=e.record,H=e.openModal,Y=e.onCancel,J=e.createUser,Q=e.updateUser,K=e.manageAllUser,$=e.reloadTableData,G=u.Z.useForm(),X=(0,a.Z)(G,1)[0],ee=(0,P.useMemo)((function(){return new N.z}),[]),te=(0,P.useState)([]),ne=(0,a.Z)(te,2),ae=ne[0],ie=ne[1],oe=(0,P.useState)(""),re=(0,a.Z)(oe,2),se=re[0],le=re[1],de=(0,z.N)(se,500),ce=(0,P.useState)([]),ue=(0,a.Z)(ce,2),me=ue[0],he=ue[1],fe=(0,P.useState)(""),pe=(0,a.Z)(fe,2),ve=pe[0],Ze=pe[1],ge=(0,z.N)(ve,500),xe=(0,P.useState)([]),je=(0,a.Z)(xe,2),ye=je[0],be=je[1],Pe=(0,P.useState)(!0),Se=(0,a.Z)(Pe,2),Ce=Se[0],we=Se[1],Ne=(0,P.useMemo)((function(){return new k.L}),[]),Ie=(0,P.useMemo)((function(){return new N.z}),[]),ze=(0,P.useMemo)((function(){return new F.o}),[]),ke=(0,P.useMemo)((function(){return new I.Y}),[]),Re=(0,P.useMemo)((function(){return new R.U}),[]),Fe=(0,P.useState)(),Ae=(0,a.Z)(Fe,2),Le=Ae[0],De=Ae[1],Ee=(0,P.useState)([]),Te=(0,a.Z)(Ee,2),Me=Te[0],Ue=Te[1],Oe=(0,P.useState)([]),_e=(0,a.Z)(Oe,2),Be=_e[0],Ve=_e[1];(0,P.useEffect)((function(){Ne.findPublished().then((function(e){ie((function(t){var n,a,i=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,d.Z)(t),(0,d.Z)(i))}))})).catch((function(e){var t=(0,D.S3)(e);m.ZP.error(t||"Something went wrong")}))}),[]);var qe=(0,P.useCallback)((function(){de&&Ie.getAllRecords({name:de}).then((function(e){he((function(t){var n,a,i=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,d.Z)(t),(0,d.Z)(i))}))})).catch((function(e){m.ZP.error(e.response.data.message)}))}),[Ne,de]);(0,P.useEffect)((function(){qe()}),[qe]);var We=(0,P.useCallback)((function(){(ge||Ce)&&ze.getAllPublishedRecords({title:ge}).then((function(e){be((function(t){var n,a,i=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,d.Z)(t),(0,d.Z)(i))})),we(!1)})).catch((function(e){m.ZP.error(e.response.data.message),we(!1)}))}),[Ne,ge]);(0,P.useEffect)((function(){We()}),[We]);var He=function(e){var t=(0,w.P)(e);if("string"==typeof t.message)De((0,l.Z)((0,l.Z)({},Le),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);X.setFields(n),De((0,l.Z)((0,l.Z)({},Le),{},{error:""}))}},Ye=(0,P.useCallback)((function(){ee.getRecordById(W).then((function(e){var t,n,a,i,o,r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,s=null===r||void 0===r?void 0:r.Organization,d=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.Manager,c=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.Department,u=r.dateOfJoining,h=r.lastWorkingDate;r&&(Object.keys(r).forEach((function(e){return void 0===r[e]||null===r[e]||"undefined"===r[e]?delete r[e]:{}})),X.setFieldsValue((0,l.Z)((0,l.Z)({},r),{},{isPublished:r.isPublished,organizationId:null===s||void 0===s?void 0:s.id,managerId:null===d||void 0===d?void 0:d.id,departmentId:null===c||void 0===c?void 0:c.id,status:String(r.status),dateOfJoining:u?T()(r.dateOfJoining):null,lastWorkingDate:h?T()(r.lastWorkingDate):null})),De((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1}))),d&&Ie.getRecordById(d.id).then((function(e){var t;he([null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data])})).catch((function(e){m.ZP.error(e.response.data.message)}))})).catch((function(e){He(e)}))}),[X,W,ee,Ne]),Je=(0,P.useCallback)((function(){"edit"!==q&&Re.getAllRecords().then((function(e){var t,n;e.data&&null!==(t=e.data)&&void 0!==t&&t.data&&Ve(null===(n=e.data)||void 0===n?void 0:n.data)})).catch((function(e){He(e)}))}),[Re,q]),Qe=(0,P.useCallback)((function(){ke.getAvailableRecords().then((function(e){e.data&&e.data.data&&Ue(e.data.data)}))}),[ke]);(0,P.useEffect)((function(){"edit"===q?(De({loading:!0}),Ye(),Qe()):(Qe(),X.resetFields(),Je()),Ze("")}),[H,q,X,Ye,Qe,Je]);return null!==Le&&void 0!==Le&&Le.loading?(0,M.jsx)(L.Z,{items:10}):(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){var t=e.roleIds;delete e.roleIds,void 0===e.displayOrgContact&&(e.displayOrgContact=!1),De((0,l.Z)((0,l.Z)({},Le),{},{buttonLoading:!0}));var n=new FormData,a=["profile","translations"];switch(Object.entries(e).forEach((function(e){!a.includes(e[0])&&e[1]&&n.append(e[0],e[1])})),e.profile&&"string"!==typeof e.profile&&e.profile.fileList.length>0&&n.append("profile",e.profile.fileList[0].originFileObj),e.translations&&e.translations.forEach((function(e,t){n.append("translations[".concat(t+1,"][language]"),e.language),n.append("translations[".concat(t+1,"][title]"),e.title)})),e.allDataAccessRestrictedTo&&e.allDataAccessRestrictedTo.length>0?e.allDataAccessRestrictedTo.forEach((function(e,t){n.append("dataAccessRestrictedTo[".concat(t,"]"),String(e))})):n.append("dataAccessRestrictedTo[]",""),n.append("phoneCode","971"),q){case"edit":var i;if(!0===Q)ee.updateRecord(n,null===Le||void 0===Le||null===(i=Le.data)||void 0===i?void 0:i.id).then((function(){$(),De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.success("User updated successfully")})).catch((function(e){He(e),De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))}));else De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user");break;case"new":!0===J?ee.createRecord(n).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null===(a=n.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.id,e.next=3,ee.addRoles({roleIds:t},o).then((function(){$(),De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.success("User created successfully")})).catch((function(e){He(e),De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){He(e),De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(De((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to create a new user"))}},form:X,children:[(null===Le||void 0===Le?void 0:Le.error)&&(0,M.jsx)(v.EQ,{description:null===Le||void 0===Le?void 0:Le.error,isClosable:!0,onClose:function(){De((0,l.Z)((0,l.Z)({},Le),{},{error:""}))}}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"firstName",rules:[{required:"new"===q,message:"Please add first name"}],children:(0,M.jsx)(v.t7,{size:"w100",label:"First Name",asterisk:"new"===q,type:"text"})}),(0,M.jsx)(u.Z.Item,{name:"lastName",rules:[{required:"new"===q,message:"Please add last name"}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Last Name",asterisk:"new"===q,type:"text"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"email",rules:[{required:"new"===q,message:"Please add email"},{type:"email",message:"Please add valid email"}],children:(0,M.jsx)(v.t7,{disabled:!K,size:"w100",label:"Email",asterisk:"new"===q,type:"email"})}),"new"===q&&(0,M.jsx)(u.Z.Item,{name:"password",rules:[{required:!0,message:"Please add password"},{min:6,message:"Password must be at least 6 characters"}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Password",asterisk:!0,type:"password"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Phone  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"phone",rules:[{required:!0,message:"Please add phone"}],children:(0,M.jsx)(h.Z,{style:{width:"100%"},type:"number",addonBefore:(0,M.jsx)(c.Z,{style:{width:98},placeholder:"Select phone code",defaultValue:"new"===q?"971":(null===Le||void 0===Le||null===(t=Le.data)||void 0===t?void 0:t.phoneCode)||"971",children:null===Me||void 0===Me?void 0:Me.map((function(e){return(0,M.jsxs)(U,{value:e.phoneCode,children:[(0,M.jsx)("span",{children:e.flag}),(0,M.jsx)("span",{className:"ml-1",children:"".concat(e.phoneCode)})]},e.id)}))}),placeholder:"Enter phone number",defaultValue:"new"===q?"":null===Le||void 0===Le||null===(n=Le.data)||void 0===n?void 0:n.phone,controls:!1})})]})}),(0,M.jsx)(u.Z.Item,{name:"address",children:(0,M.jsx)(v.t7,{size:"w100",label:"Address",type:"text"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"designation",children:(0,M.jsx)(v.t7,{disabled:!K,size:"w100",label:"Designation",type:"text"})}),(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Department  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"departmentId",rules:[{required:!0,message:"Please select a department"}],children:(0,M.jsx)(c.Z,{disabled:!K,allowClear:!0,style:{width:"100%"},defaultValue:null===Le||void 0===Le||null===(i=Le.data)||void 0===i||null===(o=i.Department)||void 0===o?void 0:o.id,placeholder:"Search for the department",className:"selectAntdCustom",onChange:function(e){return X.setFieldsValue({departmentId:e})},showSearch:!0,onSearch:function(e){return Ze(e)},optionFilterProp:"label",options:null===ye||void 0===ye?void 0:ye.map((function(e){return{label:e.title,value:e.id}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the department"})})})})]})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"whatsapp",children:(0,M.jsx)(v.t7,{label:"WhatsApp Number",placeHolder:"Enter WhatsApp Number",size:"w100"})}),(0,M.jsx)(u.Z.Item,{name:"status",initialValue:X.getFieldValue("status")||A.J0.active,children:(0,M.jsx)(v.AP,{label:"User Status",disabled:!K,options:[{value:A.J0.active,label:"Active"},{value:A.J0.suspended,label:"Suspended"}],placeholder:"Select User Status"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Organization  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"organizationId",rules:[{required:!0,message:"Please select an organization"}],children:(0,M.jsx)(c.Z,{disabled:!K,allowClear:!0,style:{width:"100%"},defaultValue:null===Le||void 0===Le||null===(g=Le.data)||void 0===g||null===(x=g.Organization)||void 0===x?void 0:x.id,placeholder:"Search for the organization",className:"selectAntdCustom",onChange:function(e){return X.setFieldsValue({organizationId:e})},showSearch:!0,optionFilterProp:"label",options:null===ae||void 0===ae?void 0:ae.map((function(e){return{label:e.name,value:e.id}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the organization"})})})})]})}),(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Manager  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"managerId",rules:[{required:!0,message:"Please select a manager"}],children:(0,M.jsx)(c.Z,{disabled:!K,allowClear:!0,style:{width:"100%"},defaultValue:null===Le||void 0===Le||null===(j=Le.data)||void 0===j||null===(y=j.Manager)||void 0===y?void 0:y.id,placeholder:"Search for the manager",className:"selectAntdCustom",onChange:function(e){return e?X.setFieldsValue({managerId:e}):{}},showSearch:!0,onSearch:function(e){return le(e)},optionFilterProp:"label",options:null===me||void 0===me?void 0:me.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.id}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the manager"})})})})]})})]}),(0,M.jsxs)("div",{className:"mb-4",children:["new"===q&&(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Select Roles ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"roleIds",rules:[{required:!0,message:"Please select at least one role"}],help:(0,M.jsx)("small",{className:"color-dark-main",children:"Select roles for this user!. You can select multiple roles."}),children:(0,M.jsx)(c.Z,{disabled:!K,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select at least one role",className:"selectAntdCustom",onChange:function(e){return X.setFieldsValue({roleIds:e})},showSearch:!0,optionFilterProp:"label",options:Be.map((function(e){return{label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id}}))})})]})}),(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Date of Joining  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"}),(0,M.jsx)(u.Z.Item,{name:"dateOfJoining",children:(0,M.jsx)(p.Z,{className:b})})]})}),"edit"===q&&(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Last Working Date",(0,M.jsx)(u.Z.Item,{name:"lastWorkingDate",children:(0,M.jsx)(p.Z,{className:b})})]})})]}),(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Limit Data Access to",(0,M.jsx)(u.Z.Item,{name:"allDataAccessRestrictedTo",help:"If any organization/branch is chosen then the data will be restricted to the chosen organization. Empty meaning no restriction",children:(0,M.jsx)(c.Z,{mode:"multiple",disabled:!K,allowClear:!0,style:{width:"100%"},defaultValue:null===Le||void 0===Le||null===(E=Le.data)||void 0===E?void 0:E.dataAccessRestrictedTo,placeholder:"Search for the organization",className:"selectAntdCustom",onChange:function(e){return X.setFieldsValue({dataAccessRestrictedTo:e})},showSearch:!0,optionFilterProp:"label",options:null===ae||void 0===ae?void 0:ae.map((function(e){return{label:e.name,value:e.id}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the organization"})})})})]})}),(0,M.jsx)("div",{className:"mt-5",children:(0,M.jsx)(v.wA,{name:"profile",defaultFileList:"edit"===q&&Le&&(null===(O=Le.data)||void 0===O?void 0:O.profile)&&[{uid:null===(_=Le.data)||void 0===_?void 0:_.id,name:null===(B=Le.data)||void 0===B?void 0:B.profile,status:"done",url:S.lj+(null===(V=Le.data)||void 0===V?void 0:V.profile)}]})}),(0,M.jsxs)("div",{className:Z.Z.footer,children:[(0,M.jsx)(v.op,{size:"normal",fontSize:"sm",onClick:Y,type:"plain",children:"Cancel"}),(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===Le||void 0===Le?void 0:Le.buttonLoading,children:"Submit"})]})]})},_=n(4942),B=c.Z.Option,V=["Spouse","Mother","Father","Child","Brother","Sister","Friend","Neighbor","Coworker","Aunt","Uncle","Cousin","Niece","Nephew"],q=["Male","Female","Other"],W=["Single","Married","Divorced","Widowed","Separated"],H=function(e){var t=e.type,n=e.record,i=e.openModal,o=e.onCancel,r=e.updateUser,s=e.reloadTableData,f=e.manageAllUser,g=u.Z.useForm(),x=(0,a.Z)(g,1)[0],j=(0,P.useMemo)((function(){return new N.z}),[]),y=(0,P.useMemo)((function(){return new k.L}),[]),b=(0,P.useMemo)((function(){return new I.Y}),[]),z=(0,P.useState)(),R=(0,a.Z)(z,2),F=R[0],A=R[1],D=(0,P.useState)([]),E=(0,a.Z)(D,2),U=E[0],O=E[1],H=(0,P.useState)(S.fP),Y=(0,a.Z)(H,2),J=Y[0],Q=Y[1],K=(0,P.useState)(S.Xj),$=(0,a.Z)(K,2),G=$[0],X=$[1],ee=(0,P.useState)(V),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,P.useState)(q),oe=(0,a.Z)(ie,2),re=oe[0],se=oe[1],le=(0,P.useState)(W),de=(0,a.Z)(le,2),ce=de[0],ue=de[1],me=(0,P.useState)({nationality:"",religion:"",emergencyContactRelationship:"",gender:"",maritalStatus:""}),he=(0,a.Z)(me,2),fe=he[0],pe=he[1],ve=function(e){var t=(0,w.P)(e);if("string"==typeof t.message)A((0,l.Z)((0,l.Z)({},F),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);x.setFields(n),A((0,l.Z)((0,l.Z)({},F),{},{error:""}))}},Ze=(0,P.useCallback)((function(){j.getRecordById(n).then((function(e){e.data&&e.data.data&&(e.data.data.UserMeta.forEach((function(e){x.setFieldValue(e.key,e.value);var t={nationality:[J,Q],religion:[G,X],maritalStatus:[ce,ue],gender:[re,se],emergencyContactRelationship:[ne,ae]};Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),i=n[0],o=n[1],r=(0,a.Z)(o,2),s=r[0],l=r[1];e.key===i&&e.value&&!s.includes(e.value)&&l([].concat((0,d.Z)(s),[e.value]))}))})),A((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1})))})).catch((function(e){ve(e)}))}),[x,n,j,y]),ge=(0,P.useCallback)((function(){b.getAvailableRecords().then((function(e){e.data&&e.data.data&&O(e.data.data)}))}),[b]);(0,P.useEffect)((function(){"edit"===t?(A({loading:!0}),Ze(),ge()):(ge(),x.resetFields())}),[i,t,x,Ze,ge]);var xe=function(e,t){e&&(e&&pe((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,_.Z)({},t,e))})),x.setFieldValue(t,e))},je=function(e){var t={nationality:[J,Q],religion:[G,X],maritalStatus:[ce,ue],gender:[re,se],emergencyContactRelationship:[ne,ae]},n=(0,a.Z)(t[e],2),i=n[0],o=n[1],r=fe[e];r&&!i.includes(r)&&o([].concat((0,d.Z)(i),[r]))};return null!==F&&void 0!==F&&F.loading?(0,M.jsx)(L.Z,{items:10}):(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){var t,n=[];(Object.entries(e).forEach((function(e){var t=(0,a.Z)(e,2),i=t[0],o=t[1];o&&n.push({key:i,value:o.toString()})})),A((0,l.Z)((0,l.Z)({},F),{},{buttonLoading:!0})),!0===r)?j.updateUserMeta({userMeta:n},null===F||void 0===F||null===(t=F.data)||void 0===t?void 0:t.id).then((function(e){s(),A((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){ve(e),A((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(A((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user"))},form:x,children:[(null===F||void 0===F?void 0:F.error)&&(0,M.jsx)(v.EQ,{description:null===F||void 0===F?void 0:F.error,isClosable:!0,onClose:function(){A((0,l.Z)((0,l.Z)({},F),{},{error:""}))}}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("label",{style:{width:"100%",fontSize:"var(--font-size-sm)"},children:["Date Of Birth",(0,M.jsx)(u.Z.Item,{name:"dateOfBirth",valuePropName:"dateOfBirth",children:(0,M.jsx)(p.Z,{defaultValue:x.getFieldValue("dateOfBirth")?T()(x.getFieldValue("dateOfBirth")):void 0,clearIcon:!0,style:{width:"100%",border:"2px solid var(--color-border)",borderRadius:"0.25rem"}})})]}),(0,M.jsx)(u.Z.Item,{name:"nationality",children:(0,M.jsx)(v.Ld,{asterisk:!1,label:"Nationality",options:J.map((function(e){return{label:e,value:e}})),onSearch:function(e){return xe(e,"nationality")},onBlur:function(){return je("nationality")},notFoundDescription:"Pro Tip: If nationality is not available in the list, continue typing it will be added automatically"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"personalEmail",rules:[{type:"email",message:"Please add valid email"}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Personal Email",type:"email"})}),(0,M.jsx)("div",{children:(0,M.jsxs)("label",{className:"font-size-sm",children:["Personal Phone",(0,M.jsx)(u.Z.Item,{name:"personalNumber",children:(0,M.jsx)(h.Z,{type:"text",style:{width:"100%"},addonBefore:(0,M.jsx)(c.Z,{style:{width:98},placeholder:"Select phone code",defaultValue:"971",children:null===U||void 0===U?void 0:U.map((function(e){return(0,M.jsxs)(B,{value:e.phoneCode,children:[(0,M.jsx)("span",{children:e.flag}),(0,M.jsx)("span",{className:"ml-1",children:"".concat(e.phoneCode)})]},"country-".concat(e.id))}))}),placeholder:"Enter phone number",controls:!1})})]})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"religion",children:(0,M.jsx)(v.Ld,{asterisk:!1,label:"Religion",options:G.map((function(e){return{label:e,value:e}})),onSearch:function(e){return xe(e,"religion")},onBlur:function(){return je("religion")},notFoundDescription:"Pro Tip: If religion is not available in the list, continue typing it will be added automatically"})}),(0,M.jsx)(u.Z.Item,{name:"maritalStatus",children:(0,M.jsx)(v.Ld,{asterisk:!1,label:"Marital Status",options:ce.map((function(e){return{label:e,value:e}})),onSearch:function(e){return xe(e,"maritalStatus")},onBlur:function(){return je("maritalStatus")},notFoundDescription:"Pro Tip: If marital status is not available in the list, continue typing it will be added automatically"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"gender",children:(0,M.jsx)(v.Ld,{asterisk:!1,label:"Gender",options:re.map((function(e){return{label:e,value:e}})),onSearch:function(e){return xe(e,"gender")},onBlur:function(){return je("gender")},notFoundDescription:"Pro Tip: If gender is not available in the list, continue typing it will be added automatically"})}),(0,M.jsx)(u.Z.Item,{name:"currentProfession",children:(0,M.jsx)(v.t7,{label:"Current Profession",type:"text",size:"w100"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"passportNumber",children:(0,M.jsx)(v.t7,{label:"Passport Number",placeHolder:"Enter Passport Number",size:"w100"})}),(0,M.jsxs)("label",{style:{width:"100%",fontSize:"var(--font-size-sm)"},children:["Passport Expiry Date",(0,M.jsx)(u.Z.Item,{name:"passportExpiryDate",valuePropName:"passportExpiryDate",children:(0,M.jsx)(p.Z,{defaultValue:x.getFieldValue("passportExpiryDate")?T()(x.getFieldValue("passportExpiryDate")):void 0,clearIcon:!0,style:{width:"100%",border:"2px solid var(--color-border)",borderRadius:"0.25rem"}})})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"emergencyContactName",children:(0,M.jsx)(v.t7,{label:"Emergency Contact Name",placeHolder:"Enter Emergency Contact Name",size:"w100"})}),(0,M.jsx)(u.Z.Item,{name:"emergencyContactRelationship",children:(0,M.jsx)(v.Ld,{asterisk:!1,label:"Emergency Contact Relationship",options:ne.map((function(e){return{label:e,value:e}})),onSearch:function(e){return xe(e,"emergencyContactRelationship")},onBlur:function(){return je("emergencyContactRelationship")},notFoundDescription:"Pro Tip: If relationship is not available in the list, continue typing it will be added automatically"})})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"emergencyContactAddress",children:(0,M.jsx)(v.t7,{label:"Emergency Contact Address",placeHolder:"Enter Emergency Contact Address",size:"w100"})}),(0,M.jsx)(u.Z.Item,{name:"emergencyContactNumber",children:(0,M.jsx)(v.t7,{label:"Emergency Contact Number",placeHolder:"Enter Emergency Contact Number",size:"w100"})})]}),(0,M.jsx)("div",{children:(0,M.jsx)(u.Z.Item,{name:"labourCardNumber",children:(0,M.jsx)(v.t7,{label:"Labour Card Number",placeHolder:"Enter Labour Card Number",size:"w100",disabled:!f})})}),(0,M.jsxs)("div",{className:Z.Z.footer,children:[(0,M.jsx)(v.op,{size:"normal",fontSize:"sm",onClick:o,type:"plain",children:"Cancel"}),(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===F||void 0===F?void 0:F.buttonLoading,children:"Submit"})]})]})},Y=n(77278),J=n(59491),Q=n(21680),K=n(5900),$=n(22231),G=n(98676),X=n(51534),ee=n(82334),te=n(48694),ne=n(49075),ae=n(40096),ie=function(e){var t,n=e.type,i=e.record,o=e.openModal,r=e.onCancel,s=e.updateUser,c=(e.reloadTableData,u.Z.useForm()),h=(0,a.Z)(c,1)[0],f=(0,P.useMemo)((function(){return new N.z}),[]),p=(0,P.useState)(),b=(0,a.Z)(p,2),S=b[0],I=b[1],z=(0,P.useState)([]),k=(0,a.Z)(z,2),R=k[0],F=k[1];X.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(X.version,"/pdf.worker.js");var D=ae.Z.getLocalAccessToken(),E=function(e){var t=(0,w.P)(e);if("string"==typeof t.message)I((0,l.Z)((0,l.Z)({},S),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);h.setFields(n),I((0,l.Z)((0,l.Z)({},S),{},{error:""}))}},T=(0,P.useCallback)((function(){f.getRecordById(i).then((function(e){if(e.data&&e.data.data){I((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1}));var t=[];e.data.data.UserDocuments.forEach((function(e){t.push({title:e.title,documentId:e.id,documentType:e.documentType,show:!1})})),F(t)}})).catch((function(e){E(e)}))}),[h,i,f]);(0,P.useEffect)((function(){"edit"===n?(I({loading:!0}),T()):h.resetFields()}),[o,n,h,T]);return(0,M.jsxs)(M.Fragment,{children:[null!==S&&void 0!==S&&S.loading?(0,M.jsx)(L.Z,{items:10}):(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){I((0,l.Z)((0,l.Z)({},S),{},{buttonLoading:!0}));var t=new FormData,n=["file"];Object.entries(e).forEach((function(e){n.includes(e[0])||t.append(e[0],e[1])})),e.file&&"string"!==typeof e.file&&e.file.fileList.length>0&&t.append("file",e.file.fileList[0].originFileObj),t.append("userId",i.toString()),!0===s?f.uploadUserDocuments(t).then((function(e){T(),h.resetFields(),I((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){E(e),I((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(I((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user"))},form:h,children:[(null===S||void 0===S?void 0:S.error)&&(0,M.jsx)(v.EQ,{description:null===S||void 0===S?void 0:S.error,isClosable:!0,onClose:function(){I((0,l.Z)((0,l.Z)({},S),{},{error:""}))}}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"title",rules:[{required:!0,message:"Please add title."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Title",asterisk:!0,type:"text"})}),(0,M.jsx)(u.Z.Item,{name:"documentType",rules:[{required:!0,message:"Please add document type."}],children:(0,M.jsx)(v.AP,{label:"Document Type",options:A.NT,placeholder:"Select Document Type",asterisk:!0})})]}),(0,M.jsx)("div",{children:(0,M.jsx)(u.Z.Item,{name:"file",rules:[{required:!0,message:"Please add file."}],children:(0,M.jsx)(Y.Z,{multiple:!1,beforeUpload:function(){return!1},children:(0,M.jsx)(J.Z,{icon:(0,M.jsx)($.Z,{}),children:"Click to Upload"})})})}),(0,M.jsxs)("div",{className:Z.Z.footer,style:{marginBottom:"1rem"},children:[(0,M.jsx)(v.op,{size:"normal",fontSize:"sm",onClick:r,type:"plain",children:"Cancel"}),(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===S||void 0===S?void 0:S.buttonLoading,children:"Submit"})]})]}),(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:null===S||void 0===S||null===(t=S.data)||void 0===t?void 0:t.UserDocuments.map((function(e,t){var n;return(0,M.jsx)("div",{className:Z.Z.resourceWrap,children:(0,M.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,M.jsxs)("div",{className:x,children:[e.documentType.includes("pdf")?(0,M.jsx)("a",{href:"".concat(ne._,"resources/task-resources/").concat(null===e||void 0===e?void 0:e.file,"?authKey=").concat(D),target:"_blank",rel:"noreferrer",children:(0,M.jsx)(ee.Z,{file:"".concat(ne._,"resources/task-resources/").concat(e.file,"?authKey=").concat(D),children:(0,M.jsx)(te.Z,{renderTextLayer:!1,pageNumber:1})})}):(0,M.jsx)(Q.Z,{className:y,width:120,height:100,src:"".concat(ne._,"resources/task-resources/").concat(null===e||void 0===e?void 0:e.file,"?authKey=").concat(D)}),(0,M.jsx)(K.Z,{title:"Are you sure you want to delete this document?",onConfirm:function(){f.deleteUserDocument(e.id).then((function(){T()})).catch((function(e){m.ZP.error("Something bad happened")}))},okText:"Yes",cancelText:"No",overlayInnerStyle:{borderRadius:"0.25rem"},children:(0,M.jsx)("div",{className:j,children:(0,M.jsx)(G.Z,{style:{fontSize:14,color:"var(--color-light)"}})})})]}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[null!==(n=R.find((function(t){return t.documentId===e.id})))&&void 0!==n&&n.show?(0,M.jsx)(v.Vm,{onBlur:function(){var e,n,a=(0,d.Z)(R);a[t]=(0,l.Z)((0,l.Z)({},R[t]),{},{title:null===S||void 0===S||null===(e=S.data)||void 0===e||null===(n=e.UserDocuments[t])||void 0===n?void 0:n.title,show:!1}),F(a)},onChange:function(e){var n=(0,d.Z)(R);n[t]=(0,l.Z)((0,l.Z)({},R[t]),{},{title:e.target.value}),F(n)},style:{fontSize:"var(--font-size-normal)"},onMouseDown:function(){f.updateUserDocument({title:R[t].title,documentId:R[t].documentId,documentType:R[t].documentType}).then((function(e){e&&T()}))},defaultValue:null===e||void 0===e?void 0:e.title}):(0,M.jsx)("div",{onClick:function(){var e=(0,d.Z)(R);e[t]=(0,l.Z)((0,l.Z)({},R[t]),{},{show:!0}),F(e)},className:g,children:(0,M.jsx)("b",{children:null===e||void 0===e?void 0:e.title})}),(0,M.jsx)("div",{style:{minWidth:"12rem"},children:(0,M.jsx)(v.AP,{value:R[t].documentType,options:A.NT,placeholder:"Select Document Type",onChange:function(e){return f.updateUserDocument({title:R[t].title,documentId:R[t].documentId,documentType:e}).then((function(e){e&&T()}))}})})]})]})})}))})]})},oe=n(41586),re=n(64217),se=function(e){var t,n,i,o,r,s=e.type,d=e.record,h=e.openModal,p=(e.onCancel,e.updateUser),g=e.manageAllUser,x=(e.reloadTableData,u.Z.useForm()),j=(0,a.Z)(x,1)[0],y=(0,P.useMemo)((function(){return new N.z}),[]),b=(0,P.useState)(),S=(0,a.Z)(b,2),I=S[0],k=S[1],R=(0,P.useState)(),F=(0,a.Z)(R,2),E=F[0],T=F[1],U=new re.S,O=(0,P.useState)(""),_=(0,a.Z)(O,2),B=_[0],V=_[1],q=(0,z.N)(B,500),W=(0,P.useState)([]),H=(0,a.Z)(W,2),Y=H[0],J=H[1],Q=(0,P.useCallback)((function(){(q||E)&&U.getAllRecords({type:E}).then((function(e){J(e.data.data)})).catch((function(e){m.ZP.error(e.response.data.message)}))}),[U,q]);(0,P.useEffect)((function(){Q()}),[q,E]);var $=function(e){var t=(0,w.P)(e);if("string"==typeof t.message)k((0,l.Z)((0,l.Z)({},I),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);j.setFields(n),k((0,l.Z)((0,l.Z)({},I),{},{error:""}))}},X=(0,P.useCallback)((function(){y.getRecordById(d).then((function(e){e.data&&e.data.data&&k((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1}))})).catch((function(e){$(e)}))}),[j,d,y]);(0,P.useEffect)((function(){"edit"===s?(k({loading:!0}),X()):j.resetFields()}),[h,s,j,X]);var ee=[{title:"Resource",dataIndex:"assetName",key:"assetName",render:function(e,t){var n;return(0,M.jsx)("div",{children:null===t||void 0===t||null===(n=t.CompanyAsset)||void 0===n?void 0:n.assetName})}},{title:"Label",dataIndex:"label",key:"label"},{title:"Code",dataIndex:"code",key:"code",render:function(e,t){var n;return(0,M.jsx)("div",{children:null===t||void 0===t||null===(n=t.CompanyAsset)||void 0===n?void 0:n.code})}},g?{title:"Action",key:"action",render:function(e,t){return(0,M.jsx)(K.Z,{placement:"top",title:"Are you sure?",onConfirm:function(){return U.revokeResources(null===t||void 0===t?void 0:t.id).then((function(){X()}))},okText:"Yes",cancelText:"No",children:(0,M.jsx)(G.Z,{className:Z.Z.bg__red})})}}:{}];return(0,M.jsxs)(M.Fragment,{children:[null!==I&&void 0!==I&&I.loading?(0,M.jsx)(L.Z,{items:10}):g&&(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){k((0,l.Z)((0,l.Z)({},I),{},{buttonLoading:!0})),!0===p?U.allocateResources((0,l.Z)((0,l.Z)({},e),{},{userId:d.toString()})).then((function(e){X(),j.resetFields(),k((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){$(e),k((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(k((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user"))},form:j,children:[(null===I||void 0===I?void 0:I.error)&&(0,M.jsx)(v.EQ,{description:null===I||void 0===I?void 0:I.error,isClosable:!0,onClose:function(){k((0,l.Z)((0,l.Z)({},I),{},{error:""}))}}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("label",{className:"font-size-sm",children:["Type  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"})]}),(0,M.jsx)(c.Z,{allowClear:!0,style:{width:"100%",height:"unset"},defaultValue:null===I||void 0===I||null===(t=I.data)||void 0===t?void 0:t.type,placeholder:"Search for the asset type",className:"selectAntdCustom",onChange:function(e){return T(e)},showSearch:!0,onSearch:function(e){},optionFilterProp:"label",options:null===(n=Object.entries(A.mm))||void 0===n?void 0:n.map((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return{label:(0,D.kC)(n.replace("_"," ")),value:Number(i)}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the type"})})})]}),(0,M.jsxs)(u.Z.Item,{name:"companyAssetId",rules:[{required:!0,message:"Please select a resource"}],children:[(0,M.jsxs)("label",{className:"font-size-sm color-dark-main",children:["Company Resource  ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"})]}),(0,M.jsx)(c.Z,{allowClear:!0,style:{width:"100%"},defaultValue:null===I||void 0===I||null===(i=I.data)||void 0===i?void 0:i.companyAssetId,placeholder:"Search for the resource",className:"selectAntdCustom",onChange:function(e){return j.setFieldsValue({companyAssetId:e})},showSearch:!0,onSearch:function(e){return V(e)},optionFilterProp:"label",options:null===Y||void 0===Y?void 0:Y.map((function(e){return{label:e.assetName,value:e.id}})),notFoundContent:(0,M.jsx)(f.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,M.jsx)("span",{children:"No data found, Please search for the resource"})})})]}),(0,M.jsx)(u.Z.Item,{name:"label",rules:[{required:!0,message:"Please add label."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Label",asterisk:!0,type:"text"})}),(0,M.jsx)(u.Z.Item,{name:"quantity",rules:[{required:!0,message:"Please add quantity."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Quantity",asterisk:!0,type:"number"})}),(0,M.jsx)("div",{style:{alignSelf:"center"},children:(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===I||void 0===I?void 0:I.buttonLoading,children:"Submit"})})]})]}),(null===I||void 0===I||null===(o=I.data)||void 0===o?void 0:o.AssetAllocation.length)>0&&(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(0,M.jsx)(oe.Z,{columns:ee,dataSource:null===I||void 0===I||null===(r=I.data)||void 0===r?void 0:r.AssetAllocation,pagination:!1})})]})},le=n(66204),de=n(98505),ce=p.Z.MonthPicker,ue=function(e){var t,n,i,o,r=e.type,s=e.record,d=e.openModal,c=e.manageAllUser,h=u.Z.useForm(),f=(0,a.Z)(h,1)[0],p=(0,P.useMemo)((function(){return new N.z}),[]),g=(0,P.useState)(),x=(0,a.Z)(g,2),j=x[0],y=x[1],b=(0,P.useState)(!1),S=(0,a.Z)(b,2),I=S[0],z=S[1],k=function(e){var t=(0,w.P)(e);if("string"==typeof t.message)y((0,l.Z)((0,l.Z)({},j),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);f.setFields(n),y((0,l.Z)((0,l.Z)({},j),{},{error:""}))}},R=(0,P.useCallback)((function(){p.getRecordById(s).then((function(e){e.data&&e.data.data&&y((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1}))})).catch((function(e){k(e)}))}),[f,s,p]);(0,P.useEffect)((function(){"edit"===r?(y({loading:!0}),R()):f.resetFields()}),[d,r,f,R]);var F=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"5%"},{title:(0,M.jsxs)("div",{children:[(0,M.jsx)("b",{children:"Start Date"})," ",c?(0,M.jsx)(J.Z,{onClick:function(){return z(!I)},size:"small",children:"Promote"}):null]}),dataIndex:"startDate",key:"startDate",render:function(e,t){return(0,M.jsx)("div",{children:(0,de.Ny)(t.startDate,"MM dd,yy")})}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e,t){return(0,M.jsx)("div",{children:(0,de.Ny)(t.endDate,"MM dd,yy")})}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e,t){return(0,M.jsxs)("div",{children:[e," AED\xa0\xa0\xa0",t.isActive?(0,M.jsx)(le.Z,{color:"green",children:"Current"}):null]})}}];return(0,M.jsxs)(M.Fragment,{children:[c&&(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){y((0,l.Z)((0,l.Z)({},j),{},{buttonLoading:!0})),!0===c?p.updateSalary({amount:e.amount,startDate:T()(e.startDate._d.toISOString()).set("D",1).toISOString()},s).then((function(e){R(),f.resetFields(),y((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){k(e),y((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(y((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user"))},form:f,children:[(null===j||void 0===j?void 0:j.error)&&(0,M.jsx)(v.EQ,{description:null===j||void 0===j?void 0:j.error,isClosable:!0,onClose:function(){y((0,l.Z)((0,l.Z)({},j),{},{error:""}))}}),0===(null===j||void 0===j||null===(t=j.data)||void 0===t||null===(n=t.Salary)||void 0===n?void 0:n.length)||I?(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("label",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-dark-main)"},children:["Start Date ",(0,M.jsx)("span",{className:"color-red-yp",children:"*"})]}),(0,M.jsx)(u.Z.Item,{name:"startDate",rules:[{required:!0,message:"Please add start date."}],children:(0,M.jsx)(ce,{style:{borderRadius:"0.25rem",borderWidth:2,width:"100%",borderColor:"var(--color-border)"}})})]}),(0,M.jsx)(u.Z.Item,{name:"amount",rules:[{required:!0,message:"Please add amount."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Amount",asterisk:!0,type:"number"})}),(0,M.jsx)("div",{style:{alignSelf:"center"},children:(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===j||void 0===j?void 0:j.buttonLoading,children:"Submit"})})]}):null]}),null!==j&&void 0!==j&&j.loading?(0,M.jsx)(L.Z,{items:2}):(0,M.jsx)(M.Fragment,{children:(null===j||void 0===j||null===(i=j.data)||void 0===i?void 0:i.Salary.length)>0?(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(0,M.jsx)(oe.Z,{columns:F,dataSource:null===j||void 0===j||null===(o=j.data)||void 0===o?void 0:o.Salary,pagination:!1})}):(0,M.jsx)(v.I$,{description:"No Salary Data found"})})]})},me=n(95980),he=n(82193),fe=n(85848),pe=n(11178),ve=n(15432),Ze=n(43144),ge=n(15671),xe=(0,Ze.Z)((function e(){var t=this;(0,ge.Z)(this,e),this.endPoint="leave-credit",this.deleteRecord=function(e){return ne.Z.delete(ne._+t.endPoint+"/"+e)},this.createRecord=function(e){return ne.Z.post(ne._+t.endPoint,e)},this.updateRecord=function(e,n){return ne.Z.patch(ne._+t.endPoint+"/"+n,e)}})),je=(p.Z.MonthPicker,function(e){var t,n,i,o=e.type,r=e.record,s=e.openModal,d=(e.onCancel,e.manageAllUser),c=(e.reloadTableData,["var(--color-primary-main)","var(--color-primary-main-200)"]),h=u.Z.useForm(),f=(0,a.Z)(h,1)[0],p=(0,P.useMemo)((function(){return new me.c}),[]),g=(0,P.useMemo)((function(){return new xe}),[]),x=(0,P.useState)(),j=(0,a.Z)(x,2),y=j[0],b=j[1],S=(0,P.useState)(!1),N=(0,a.Z)(S,2),I=(N[0],N[1],function(e){var t=(0,w.P)(e);if("string"==typeof t.message)b((0,l.Z)((0,l.Z)({},y),{},{error:t.message}));else{var n=(0,C.O)(t.message,[]);f.setFields(n),b((0,l.Z)((0,l.Z)({},y),{},{error:""}))}}),z=(0,P.useCallback)((function(){p.getLeavesRecordById(r).then((function(e){if(e.data&&e.data.data){var t=[{name:"paidLeaves",value:Number(e.data.data.paidLeaves)},{name:"remainingLeaves",value:Number(e.data.data.remainingLeaves)},{name:"totalLeaveCredits",value:Number(e.data.data.totalLeaveCredits)},{name:"unpaidLeaves",value:Number(e.data.data.unpaidLeaves)}];b((0,l.Z)((0,l.Z)({},e.data),{},{loading:!1,data:t}))}})).catch((function(e){I(e)}))}),[f,r,p]);(0,P.useEffect)((function(){"edit"===o?(b({loading:!0}),z()):f.resetFields()}),[s,o,f,z]);return(0,M.jsxs)(M.Fragment,{children:[null!==y&&void 0!==y&&y.loading?(0,M.jsx)(L.Z,{items:10}):d&&(0,M.jsxs)(u.Z,{className:Z.Z.form,onFinish:function(e){b((0,l.Z)((0,l.Z)({},y),{},{buttonLoading:!0})),!0===d?g.createRecord({userId:r,daysCount:e.daysCount,note:e.note}).then((function(e){z(),f.resetFields(),b((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){I(e),b((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})}))})):(b((function(e){return(0,l.Z)((0,l.Z)({},e),{},{buttonLoading:!1})})),m.ZP.error("You don't have permission to update this user"))},form:f,children:[(null===y||void 0===y?void 0:y.error)&&(0,M.jsx)(v.EQ,{description:null===y||void 0===y?void 0:y.error,isClosable:!0,onClose:function(){b((0,l.Z)((0,l.Z)({},y),{},{error:""}))}}),(0,M.jsxs)("div",{children:[(0,M.jsx)(u.Z.Item,{name:"daysCount",rules:[{required:!0,message:"Please add days count."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Days Count",asterisk:!0,type:"number"})}),(0,M.jsx)(u.Z.Item,{name:"note",rules:[{required:!0,message:"Please add note."}],children:(0,M.jsx)(v.t7,{size:"w100",label:"Note",asterisk:!0,type:"text"})}),(0,M.jsx)("div",{style:{alignSelf:"center"},children:(0,M.jsx)(v.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===y||void 0===y?void 0:y.buttonLoading,children:"Submit"})})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)(he.u,{width:200,height:250,children:(0,M.jsxs)(fe.b,{data:null===y||void 0===y||null===(t=y.data)||void 0===t?void 0:t.slice(0,2),cx:"50%",cy:"50%",labelLine:!1,outerRadius:90,innerRadius:70,fill:"#8884d8",dataKey:"value",children:[null===y||void 0===y||null===(n=y.data)||void 0===n?void 0:n.map((function(e,t){return(0,M.jsx)(pe.b,{fill:c[t%c.length]},"cell-".concat(t))})),(0,M.jsx)(ve._,{value:(null!==y&&void 0!==y&&y.data?null===y||void 0===y?void 0:y.data[0].value:0)+" of "+(null!==y&&void 0!==y&&y.data?null===y||void 0===y?void 0:y.data[2].value:0)+" used",fontSize:16,position:"center"})]})}),null===y||void 0===y||null===(i=y.data)||void 0===i?void 0:i.slice(1).map((function(e,t){return(0,M.jsxs)("div",{style:{display:"flex",gap:"0.5rem",fontSize:"var(--font-size-sm)",color:"var(--color-dark-main)"},children:[(0,M.jsxs)("p",{children:[e.name.replace(/([A-Z])/g," $1").charAt(0).toUpperCase()+e.name.replace(/([A-Z])/g," $1").slice(1),":"]}),(0,M.jsxs)("p",{children:[e.value," days"]})]},t)}))]})]})}),ye=function(e){var t=e.openModal,n=e.onCancel,r=e.type,s=e.record,l=e.reloadTableData,d=e.permissions,c=d.createUser,u=d.updateUser,m=d.manageAllUser,h=(0,P.useState)(e.currentForm),f=(0,a.Z)(h,2),p=f[0],v=f[1],Z=[{key:"1",label:"Basic Information"},{key:"2",label:"Additional Information",disabled:"edit"!==r},{key:"3",label:"Files",disabled:"edit"!==r},{key:"4",label:"Allocated Resources",disabled:"edit"!==r},{key:"5",label:"Salary",disabled:"edit"!==r},{key:"6",label:"Leaves Report",disabled:"edit"!==r}],g={1:O,2:H,3:ie,4:se,5:ue,6:je}[p];return(0,M.jsxs)(i.Z,{title:"edit"===r?"Edit User":"Add New User",placement:"right",width:window.innerWidth>768?"60%":"100%",onClose:function(){return n()},open:t,bodyStyle:{padding:"0rem 2rem 1rem 2rem"},children:[(0,M.jsx)(o.Z,{defaultActiveKey:p,items:Z,onChange:function(e){return v(e)}}),(0,M.jsx)(g,{type:r,openModal:t,record:s,onCancel:n,createUser:c,updateUser:u,manageAllUser:m,setCurrentForm:v,reloadTableData:l})]})}},64217:function(e,t,n){n.d(t,{S:function(){return r}});var a=n(43144),i=n(15671),o=n(49075),r=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="company-asset",this.getAllRecords=function(e){return o.Z.get(t.endPoint,{params:e})},this.getCars=function(e){return o.Z.get(t.endPoint+"/findCompanyCars",{params:e})},this.getRecordById=function(e){return o.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return o.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return o.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return o.Z.patch("".concat(t.endPoint,"/").concat(n),e)},this.allocateResources=function(e){return o.Z.post("".concat(t.endPoint,"/allocate"),e)},this.revokeResources=function(e){return o.Z.delete("".concat(t.endPoint,"/revoke/").concat(e))}}))},59816:function(e,t,n){n.d(t,{Y:function(){return s}});var a=n(43144),i=n(15671),o=n(49075),r=n(3135),s=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="country",this.allEndpoint="country/all",this.getAllRecords=function(){return o.Z.get(t.allEndpoint)},this.getAvailableRecords=function(){return o.Z.get("".concat(t.endPoint,"/available-country"))},this.getRecordById=function(e){return o.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return o.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return o.Z.post(t.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,n){return o.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})}}))},38859:function(e,t,n){n.d(t,{o:function(){return r}});var a=n(43144),i=n(15671),o=n(49075),r=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="department",this.getAllRecords=function(e){return o.Z.get(t.endPoint,{params:e})},this.getAllPublishedRecords=function(e){return o.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return o.Z.get(t.endPoint+"/"+e)},this.deleteRecord=function(e){return o.Z.delete(t.endPoint+"/"+e)},this.createRecord=function(e){return o.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return o.Z.patch(t.endPoint+"/"+n,e)}}))},5190:function(e,t,n){n.d(t,{L:function(){return s}});var a=n(43144),i=n(15671),o=n(49075),r=n(3135),s=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return o.Z.get(t.endPoint,{params:e})},this.findPublished=function(e){return o.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return o.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return o.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return o.Z.post(t.endPoint,e,{headers:r.C})},this.updateRecord=function(e,n){return o.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})},this.getTenants=function(){return o.Z.get("xero/getTenants")}}))},99420:function(e,t,n){n.d(t,{U:function(){return r}});var a=n(43144),i=n(15671),o=n(49075),r=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.endPoint="role",this.getAllRecords=function(e){return o.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return o.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.deleteRecord=function(e){return o.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return o.Z.post(t.endPoint+"/",e)},this.updateRecord=function(e,n){return o.Z.patch("".concat(t.endPoint,"/").concat(n),e)},this.addElements=function(e,n){return o.Z.post("".concat(t.endPoint,"/addDashboardElement/").concat(n),e)},this.removeElements=function(e,n){return o.Z.post("".concat(t.endPoint,"/removeDashboardElement/").concat(n),e)}}))}}]);