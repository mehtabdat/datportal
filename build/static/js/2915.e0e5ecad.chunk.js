"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[2915],{6050:function(e,t,n){var i=n(72652),o=n(80235),a=n(40096),r=n(48897),c=n(46417);t.Z=function(e){var t=e.file,n=e.loading,l=e.tip,u=a.Z.getLocalAccessToken();return(0,c.jsx)("div",{style:{overflow:"hidden",height:"100%"},children:n?(0,c.jsx)(i.Z,{size:"large",style:{gap:"1rem"},className:"w-100 h-100 d-flex justify-center align-center font-size-lg",tip:l||"Please wait while we are preparing the file..."}):(0,c.jsx)(c.Fragment,{children:t?(0,c.jsx)("iframe",{src:"".concat(r.Q7).concat(t,"?authKey=").concat(u),style:{width:"100%",height:"100%"},title:"Preview File"}):(0,c.jsx)("div",{className:"w-100 h-100 d-flex justify-center align-center font-size-lg",children:(0,c.jsx)(o.Z,{description:"No PDF found"})})})})}},16468:function(e,t,n){n.d(t,{Z:function(){return re}});var i=n(45987),o=n(93433),a=n(1413),r=n(29439),c=n(47313),l=n(86136),u=n(25019),d=n(55291),s=n(32697),v=n(37388),f=n(41586),m=n(45705),h=n(59491),p=n(5900),Z=n(97258),g=n(68197),y=n(59624),x=n(69309),j=n(28080),b=n(14254),P=n(39180),w=n(93709),I=n(71703),k=n(30796),S=n(40293),R=n(82626),N=n(6050),C=n(37936),A=n(3798),M=n(72333),T="styles_total__ilBCa",D="styles_total_item__Kbpuq",F="styles_date_picker__2zn8s",q="styles_z_index__n2AHc",V="styles_date_footer__egB0G",z="styles_gen_border__fX6yJ",E=n(42623),Y=n(69591),U=n(42954),B=n(3646),_=n(39792),Q=n(76997),O=n(18223),L=n(75010),W=n(4942),G=n(74165),H=n(15861),X=n(29079),$=[7,14,30,60,90],K=[{title:"Products",key:"title",span:4,style:{}},{title:"Title",key:"title",span:5,style:{}},{title:"Quantity",key:"quantity",span:2,style:{}},{title:"Unit Amount",key:"unitAmount",span:3,style:{}},{title:"Account",key:"account",span:4,style:{}},{title:"Tax Rate",key:"tax",span:2,style:{}},{title:"Unit Total",key:"unitTotal",span:3,style:{textAlign:"center"}},{title:"Actions",key:"actions",span:1,style:{}}],J=Array(1).fill({title:"",amount:void 0,id:"",quantity:1}),ee=n(70584),te=n(70816),ne=n.n(te),ie=n(46417),oe=["key","name"],ae=l.Z.TextArea,re=function(e){var t,n,l,te=e.setDrawer,re=e.drawer,ce=e.onRefresh,le=e.permissions,ue=re.id,de=re.quotation,se=re.type,ve=re.projectId,fe=(0,c.useMemo)((function(){return new M.b}),[]),me=(0,c.useMemo)((function(){return new Y.Q}),[]),he=(0,c.useMemo)((function(){return new U.K}),[]),pe=(0,c.useMemo)((function(){return new _.p}),[]),Ze=(0,c.useMemo)((function(){return new Q.s}),[]),ge=(0,c.useMemo)((function(){return new O.Y}),[]),ye=(0,c.useMemo)((function(){return new L.L}),[]),xe=u.Z.useForm(),je=(0,r.Z)(xe,1)[0],be=(0,c.useState)((function(){return(null===de||void 0===de?void 0:de.QuotationMilestone)||[]})),Pe=(0,r.Z)(be,2),we=Pe[0],Ie=Pe[1],ke=(0,c.useMemo)((function(){var e=[];return null===we||void 0===we||we.forEach((function(t){(null===t||void 0===t?void 0:t.status)===C._W["Invoice Paid"]&&e.push(null===t||void 0===t?void 0:t.id)})),e}),[we]),Se=(0,c.useMemo)((function(){var e={id:0,title:"Supervision Charge",amount:null===de||void 0===de?void 0:de.supervisionMonthlyCharge,quotationId:null===de||void 0===de?void 0:de.id,status:0,invoiceId:0,type:"supervision",quantity:1};return null!==de&&void 0!==de&&de.hasSupervision&&(null!==we&&void 0!==we&&we.find((function(e){return"supervision"===(null===e||void 0===e?void 0:e.type)}))||null===we||void 0===we||we.push(e)),we||[]}),[we,de]),Re=(0,c.useState)(""),Ne=(0,r.Z)(Re,2),Ce=Ne[0],Ae=Ne[1],Me=(0,c.useState)(C.w2.Auto),Te=(0,r.Z)(Me,2),De=Te[0],Fe=Te[1],qe=(0,c.useState)({data:[],loading:!1}),Ve=(0,r.Z)(qe,2),ze=Ve[0],Ee=Ve[1],Ye=(0,c.useState)([]),Ue=(0,r.Z)(Ye,2),Be=Ue[0],_e=Ue[1],Qe=(0,c.useState)(!1),Oe=(0,r.Z)(Qe,2),Le=Oe[0],We=Oe[1],Ge=(0,c.useState)(),He=(0,r.Z)(Ge,2),Xe=He[0],$e=He[1],Ke=(0,c.useState)(!1),Je=(0,r.Z)(Ke,2),et=Je[0],tt=Je[1],nt=(0,c.useState)({subtotal:0,total:0}),it=(0,r.Z)(nt,2),ot=it[0],at=it[1],rt=(0,c.useState)({ids:[],completedIds:ke}),ct=(0,r.Z)(rt,2),lt=ct[0],ut=ct[1],dt=(0,c.useState)({issueDate:!1,expiryDate:!1}),st=(0,r.Z)(dt,2),vt=st[0],ft=st[1],mt=(0,c.useState)(""),ht=(0,r.Z)(mt,2),pt=ht[0],Zt=ht[1],gt=(0,E.N)(pt,500),yt=function(){te((function(e){return(0,a.Z)((0,a.Z)({},e),{},{open:!1,quoteId:void 0})})),ut({ids:[],completedIds:ke}),tt(!1),We(!1),je.resetFields()},xt=function(){We(!1),yt()},jt=function(e){var t=e.type,n=e.module,i=e.form,o=(0,c.useState)(""),a=(0,r.Z)(o,2),l=a[0],u=a[1];return(0,c.useMemo)((function(){return"create"===t&&(0,n.prepareUniqueInvoiceNumber)().then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,o=null===n||void 0===n?void 0:n.invoiceNumber;u(o),i.setFieldValue("invoiceNumber",o)})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")})),l}),[t]),l}({type:se,module:fe,form:je,previewData:Xe});!function(e){var t=e.type,n=e.module,i=e.previewData,o=e.form,a=e.invoiceNumber;(0,c.useEffect)((function(){"create"!==t&&"edit"!==t||!a||(0,n.checkForDuplicacy)({invoiceNumber:a,excludeId:"edit"===t?null===i||void 0===i?void 0:i.id:void 0}).then((function(e){var t,n=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data).isDuplicate;n&&o.setFields([{name:"invoiceNumber",warnings:n?["Invoice number already exists"]:[]}])})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")}))}),[t,i,a])}({type:se,module:fe,form:je,invoiceNumber:Ce,previewData:Xe});var bt=function(e){var t=e.projectModule,n=e.setProjects,i=e.debouncedProjectSearchTerm,r=t.getRecordsInList,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,i=e.ids;r({title:t,ids:i}).then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;n((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){var n;return!(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong, please try again later.")}))};return{onProjectSearch:function(){i&&(n((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),c({title:i}))},fetchProjects:c}}({projectModule:me,setProjects:Ee,debouncedProjectSearchTerm:gt}),Pt=bt.onProjectSearch,wt=function(e){var t=e.permissions,n=e.module,i=e.onRefresh,o=e.successCallback;return function(e){!0===(null===t||void 0===t?void 0:t.updateInvoice)?n.markAsSent(e).then((function(e){var t;d.ZP.success((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Invoice marked as sent successfully"),i(),o()})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")})):d.ZP.error("You don't have permission to mark invoice as sent")}}({module:fe,permissions:le,onRefresh:ce,successCallback:xt}),It=function(e){var t=e.permissions,n=e.module,i=e.onRefresh,o=e.successCallback,a=e.setIsLoading,r=e.previewData;return function(){if(null===r||void 0===r||!r.id)return d.ZP.error("Invoice not found");!0===(null===t||void 0===t?void 0:t.submitInvoice)?(0,n.submitInvoice)(null===r||void 0===r?void 0:r.id).then((function(){d.ZP.success("Invoice submitted successfully"),i(),o()})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")})).finally((function(){a(!1)})):d.ZP.error("You don't have permission to submit Invoice")}}({module:fe,permissions:le,onRefresh:ce,successCallback:xt,setIsLoading:tt,previewData:Xe}),kt=function(e){var t=e.modules,n=(e.type,t.brandingThemeModule),i=t.productModule,o=t.accountModule,a=t.taxRateModule;return{brandingThemeData:(0,X.$5)({method:n.getAllRecords}).data,productData:(0,X.$5)({method:i.getAllRecords}).data,accountData:(0,X.$5)({method:o.getAllRecords}).data,taxRateData:(0,X.$5)({method:a.getAllRecords}).data}}({type:se,modules:{brandingThemeModule:pe,productModule:Ze,accountModule:ge,taxRateModule:ye}}),St=kt.productData,Rt=kt.accountData,Nt=kt.taxRateData,Ct=function(e){var t=e.form,n=e.setTotal,i=e.taxRateData,o=function(){var e=(0,H.Z)((0,G.Z)().mark((function e(){var o,a,r,c,l,u;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getFieldValue("invoiceItems"),i){e.next=7;break}return a=new L.L,e.next=5,a.getAllRecords();case 5:r=e.sent,i=r.data.data;case 7:c=new Map,l=0,u=0,o.forEach((function(e){var t=Number(null===e||void 0===e?void 0:e.amount)*Math.trunc((null===e||void 0===e?void 0:e.quantity)||0);u+=t;var n=e.taxRateId;if(n&&i&&t>0){var o=i.find((function(e){return e.id===n}));if(o&&o.rate>0){var a=c.get(n),r=a?a.totalVat:0,d=o.rate/100*t;r+=d,l+=d,c.set(n,{title:o.title,vatRate:o.rate,totalVat:r})}}})),n({subtotal:u,total:u+l,vatData:c});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o}({form:je,setTotal:at,taxRateData:Nt}),At=function(e){var t=e.form,n=e.QuotationMilestone,i=e.quotation,r=(e.selectedMilestones,e.setSelectedMilestones),c=e.setChecked,l=e.onCalculateTotal,u=function(e){var n=e.id,i=e.milestone,a=e.isChecked,r=e.defaultValue,c="invoiceItems",u=t.getFieldValue(c),d=t.getFieldValue([c,0]);if(u.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==(null===i||void 0===i?void 0:i.id)})),a)i&&(1===u.length&&""===(null===d||void 0===d?void 0:d.title)?t.setFieldsValue((0,W.Z)({},c,[{title:i.title,amount:i.amount,id:i.id,quantity:i.quantity||1}])):t.setFieldsValue((0,W.Z)({},c,[].concat((0,o.Z)(u),[{title:i.title,amount:i.amount,id:i.id,quantity:i.quantity||1}]))));else{var s=u.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n}));0===s.length&&s.push.apply(s,(0,o.Z)(r)),t.setFieldsValue((0,W.Z)({},c,s))}l()},d=[{title:"",amount:null,id:0,quantity:1}];return{checkUncheck:function(e,t){var i=null===n||void 0===n?void 0:n.find((function(t){return t.id===e}));u({id:e,milestone:i,isChecked:t,defaultValue:d}),r((function(n){return(0,a.Z)((0,a.Z)({},n),{},{ids:t?[].concat((0,o.Z)(n.ids),[e]):n.ids.filter((function(t){return t!==e}))})}))},checkUncheckSupervision:function(e){var t=e.target.checked,n={title:"Supervision Charge",amount:null===i||void 0===i?void 0:i.supervisionMonthlyCharge,id:-100};u({id:-100,milestone:n,isChecked:t,defaultValue:d}),c(t)}}}({QuotationMilestone:we,form:je,selectedMilestones:lt,setSelectedMilestones:ut,onCalculateTotal:Ct,setChecked:We,quotation:de}),Mt=At.checkUncheck,Tt=At.checkUncheckSupervision,Dt=function(){var e=je.getFieldValue("invoiceItems").filter((function(e){return null===e||void 0===e||!e.id}));0===e.length?je.setFieldsValue({invoiceItems:[{title:"",amount:null,quantity:1}]}):je.setFieldsValue({invoiceItems:e})},Ft=function(e,t){e&&(0,he.getAllRecords)({projectId:e,quoteNumber:t||void 0}).then((function(e){var n,i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;i&&_e(t?function(e){return[].concat((0,o.Z)(e),(0,o.Z)(i))}:i)})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong, please try again later.")}))},qt=(0,ee.hx)(C.w2);(0,c.useEffect)((function(){ut((function(e){return(0,a.Z)((0,a.Z)({},e),{},{completedIds:ke})}))}),[ke]),(0,c.useEffect)((function(){Pt()}),[gt]),(0,c.useEffect)((function(){if("edit"===se){var e=je.getFieldValue("invoiceItems"),t=null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id}));ut((function(e){return(0,a.Z)((0,a.Z)({},e),{},{ids:t||[]})}))}}),[se]),(0,c.useEffect)((function(){"create"!==se&&ue&&fe.getRecordById(ue).then((function(e){var t,n,i=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;$e(i),Ie((null===i||void 0===i||null===(n=i.Quotation)||void 0===n?void 0:n.QuotationMilestone)||[]),"edit"===se&&(je.setFieldsValue((0,a.Z)((0,a.Z)({},i),{},{invoiceItems:null===i||void 0===i?void 0:i.InvoiceItems,type:null===i||void 0===i?void 0:i.type})),Ct())}))}),[ue,se]),(0,c.useEffect)((function(){"edit"===se&&Nt&&Ct()}),[Nt]),(0,c.useEffect)((function(){var e;"create"!==se&&"edit"!==se||!ve&&!(null===Xe||void 0===Xe?void 0:Xe.projectId)||(me.getRecordsInList({ids:[ve]}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;Ee((function(e){var t=null===n||void 0===n?void 0:n.filter((function(t){var n;return!(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.find((function(e){return e.id===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(t)),loading:!1}})),je.setFieldValue("projectId",ve||(null===Xe||void 0===Xe?void 0:Xe.projectId))})),Ft(ve,String((null===Xe||void 0===Xe||null===(e=Xe.Quotation)||void 0===e?void 0:e.id)||"")))}),[ve,se,null===Xe||void 0===Xe?void 0:Xe.projectId]);var Vt=(0,ie.jsxs)(m.Z,{children:[("create"===se||"edit"===se)&&(0,ie.jsx)(h.Z,{type:"primary",onClick:function(){return je.submit()},loading:et,children:"Preview"}),"preview"===se&&(0,ie.jsx)(ie.Fragment,{children:(null===Xe||void 0===Xe?void 0:Xe.status)===C.UY.Generated&&(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(h.Z,{type:"link",style:{color:"var(--color-dark-main)"},onClick:function(){return te((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:"edit",id:null===Xe||void 0===Xe?void 0:Xe.id})}))},children:"Edit"}),(0,ie.jsx)(p.Z,{title:(0,ie.jsxs)(ie.Fragment,{children:["An email will be sent to the client. A copy of it will be sent to you as well.",(0,ie.jsx)("br",{}),"Are you sure you want to submit this invoice?"]}),okText:"Yes",cancelText:"No",placement:"bottomRight",onConfirm:It,okButtonProps:{loading:et},zIndex:99999,children:(0,ie.jsx)(R.Tr,{trigger:["click"],size:"middle",type:"primary",label:"Submit",overlayStyle:{zIndex:1e4},items:[{label:"Mark as sent",value:"1"}].map((function(e,t){return{key:"option-".concat(t),label:e.label,onClick:function(){return wt(null===Xe||void 0===Xe?void 0:Xe.id)}}}))})})]})}),((null===Xe||void 0===Xe?void 0:Xe.status)===C.UY.Paid||(null===Xe||void 0===Xe?void 0:Xe.status)===C.UY.Canceled)&&(0,ie.jsx)("div",{children:C.UY[null===Xe||void 0===Xe?void 0:Xe.status]}),(null===Xe||void 0===Xe?void 0:Xe.status)===C.UY.Sent&&(0,ie.jsx)(B.Z,{item:Xe,setDrawer:te,onRefresh:ce,permissions:le})]});return(0,ie.jsxs)(Z.Z,{width:window.innerWidth>1300?1300:"100%",onClose:yt,open:re.open,destroyOnClose:!0,zIndex:9999,title:(0,ie.jsxs)(ie.Fragment,{children:["create"===se&&"Create Invoice","edit"===se&&"Editing Invoice of ".concat((null===Xe||void 0===Xe||null===(t=Xe.Client)||void 0===t?void 0:t.name)||""," - ").concat((null===Xe||void 0===Xe?void 0:Xe.invoiceNumber)||""),"preview"===se&&"Preview Invoice of ".concat((null===Xe||void 0===Xe||null===(n=Xe.Client)||void 0===n?void 0:n.name)||""," - ").concat((null===Xe||void 0===Xe?void 0:Xe.invoiceNumber)||"")]}),bodyStyle:{padding:"create"===se||"edit"===se?25:0,paddingTop:0},extra:Vt,children:[("create"===se||"edit"===se)&&(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)(u.Z,{form:je,onFinish:function(e){var t,n=(0,a.Z)((0,a.Z)({},e),{},{type:e.type||C.w2.Auto,hasSupervisionCharge:Le,projectId:(null===de||void 0===de?void 0:de.projectId)||e.projectId,milestoneIds:lt.ids});n.invoiceItems=null===(t=n.invoiceItems)||void 0===t?void 0:t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{id:void 0})})),function(e){var t,n,i;tt(!0);var o=new FormData,r=null===e||void 0===e||null===(t=e.file)||void 0===t?void 0:t.file;r&&o.append("file",r);var c=(0,a.Z)((0,a.Z)({},e),{},{file:o.get("file"),quotationId:(null===e||void 0===e?void 0:e.quotationId)||(null===de||void 0===de?void 0:de.id),expiryDate:null===e||void 0===e||null===(n=e.expiryDate)||void 0===n?void 0:n.format("YYYY-MM-DD"),issueDate:null===e||void 0===e||null===(i=e.issueDate)||void 0===i?void 0:i.format("YYYY-MM-DD")});if((null===c||void 0===c||!c.file)&&(null===c||void 0===c?void 0:c.type)===C.w2.Manual)return d.ZP.error("Please upload invoice file"),void tt(!1);switch(se){case"create":!0===le.createInvoice?null===fe||void 0===fe||fe.createRecord(c).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;null!==n&&void 0!==n&&n.file&&$e(n),d.ZP.success("Invoice created successfully"),ce(),te((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:"preview"})}))})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")})).finally((function(){tt(!1)})):(d.ZP.error("You don't have permission to create invoice"),tt(!1));break;case"edit":if(null===Xe||void 0===Xe||!Xe.id)return d.ZP.error("Invoice not found");null===fe||void 0===fe||fe.updateRecord(c,null===Xe||void 0===Xe?void 0:Xe.id).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;null!==n&&void 0!==n&&n.file&&$e(n),d.ZP.success("Invoice updated successfully"),ce(),te((function(e){return(0,a.Z)((0,a.Z)({},e),{},{type:"preview"})}))})).catch((function(e){var t=(0,A.S3)(e);d.ZP.error(t||"Something went wrong")})).finally((function(){tt(!1)}));break;default:d.ZP.error("Something went wrong"),tt(!1)}}(n)},children:[(0,ie.jsx)("div",{children:(0,ie.jsxs)(g.Z,{gutter:[10,10],children:[(0,ie.jsx)(y.Z,{span:window.innerWidth>1300&&(null===de||void 0===de||!de.id)?6:24,children:(0,ie.jsx)(u.Z.Item,{name:"invoiceNumber",initialValue:jt,rules:[{required:!0,message:"Please enter invoice number!"}],style:{marginBottom:0},children:(0,ie.jsx)(R.t7,{label:"Invoice Number",asterisk:!0,placeHolder:"Invoice Number",size:"w100",style:{marginTop:1},onChange:function(e){var t,n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value;Ae(n)}})})}),!(null!==de&&void 0!==de&&de.id)&&(0,ie.jsx)(y.Z,{span:window.innerWidth>1300?6:24,children:(0,ie.jsx)(u.Z.Item,{name:"projectId",style:{marginBottom:0},rules:[{required:!0,message:"Please select a project"}],children:(0,ie.jsx)(R.Ld,{label:"Project",loading:null===ze||void 0===ze?void 0:ze.loading,onSearch:function(e){return Zt(e)},options:null===ze||void 0===ze||null===(l=ze.data)||void 0===l?void 0:l.map((function(e){return{label:"".concat(e.referenceNumber," | ").concat(e.title),value:e.id}})),onSelect:function(e){Ft(e),je.setFieldsValue({quotationId:void 0}),Ie([]),ut((function(e){return(0,a.Z)((0,a.Z)({},e),{},{ids:[]})})),Dt(),Ct()}})})}),(0,ie.jsxs)(y.Z,{span:window.innerWidth>1300?6:24,children:[(0,ie.jsx)("label",{className:"font-size-sm color-dark-main",children:"Issue Date"}),(0,ie.jsx)(u.Z.Item,{name:"issueDate",initialValue:ne()(),style:{marginBottom:0},children:(0,ie.jsx)(x.Z,{placeholder:"Issue Date",className:F,popupClassName:q,open:vt.issueDate,showToday:!1,onOpenChange:function(e){return ft((function(t){return(0,a.Z)((0,a.Z)({},t),{},{issueDate:e})}))},renderExtraFooter:function(){return(0,ie.jsx)("div",{className:V,children:$.map((function(e){return(0,ie.jsxs)(h.Z,{type:"ghost",size:"small",onClick:function(){var t=ne()().subtract(e,"days");je.setFieldsValue({issueDate:t}),ft((function(e){return(0,a.Z)((0,a.Z)({},e),{},{issueDate:!1})}))},children:[e," days ago"]},e)}))})}})})]}),(0,ie.jsxs)(y.Z,{span:window.innerWidth>1300?6:24,children:[(0,ie.jsx)("label",{className:"font-size-sm color-dark-main",children:"Expiry Date"}),(0,ie.jsx)(u.Z.Item,{name:"expiryDate",initialValue:ne()().add(14,"days"),style:{marginBottom:5},children:(0,ie.jsx)(x.Z,{placeholder:"Expiry Date",className:F,popupClassName:q,open:vt.expiryDate,showToday:!1,onOpenChange:function(e){return ft((function(t){return(0,a.Z)((0,a.Z)({},t),{},{expiryDate:e})}))},renderExtraFooter:function(){return(0,ie.jsx)("div",{className:V,children:$.map((function(e){return(0,ie.jsxs)(h.Z,{type:"ghost",size:"small",onClick:function(){var t=ne()().add(e,"days");je.setFieldsValue({expiryDate:t}),ft((function(e){return(0,a.Z)((0,a.Z)({},e),{},{expiryDate:!1})}))},children:["In ",e," days"]},e)}))})}})})]})]})}),!(null!==de&&void 0!==de&&de.id)&&(null===Be||void 0===Be?void 0:Be.length)>0&&(0,ie.jsx)("div",{children:(0,ie.jsx)(u.Z.Item,{name:"quotationId",rules:[{required:!0,message:"Please select a quotation"}],children:(0,ie.jsx)(R.AP,{label:"Quotation",asterisk:!0,options:null===Be||void 0===Be?void 0:Be.map((function(e){return{label:(null===e||void 0===e?void 0:e.quoteNumber)||"Quote 0".concat(null===e||void 0===e?void 0:e.id),value:e.id}})),onSelect:function(e){var t=null===Be||void 0===Be?void 0:Be.find((function(t){return t.id===e}));Ie((null===t||void 0===t?void 0:t.QuotationMilestone)||[]),ut((function(e){return(0,a.Z)((0,a.Z)({},e),{},{ids:[]})})),Dt(),Ct()}})})}),(0,ie.jsx)(u.Z.Item,{name:"title",rules:[{required:!0,message:"Please input the title!"}],children:(0,ie.jsx)(R.t7,{label:"Title",placeHolder:"Title",style:{width:"100%"},asterisk:!0})}),(null===we||void 0===we?void 0:we.length)>0&&(0,ie.jsx)("div",{className:"my-5",children:function(){var e=[{title:"",dataIndex:"id",key:"id",render:function(e,t){var n;return(0,ie.jsx)("div",{className:"d-flex align-items-center",children:"supervision"===t.type?(0,ie.jsx)(s.Z,{checked:Le,className:"mb-2",style:{transform:"scale(1.5)"},onChange:function(e){return Tt(e)}}):(0,ie.jsx)(ie.Fragment,{children:null!==(n=lt.completedIds)&&void 0!==n&&n.includes(e)?(0,ie.jsx)(v.Z,{title:"This milestone is already completed",zIndex:10001,children:(0,ie.jsx)(I.Z,{style:{color:"var(--color-primary-main)",transform:"scale(1.5)"}})}):(0,ie.jsx)(s.Z,{checked:lt.ids.includes(e),style:{transform:"scale(1.5)"},onChange:function(t){return Mt(e,t.target.checked)}})})})}},{title:"Title",dataIndex:"title",key:"title",render:function(e){return(0,ie.jsx)("div",{className:"d-flex align-items-center",children:(0,ie.jsx)("span",{children:e})})}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(e){return(0,ie.jsxs)("span",{children:[e," AED"]})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return(0,ie.jsx)(ie.Fragment,{children:"supervision"!==(null===t||void 0===t?void 0:t.type)&&(0,ie.jsx)("span",{children:C._W[e]})})}}];return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(R.ZT,{color:"dark-main",className:"mb-2",children:"Select the milestones you want to add to the invoice"}),(0,ie.jsx)(f.Z,{columns:e,dataSource:Se,pagination:!1,rowKey:function(e){return e.id},scroll:{x:500}})]})}()}),(0,ie.jsx)(u.Z.List,{name:"invoiceItems",initialValue:J,children:function(e,t){var n=t.add,o=t.remove;return(0,ie.jsxs)(j.Z,{size:"small",className:"mb-2 w-100",headStyle:{padding:"0px 0.5rem",margin:0,backgroundColor:"var(--color-light"},bodyStyle:{overflowX:"auto",overflowY:"hidden"},title:(0,ie.jsxs)("div",{className:"d-flex justify-space-between align-center w-100",children:[(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",weight:"semi",children:"Invoice Items"}),(0,ie.jsxs)("span",{className:"font-weight-semi font-size-sm color-dark-main cursor-pointer",onClick:function(){return n()},children:[(0,ie.jsx)(k.Z,{})," Add More"]})]}),children:[(0,ie.jsx)(g.Z,{gutter:[10,10],style:{minWidth:1300,overflowX:"auto",overflowY:"hidden"},children:K.map((function(e,t){return(0,ie.jsx)(y.Z,{span:e.span,style:e.style,children:(0,ie.jsx)(R.ZT,{color:"dark-main",size:"normal",children:e.title})},"invoiceItem-".concat(t))}))}),e.map((function(e){var t,n,r=e.key,c=e.name,l=(0,i.Z)(e,oe);return(0,ie.jsxs)(g.Z,{gutter:[10,10],style:{minWidth:1300,overflowX:"auto",overflowY:"hidden"},children:[(0,ie.jsx)(y.Z,{span:4,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"productId"],initialValue:void 0,style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(R.AP,{options:null===St||void 0===St?void 0:St.map((function(e){return{label:"".concat(e.productCode," - ").concat(e.title),value:e.id}})),placeholder:"Select Product",onSelect:function(e){var t=null===St||void 0===St?void 0:St.find((function(t){return t.id===e})),n=je.getFieldValue("invoiceItems"),i=n[c];t&&(i.amount=t.unitPrice,i.taxRateId=t.taxRateId,i.accountId=t.accountId,i.title=t.title,i.quantity=t.quantity||1),je.setFieldsValue({invoiceItems:n}),Ct()}})}))}),(0,ie.jsx)(y.Z,{span:5,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"title"],initialValue:"",rules:[{required:!0,message:"Missing item title"}],style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(ae,{placeholder:"Title",className:z,autoSize:{minRows:1,maxRows:3}})}))}),(0,ie.jsx)(y.Z,{span:2,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"quantity"],initialValue:1,rules:[{required:!0,message:"Missing item quantity"},{pattern:/^[0-9]+$/,message:"Only whole numbers are allowed"}],style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(b.Z,{placeholder:"Quantity",style:{width:"100%"},className:z,onChange:Ct,parser:function(e){return e&&e.replace(/\$\s?|(,*)/g,"")||""},step:1,precision:0})}))}),(0,ie.jsx)(y.Z,{span:3,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"amount"],initialValue:"",rules:[{required:!0,message:"Missing item amount"}],style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(b.Z,{placeholder:"Unit Amount",style:{width:"100%"},className:z,onChange:Ct})}))}),(0,ie.jsx)(y.Z,{span:4,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"accountId"],initialValue:void 0,style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(R.AP,{options:null===Rt||void 0===Rt?void 0:Rt.map((function(e){return{label:"".concat(e.accountCode," - ").concat(e.title),value:e.id}})),placeholder:"Select Account"})}))}),(0,ie.jsx)(y.Z,{span:2,children:(0,ie.jsx)(u.Z.Item,(0,a.Z)((0,a.Z)({},l),{},{name:[c,"taxRateId"],initialValue:void 0,style:{width:"100%",marginBottom:0,marginTop:0===c?0:10},children:(0,ie.jsx)(R.AP,{style:{width:130},placeholder:"Select Tax Rate",dropdownStyle:{zIndex:1e4},options:null===Nt||void 0===Nt?void 0:Nt.map((function(e){return{label:e.title,value:e.id}})),onSelect:Ct})}))}),(0,ie.jsx)(y.Z,{span:3,style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:0===c?0:10},children:(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",weight:"semi",children:"".concat((t=je.getFieldValue(["invoiceItems",c,"quantity"]),n=je.getFieldValue(["invoiceItems",c,"amount"]),t&&n?(0,A.xG)(t*n):(0,A.xG)(0)))})}),(0,ie.jsx)(y.Z,{span:1,children:0!==c&&(0,ie.jsx)(R.op,{type:"danger",size:"normal",fontSize:"sm",disabled:0===c,onClick:function(){return function(e,t){ut((0,a.Z)((0,a.Z)({},lt),{},{ids:lt.ids.filter((function(e){return e!==t}))}));var n=je.getFieldValue(["invoiceItems",t,"id"]);n&&ut((function(e){return(0,a.Z)((0,a.Z)({},e),{},{ids:e.ids.filter((function(e){return e!==n}))})})),e(t),Ct()}(o,c)},style:{marginTop:0===c?0:10},children:(0,ie.jsx)(S.Z,{})})})]},r)}))]})}}),(0,ie.jsxs)(j.Z,{className:T,children:[(0,ie.jsxs)("div",{className:D,children:[(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",children:"Subtotal"}),(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",children:(0,A.xG)(ot.subtotal)})]}),ot.vatData&&Array.from(ot.vatData).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,ie.jsxs)("div",{className:D,children:[(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",children:"".concat(i.title," (").concat(i.vatRate,"%)")}),(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",children:(0,A.xG)(i.totalVat)})]},"VAT_DATA".concat(n))})),(0,ie.jsxs)("div",{className:D,children:[(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",weight:"bolder",children:"Total"}),(0,ie.jsx)(R.ZT,{color:"dark-main",size:"sm",weight:"bolder",children:(0,A.xG)(ot.total)})]})]}),(0,ie.jsx)(u.Z.Item,{name:"type",style:{marginBottom:5,marginTop:20},label:"Invoice Type",initialValue:De,children:(0,ie.jsx)(P.ZP.Group,{name:"type",buttonStyle:"solid",onChange:function(e){return Fe(e.target.value)},children:qt.map((function(e){return(0,ie.jsx)(P.ZP.Button,{value:Number(e.value),children:e.label},"invoiceType-".concat(e.value))}))})}),De===C.w2.Auto&&(0,ie.jsx)(w.Z,{message:"System will automatically generate invoice based on the above information",type:"warning",style:{marginTop:15}}),De===C.w2.Manual&&(0,ie.jsx)(R.wA,{name:"file"})]})}),"preview"===se&&(0,ie.jsx)(N.Z,{file:null===Xe||void 0===Xe?void 0:Xe.file,loading:!Xe,tip:"Please wait while we are preparing the invoice..."})]})}},3646:function(e,t,n){var i=n(29439),o=n(47313),a=n(55291),r=n(59491),c=n(5900),l=n(32697),u=n(37936),d=n(72333),s=n(3798),v=n(46417);t.Z=function(e){var t=e.item,n=e.onRefresh,f=e.setDrawer,m=e.permissions.changeInvoiceStatus,h=a.ZP.useMessage(),p=(0,i.Z)(h,2),Z=p[0],g=p[1],y=(0,o.useState)(!0),x=(0,i.Z)(y,2),j=x[0],b=x[1],P=(0,o.useMemo)((function(){return new d.b}),[]),w=function(e){Z.open({key:e.key,type:e.type,content:e.content,duration:"loading"===e.type?0:2})},I=function(e){if(t.id&&!0===m){w({key:"update",type:"loading",content:"Updating..."});var i={status:e,resumeProject:j};P.changeStatus(t.id,i).then((function(e){var t,i;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data&&(w({key:"update",type:"success",content:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message}),n(),f({type:"create",open:!1,id:0}))})).catch((function(e){var t=(0,s.S3)(e);w({key:"update",type:"error",content:t||"Something went wrong, please try again later."})}))}else w({key:"update",type:"error",content:"You don't have permission to change status"})};return(0,v.jsxs)(v.Fragment,{children:[g,(0,v.jsxs)("div",{className:"d-flex flex-column align-center font-size-sm color-dark-800",children:[(null===t||void 0===t?void 0:t.status)!==u.UY.Generated&&(null===t||void 0===t?void 0:t.status)!==u.UY.Sent&&(0,v.jsx)("span",{children:u.UY[null===t||void 0===t?void 0:t.status]}),(null===t||void 0===t?void 0:t.status)===u.UY.Generated&&(0,v.jsx)(r.Z,{size:"small",type:"ghost",style:{fontSize:"0.7rem"},onClick:function(e){e.stopPropagation(),f({type:"preview",open:!0,id:t.id})},children:"Send Invoice"}),(null===t||void 0===t?void 0:t.status)===u.UY.Sent&&(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(c.Z,{title:(0,v.jsxs)("div",{children:["Are you sure you want to mark this invoice as paid?",(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)(l.Z,{checked:j,onChange:function(e){b(e.target.checked)},children:"Resume Project"})})]}),okText:"Yes",cancelText:"No",placement:"bottomRight",onConfirm:function(e){null===e||void 0===e||e.stopPropagation(),I(u.UY.Paid)},zIndex:1e4,children:(0,v.jsx)(r.Z,{type:"ghost",size:"small",style:{fontSize:"0.7rem",borderColor:"var(--color-primary-main)",color:"var(--color-primary-main)"},onClick:function(e){return e.stopPropagation()},children:"Mark as Paid"})}),(0,v.jsx)(c.Z,{title:"Are you sure you want to cancel this invoice?",okText:"Yes",cancelText:"No",placement:"bottomRight",onConfirm:function(e){null===e||void 0===e||e.stopPropagation(),I(u.UY.Canceled)},onCancel:function(e){return null===e||void 0===e?void 0:e.stopPropagation()},zIndex:1e4,children:(0,v.jsx)(r.Z,{type:"ghost",size:"small",danger:!0,style:{fontSize:"0.7rem"},className:"ml-1",onClick:function(e){return null===e||void 0===e?void 0:e.stopPropagation()},children:"Mark as Cancelled"})})]})]})]})}},18223:function(e,t,n){n.d(t,{Y:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="account",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},39792:function(e,t,n){n.d(t,{p:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="branding-theme",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},48297:function(e,t,n){n.d(t,{V:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="client",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.findPublished=function(e){return a.Z.get("".concat(t.endPoint,"/find-published"),{params:e})},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},72333:function(e,t,n){n.d(t,{b:function(){return c}});var i=n(43144),o=n(15671),a=n(49075),r=n(3135),c=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="invoice",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/findOne/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e,{headers:r.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/updateOne/").concat(n),e,{headers:r.C})},this.submitInvoice=function(e){return a.Z.patch("".concat(t.endPoint,"/submitInvoice/").concat(e))},this.changeStatus=function(e,n){return console.log(n),a.Z.patch("".concat(t.endPoint,"/changeStatus/").concat(e),n)},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/remove/").concat(e))},this.markAsSent=function(e){return a.Z.patch("".concat(t.endPoint,"/markAsSent/").concat(e))},this.prepareUniqueInvoiceNumber=function(){return a.Z.get("".concat(t.endPoint,"/prepareUniqueInvoiceNumber"))},this.checkForDuplicacy=function(e){return a.Z.get("".concat(t.endPoint,"/checkForDuplicacy"),{params:e})},this.quickUpdate=function(e,n){return a.Z.patch("".concat(t.endPoint,"/quickUpdate/").concat(e),n)},this.addNote=function(e,n){return a.Z.post("".concat(t.endPoint,"/addNote/").concat(e),n)},this.getNoteById=function(e){return a.Z.get("".concat(t.endPoint,"/notes/").concat(e))},this.removeNote=function(e){return a.Z.delete("".concat(t.endPoint,"/removeNote/").concat(e))},this.getLogsById=function(e,n){return a.Z.get("".concat(t.endPoint,"/logs/").concat(e),{params:n})},this.markConcernAsResolved=function(e){return a.Z.patch("".concat(t.endPoint,"/markConcernAsResolved/").concat(e))},this.getCounts=function(){return a.Z.get("".concat(t.endPoint,"/getCounts"))}}))},76997:function(e,t,n){n.d(t,{s:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="product",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.findByCode=function(e){return a.Z.get("".concat(t.endPoint,"/find-by-product-code/").concat(e))},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},6027:function(e,t,n){n.d(t,{i:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="project-type",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getPublishRecords=function(e){return a.Z.get("".concat(t.endPoint,"/find-published"),{params:e})},this.getRecordById=function(e){return a.Z.get(t.endPoint+"/"+e)},this.deleteRecord=function(e){return a.Z.delete(t.endPoint+"/"+e)},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch(t.endPoint+"/"+n,e)}}))},42954:function(e,t,n){n.d(t,{K:function(){return c}});var i=n(43144),o=n(15671),a=n(49075),r=n(3135),c=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="quotation",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/findOne/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e,{headers:r.C})},this.autoCreateFromApprovedQuotation=function(e){return a.Z.post("".concat(t.endPoint,"/autoCreateProjectFromApprovedQuotation/"),e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/updateOne/").concat(n),e)},this.submitQuotation=function(e){return a.Z.patch("".concat(t.endPoint,"/submitQuotation/").concat(e))},this.changeStatus=function(e,n){return a.Z.patch("".concat(t.endPoint,"/changeStatus/").concat(e),{status:n})},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/remove/").concat(e))},this.completeMilestone=function(e){return a.Z.patch("".concat(t.endPoint,"/completeMilestone/").concat(e))},this.markAsSent=function(e){return a.Z.patch("".concat(t.endPoint,"/markAsSent/").concat(e))},this.prepareUniqueQuoteNumber=function(e){return a.Z.get("".concat(t.endPoint,"/prepareUniqueQuoteNumber"),{params:e})},this.checkForDuplicacy=function(e){return a.Z.get("".concat(t.endPoint,"/checkForDuplicacy"),{params:e})},this.quickUpdate=function(e,n){return a.Z.patch("".concat(t.endPoint,"/quickUpdate/").concat(e),n)}}))},75010:function(e,t,n){n.d(t,{L:function(){return r}});var i=n(43144),o=n(15671),a=n(49075),r=(0,i.Z)((function e(){var t=this;(0,o.Z)(this,e),this.endPoint="tax-rate",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)}}))},70584:function(e,t,n){n.d(t,{HH:function(){return c},JY:function(){return r},Ug:function(){return l},hx:function(){return a},vA:function(){return d},xy:function(){return u}});var i=n(29439),o=n(37936),a=function(e){return Object.entries(e).filter((function(e){var t=(0,i.Z)(e,1)[0];return isNaN(Number(t))})).map((function(e){var t=(0,i.Z)(e,2);return{label:t[0],value:t[1]}}))},r=a(o.dq),c=a(o.B1),l=a(o.LN),u=a(o.PH),d=a(o.fk)},95366:function(e,t,n){var i=n(87462),o=n(47313),a=n(95656),r=n(16141),c=function(e,t){return o.createElement(r.Z,(0,i.Z)({},e,{ref:t,icon:a.Z}))};t.Z=o.forwardRef(c)},37289:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(87462),o=n(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},r=n(16141),c=function(e,t){return o.createElement(r.Z,(0,i.Z)({},e,{ref:t,icon:a}))};var l=o.forwardRef(c)},70638:function(e,t,n){n.d(t,{Z:function(){return R}});var i=n(4942),o=n(87462),a=n(71002),r=n(46123),c=n.n(r),l=n(29439),u=n(45987),d=n(1413),s=n(47313),v=n(10288),f=n(16945),m=n(205),h=n(25266),p=n(72846),Z=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},g=function(e){return void 0!==e?"".concat(e,"px"):void 0};function y(e){var t=e.prefixCls,n=e.containerRef,i=e.value,o=e.getValueIndex,a=e.motionName,r=e.onMotionStart,u=e.onMotionEnd,v=e.direction,m=s.useRef(null),y=s.useState(i),x=(0,l.Z)(y,2),j=x[0],b=x[1],P=function(e){var i,a=o(e),r=null===(i=n.current)||void 0===i?void 0:i.querySelectorAll(".".concat(t,"-item"))[a];return(null===r||void 0===r?void 0:r.offsetParent)&&r},w=s.useState(null),I=(0,l.Z)(w,2),k=I[0],S=I[1],R=s.useState(null),N=(0,l.Z)(R,2),C=N[0],A=N[1];(0,p.Z)((function(){if(j!==i){var e=P(j),t=P(i),n=Z(e),o=Z(t);b(i),S(n),A(o),e&&t?r():u()}}),[i]);var M=s.useMemo((function(){return g("rtl"===v?-(null===k||void 0===k?void 0:k.right):null===k||void 0===k?void 0:k.left)}),[v,k]),T=s.useMemo((function(){return g("rtl"===v?-(null===C||void 0===C?void 0:C.right):null===C||void 0===C?void 0:C.left)}),[v,C]);return k&&C?s.createElement(h.ZP,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onAppearEnd:function(){S(null),A(null),u()}},(function(e,n){var i=e.className,o=e.style,a=(0,d.Z)((0,d.Z)({},o),{},{"--thumb-start-left":M,"--thumb-start-width":g(null===k||void 0===k?void 0:k.width),"--thumb-active-left":T,"--thumb-active-width":g(null===C||void 0===C?void 0:C.width)}),r={ref:(0,f.sQ)(m,n),style:a,className:c()("".concat(t,"-thumb"),i)};return s.createElement("div",r)})):null}var x=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function j(e){return e.map((function(e){if("object"===(0,a.Z)(e)&&null!==e){var t=function(e){return"undefined"!==typeof e.title?e.title:"object"!==(0,a.Z)(e.label)?null===(t=e.label)||void 0===t?void 0:t.toString():void 0;var t}(e);return(0,d.Z)((0,d.Z)({},e),{},{title:t})}return{label:null===e||void 0===e?void 0:e.toString(),title:null===e||void 0===e?void 0:e.toString(),value:e}}))}var b=function(e){var t=e.prefixCls,n=e.className,o=e.disabled,a=e.checked,r=e.label,l=e.title,u=e.value,d=e.onChange;return s.createElement("label",{className:c()(n,(0,i.Z)({},"".concat(t,"-item-disabled"),o))},s.createElement("input",{className:"".concat(t,"-item-input"),type:"radio",disabled:o,checked:a,onChange:function(e){o||d(e,u)}}),s.createElement("div",{className:"".concat(t,"-item-label"),title:l},r))},P=s.forwardRef((function(e,t){var n,a,r=e.prefixCls,d=void 0===r?"rc-segmented":r,h=e.direction,p=e.options,Z=e.disabled,g=e.defaultValue,P=e.value,w=e.onChange,I=e.className,k=void 0===I?"":I,S=e.motionName,R=void 0===S?"thumb-motion":S,N=(0,u.Z)(e,x),C=s.useRef(null),A=s.useMemo((function(){return(0,f.sQ)(C,t)}),[C,t]),M=s.useMemo((function(){return j(p)}),[p]),T=(0,v.Z)(null===(n=M[0])||void 0===n?void 0:n.value,{value:P,defaultValue:g}),D=(0,l.Z)(T,2),F=D[0],q=D[1],V=s.useState(!1),z=(0,l.Z)(V,2),E=z[0],Y=z[1],U=function(e,t){Z||(q(t),null===w||void 0===w||w(t))},B=(0,m.Z)(N,["children"]);return s.createElement("div",(0,o.Z)({},B,{className:c()(d,(a={},(0,i.Z)(a,"".concat(d,"-rtl"),"rtl"===h),(0,i.Z)(a,"".concat(d,"-disabled"),Z),a),k),ref:A}),s.createElement("div",{className:"".concat(d,"-group")},s.createElement(y,{prefixCls:d,value:F,containerRef:C,motionName:"".concat(d,"-").concat(R),direction:h,getValueIndex:function(e){return M.findIndex((function(t){return t.value===e}))},onMotionStart:function(){Y(!0)},onMotionEnd:function(){Y(!1)}}),M.map((function(e){return s.createElement(b,(0,o.Z)({key:e.value,prefixCls:d,className:c()(e.className,"".concat(d,"-item"),(0,i.Z)({},"".concat(d,"-item-selected"),e.value===F&&!E)),checked:e.value===F,onChange:U},e,{disabled:!!Z||!!e.disabled}))}))))}));P.displayName="Segmented",P.defaultProps={options:[]};var w=P,I=n(74714),k=n(21631),S=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};var R=s.forwardRef((function(e,t){var n,r=e.prefixCls,l=e.className,u=e.block,d=e.options,v=void 0===d?[]:d,f=e.size,m=void 0===f?"middle":f,h=S(e,["prefixCls","className","block","options","size"]),p=s.useContext(I.E_),Z=p.getPrefixCls,g=p.direction,y=Z("segmented",r),x=s.useContext(k.Z),j=m||x,b=s.useMemo((function(){return v.map((function(e){if(function(e){return"object"===(0,a.Z)(e)&&!!(null===e||void 0===e?void 0:e.icon)}(e)){var t=e.icon,n=e.label,i=S(e,["icon","label"]);return(0,o.Z)((0,o.Z)({},i),{label:s.createElement(s.Fragment,null,s.createElement("span",{className:"".concat(y,"-item-icon")},t),n&&s.createElement("span",null,n))})}return e}))}),[v,y]);return s.createElement(w,(0,o.Z)({},h,{className:c()(l,(n={},(0,i.Z)(n,"".concat(y,"-block"),u),(0,i.Z)(n,"".concat(y,"-sm"),"small"===j),(0,i.Z)(n,"".concat(y,"-lg"),"large"===j),n)),options:b,ref:t,prefixCls:y,direction:g}))}))}}]);