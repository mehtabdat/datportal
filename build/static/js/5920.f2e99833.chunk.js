"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[5920],{75920:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var a=n(74165),i=n(15861),l=n(4942),d=n(1413),o=n(29439),u=n(47313),r=n(82626),s=n(7532),c=n(86136),v=n(41586),m=n(98505),g=n(46417),f=c.Z.TextArea;function p(e){var t=e.tableData,n=e.tableLoading,a=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"60px"},{title:"Subject",dataIndex:"subject",key:"subject",render:function(e){return(0,g.jsx)(r.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Email",dataIndex:"email",key:"email",render:function(e){return(0,g.jsx)(r.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Calle Function",dataIndex:"calleFunction",key:"calleFunction",render:function(e){return(0,g.jsx)(r.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Date Added",className:"text-center",dataIndex:"addedDate",key:"addedDate",render:function(e){return(0,g.jsx)(r.ZT,{color:"dark-main",size:"sm",children:(0,m.Ny)(e,"dd M,yy-t")})}},{title:"Template",dataIndex:"template",key:"template",render:function(e){return(0,g.jsx)(r.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Data",dataIndex:"data",key:"data",render:function(e){return(0,g.jsx)(f,{rows:4,value:JSON.stringify(e,null,2)})}}];return(0,g.jsx)("div",{children:(0,g.jsx)(v.Z,{sticky:!0,dataSource:t,columns:a,pagination:!1,scroll:{x:991},loading:n})})}var Z=n(3113),x=n(70925),h=[{text:"Home",isLink:!0,path:"/"},{text:"Site Settings",isLink:!0,path:"/siteSettings"},{isLink:!1,text:"Mail Logs"}],j=function(){var e,t,n,c,v=(0,u.useState)({loading:!1,data:[]}),f=(0,o.Z)(v,2),j=f[0],y=f[1],b=(0,u.useMemo)((function(){return new x.O}),[]),k=(0,u.useState)({subject:"",email:"",template:""}),S=(0,o.Z)(k,2),L=S[0],C=S[1],D=(0,u.useState)(!1),R=(0,o.Z)(D,2),T=R[0],M=R[1],N=function(e){var t=null===e||void 0===e?void 0:e.target,n=t.name,a=t.value;C((0,d.Z)((0,d.Z)({},L),{},(0,l.Z)({},n,a)))},w=(0,u.useCallback)((0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y({loading:!0}),b.getMailLogs().then((function(e){y((0,d.Z)((0,d.Z)({},e.data),{},{loading:!1}))})).catch((function(e){y({loading:!1})}));case 2:case"end":return e.stop()}}),e)}))),[b]);(0,u.useEffect)((function(){w()}),[w]);var z=(0,u.useCallback)((function(){var e,t,n=(null===(e=L.dateRange)||void 0===e?void 0:e[0])||"",a=(null===(t=L.dateRange)||void 0===t?void 0:t[1])||"",i=n?(0,m.Ny)(n,"yy-mm-dd"):void 0,l=a?(0,m.Ny)(a,"yy-mm-dd"):void 0,o={subject:(null===L||void 0===L?void 0:L.subject)||void 0,email:(null===L||void 0===L?void 0:L.email)||void 0,template:(null===L||void 0===L?void 0:L.template)||void 0,fromDate:i,toDate:l};b.getMailLogs(o).then((function(e){y((0,d.Z)((0,d.Z)({},e.data),{},{loading:!1}))})).catch((function(e){y({loading:!1})}))}),[L,b]),I=(0,u.useCallback)((function(e,t){e&&(M(!0),C((0,d.Z)((0,d.Z)({},L),{},(0,l.Z)({},e,t))))}),[L]),E=(0,u.useCallback)((function(e,t){var n,a;y((0,d.Z)((0,d.Z)({},j),{},{loading:!0}));var i=(null===(n=L.dateRange)||void 0===n?void 0:n[0])||"",l=(null===(a=L.dateRange)||void 0===a?void 0:a[1])||"",o=i?(0,m.Ny)(i,"yy-mm-dd"):void 0,u=l?(0,m.Ny)(l,"yy-mm-dd"):void 0,r={page:e,perPage:t,subject:(null===L||void 0===L?void 0:L.subject)||void 0,email:(null===L||void 0===L?void 0:L.email)||void 0,template:(null===L||void 0===L?void 0:L.template)||void 0,fromDate:o,toDate:u};b.getMailLogs(r).then((function(e){y((0,d.Z)((0,d.Z)({},e.data),{},{loading:!1}))})).catch((function(e){y({loading:!1})}))}),[b,L,j]);return(0,u.useEffect)((function(){T&&z();var e=setTimeout((function(){M(!1)}),2e3);return function(){return clearTimeout(e)}}),[T,L,z]),(0,g.jsxs)(s.default,{children:[(0,g.jsx)(r.mr,{heading:"Mail Logs",breadCrumbData:h,filters:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:(0,g.jsx)(r.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){C((0,d.Z)((0,d.Z)({},L),{},{dateRange:e}))},onReset:function(){return I("dateRange",[])},onUpdate:z})}),(0,g.jsx)("div",{children:(0,g.jsx)(r.Xy,{type:"input",label:"Subject",name:"subject",value:null!==L&&void 0!==L&&L.subject?String(null===L||void 0===L?void 0:L.subject):"",onChange:N,onReset:function(){M(!0),C((0,d.Z)((0,d.Z)({},L),{},{subject:""}))},onUpdate:z})}),(0,g.jsx)("div",{children:(0,g.jsx)(r.Xy,{type:"input",label:"Template",name:"template",value:null!==L&&void 0!==L&&L.template?String(null===L||void 0===L?void 0:L.template):"",onChange:N,onReset:function(){M(!0),C((0,d.Z)((0,d.Z)({},L),{},{template:""}))},onUpdate:z})}),(0,g.jsx)("div",{children:(0,g.jsx)(r.Xy,{type:"email",label:"Email",name:"email",value:null!==L&&void 0!==L&&L.email?String(null===L||void 0===L?void 0:L.email):"",onChange:N,onReset:function(){M(!0),C((0,d.Z)((0,d.Z)({},L),{},{email:""}))},onUpdate:z})})]})}),(0,g.jsx)("div",{className:Z.Z.antdTableWrapper,children:(0,g.jsx)(p,{tableData:null===j||void 0===j?void 0:j.data,tableLoading:j.loading})}),(0,g.jsx)(r.tl,{total:null===j||void 0===j||null===(e=j.meta)||void 0===e?void 0:e.total,current:null===j||void 0===j||null===(t=j.meta)||void 0===t?void 0:t.page,defaultPageSize:null!==j&&void 0!==j&&null!==(n=j.meta)&&void 0!==n&&n.perPage?null===j||void 0===j||null===(c=j.meta)||void 0===c?void 0:c.perPage:10,pageSizeOptions:[10,20,50,100],onChange:E})]})}},70925:function(e,t,n){n.d(t,{O:function(){return d}});var a=n(43144),i=n(15671),l=n(49075),d=(0,a.Z)((function e(){var t=this;(0,i.Z)(this,e),this.mail="mail",this.systemLogs="system-logs",this.getMailLogs=function(e){return l.Z.get("".concat(t.mail,"/readMailSentLogs"),{params:e})},this.getSystemLogs=function(e){return l.Z.get("".concat(t.systemLogs,"/readSystemLogs"),{params:e})}}))}}]);