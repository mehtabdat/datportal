"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[8903],{8903:function(e,n,a){a.r(n),a.d(n,{default:function(){return I}});var t=a(74165),d=a(15861),o=a(4942),i=a(1413),l=a(29439),r=a(47313),u=a(82626),s=a(7532),c=a(86136),m=a(41586),g=a(98505),v=a(46417),y=c.Z.TextArea;function b(e){var n=e.tableData,a=e.tableLoading,t=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,a){return a+1},width:"60px"},{title:"Table",dataIndex:"table",key:"table",render:function(e,n){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Name: ".concat(e)}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Column Key: ".concat(n.tableColumnKey)}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Column Value: ".concat(n.tableColumnValue)})]})}},{title:"User Meta",dataIndex:"addedById",key:"addedById",render:function(e,n){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"User ID: ".concat(e)}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Organization ID: ".concat(n.organizationId||"N/A")}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Country ID: ".concat(n.countryId||"N/A")})]})}},{title:"Controller Name",dataIndex:"controllerName",key:"controllerName",render:function(e){return(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Action",dataIndex:"actionType",key:"actionType",render:function(e,n){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Type: ".concat(e)}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Message: ".concat(n.message)}),(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:"Endpoint: ".concat(n.endPoint)})]})}},{title:"Date Added",className:"text-center",dataIndex:"addedDate",key:"addedDate",render:function(e){return(0,v.jsx)(u.ZT,{color:"dark-main",size:"sm",children:(0,g.Ny)(e,"dd M,yy-t")})}},{title:"Data",dataIndex:"data",key:"data",render:function(e){return(0,v.jsx)(y,{rows:4,value:JSON.stringify(e,null,2)})}}];return(0,v.jsx)("div",{children:(0,v.jsx)(m.Z,{sticky:!0,dataSource:n,columns:t,pagination:!1,scroll:{x:991},loading:a})})}var f=a(3113),h=a(70925),x=a(3798),Z=a(55291),p=[{text:"Home",isLink:!0,path:"/"},{text:"Site Settings",isLink:!0,path:"/siteSettings"},{isLink:!1,text:"System Logs"}],I=function(){var e,n,a,c,m=(0,r.useState)({loading:!1,data:[]}),y=(0,l.Z)(m,2),I=y[0],C=y[1],j=(0,r.useMemo)((function(){return new h.O}),[]),k=(0,r.useState)({table:"",tableColumnKey:"",tableColumnValue:"",organizationId:0,addedById:0}),z=(0,l.Z)(k,2),S=z[0],T=z[1],D=(0,r.useState)(!1),L=(0,l.Z)(D,2),B=L[0],N=L[1],R=function(e){var n=null===e||void 0===e?void 0:e.target,a=n.name,t=n.value;if(("organizationId"===a||"addedById"===a)&&!(0,x.hj)(t)){var d="";switch(a){case"organizationId":d="Organization ID";break;case"addedById":d="User ID"}return Z.ZP.error("".concat(d," should be a number"))}T((0,i.Z)((0,i.Z)({},S),{},(0,o.Z)({},a,t)))},K=(0,r.useCallback)((0,d.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C({loading:!0}),j.getSystemLogs().then((function(e){C((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1}))})).catch((function(e){C({loading:!1})}));case 2:case"end":return e.stop()}}),e)}))),[j]);(0,r.useEffect)((function(){K()}),[K]);var V=(0,r.useCallback)((function(){var e,n,a=(null===(e=S.dateRange)||void 0===e?void 0:e[0])||"",t=(null===(n=S.dateRange)||void 0===n?void 0:n[1])||"",d=a?(0,g.Ny)(a,"yy-mm-dd"):void 0,o=t?(0,g.Ny)(t,"yy-mm-dd"):void 0,l={table:S.table||void 0,tableColumnKey:S.tableColumnKey||void 0,tableColumnValue:S.tableColumnValue||void 0,organizationId:S.organizationId>0?S.organizationId:void 0,addedById:S.addedById>0?S.addedById:void 0,fromDate:d,toDate:o};j.getSystemLogs(l).then((function(e){C((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1}))})).catch((function(e){C({loading:!1})}))}),[S,j]),U=(0,r.useCallback)((function(e,n){e&&(N(!0),T((0,i.Z)((0,i.Z)({},S),{},(0,o.Z)({},e,n))))}),[S]),w=(0,r.useCallback)((function(e,n){var a,t;C((0,i.Z)((0,i.Z)({},I),{},{loading:!0}));var d=(null===(a=S.dateRange)||void 0===a?void 0:a[0])||"",o=(null===(t=S.dateRange)||void 0===t?void 0:t[1])||"",l=d?(0,g.Ny)(d,"yy-mm-dd"):void 0,r=o?(0,g.Ny)(o,"yy-mm-dd"):void 0,u={page:e,perPage:n,table:S.table||void 0,tableColumnKey:S.tableColumnKey||void 0,tableColumnValue:S.tableColumnValue||void 0,organizationId:S.organizationId>0?S.organizationId:void 0,addedById:S.addedById>0?S.addedById:void 0,fromDate:l,toDate:r};j.getSystemLogs(u).then((function(e){C((0,i.Z)((0,i.Z)({},e.data),{},{loading:!1}))})).catch((function(e){C({loading:!1})}))}),[j,S,I]);return(0,r.useEffect)((function(){B&&V();var e=setTimeout((function(){N(!1)}),2e3);return function(){return clearTimeout(e)}}),[B,S,V]),(0,v.jsxs)(s.default,{children:[(0,v.jsx)(u.mr,{heading:"System Logs",breadCrumbData:p,filters:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){T((0,i.Z)((0,i.Z)({},S),{},{dateRange:e}))},onReset:function(){return U("dateRange",[])},onUpdate:V})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"input",label:"Table",name:"table",value:null!==S&&void 0!==S&&S.table?String(null===S||void 0===S?void 0:S.table):"",onChange:R,onReset:function(){N(!0),T((0,i.Z)((0,i.Z)({},S),{},{table:""}))},onUpdate:V})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"input",label:"Table Column Key",name:"tableColumnKey",value:null!==S&&void 0!==S&&S.tableColumnKey?String(null===S||void 0===S?void 0:S.tableColumnKey):"",onChange:R,onReset:function(){N(!0),T((0,i.Z)((0,i.Z)({},S),{},{tableColumnKey:""}))},onUpdate:V})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"input",label:"Table Column Value",name:"tableColumnValue",value:null!==S&&void 0!==S&&S.tableColumnValue?String(null===S||void 0===S?void 0:S.tableColumnValue):"",onChange:R,onReset:function(){N(!0),T((0,i.Z)((0,i.Z)({},S),{},{tableColumnValue:""}))},onUpdate:V})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"input",label:"Organization Id",name:"organizationId",value:null!==S&&void 0!==S&&S.organizationId?String(null===S||void 0===S?void 0:S.organizationId):"",onChange:R,onReset:function(){N(!0),T((0,i.Z)((0,i.Z)({},S),{},{organizationId:0}))},onUpdate:V})}),(0,v.jsx)("div",{children:(0,v.jsx)(u.Xy,{type:"input",label:"User Id",name:"addedById",value:null!==S&&void 0!==S&&S.addedById?String(null===S||void 0===S?void 0:S.addedById):"",onChange:R,onReset:function(){N(!0),T((0,i.Z)((0,i.Z)({},S),{},{addedById:0}))},onUpdate:V})})]})}),(0,v.jsx)("div",{className:f.Z.antdTableWrapper,children:(0,v.jsx)(b,{tableData:null===I||void 0===I?void 0:I.data,tableLoading:I.loading})}),(0,v.jsx)(u.tl,{total:null===I||void 0===I||null===(e=I.meta)||void 0===e?void 0:e.total,current:null===I||void 0===I||null===(n=I.meta)||void 0===n?void 0:n.page,defaultPageSize:null!==I&&void 0!==I&&null!==(a=I.meta)&&void 0!==a&&a.perPage?null===I||void 0===I||null===(c=I.meta)||void 0===c?void 0:c.perPage:10,pageSizeOptions:[10,20,50,100],onChange:w})]})}},70925:function(e,n,a){a.d(n,{O:function(){return i}});var t=a(43144),d=a(15671),o=a(49075),i=(0,t.Z)((function e(){var n=this;(0,d.Z)(this,e),this.mail="mail",this.systemLogs="system-logs",this.getMailLogs=function(e){return o.Z.get("".concat(n.mail,"/readMailSentLogs"),{params:e})},this.getSystemLogs=function(e){return o.Z.get("".concat(n.systemLogs,"/readSystemLogs"),{params:e})}}))}}]);