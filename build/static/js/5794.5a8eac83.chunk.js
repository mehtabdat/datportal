"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[5794],{65794:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var n=a(1413),r=a(29439),i=a(47313),o=a(85554),s=a(32782),d=a(7532),u=a(25019),l=a(82626),c="styles_actions__JHJtn",p="styles_bg__red__MAauY",f="styles_form__GrkeO",m="styles_footer__Qm7fd",v=a(49355),Z=a(46417),h=function(e){var t=e.openModal,a=e.onCancel,d=e.onFinish,c=e.buttonLoading,p=e.initialValues,h=e.type,y=(0,o.I0)(),x=u.Z.useForm(),b=(0,r.Z)(x,1)[0],g=(0,o.v9)((function(e){return e.areaUnitReducer})),k=g.addAreaUnitData,D=g.singleAreaUnitData,j=g.editAreaUnitData,A="new"===h?k.errorData:j.errorData;return(0,i.useEffect)((function(){var e;"edit"===h?b.setFieldsValue((0,n.Z)((0,n.Z)({},D.data),{},{isPublished:null===(e=D.data)||void 0===e?void 0:e.isPublished})):b.resetFields()}),[h,b,D]),(0,i.useEffect)((function(){"edit"===h&&y((0,s.cQ)(p.id))}),[y,p.id,h]),(0,Z.jsx)(l.P0,{visible:t,onCancel:a,titleText:"edit"===h?"Edit Area Unit":"Add Area Unit",showFooter:!1,children:D.loading?(0,Z.jsx)(v.Z,{items:4}):(0,Z.jsxs)(u.Z,{className:f,onFinish:d,form:b,children:[null!==A&&void 0!==A&&A.statusCode?(0,Z.jsx)(l.EQ,{description:null===A||void 0===A?void 0:A.message,isClosable:!0}):null,(0,Z.jsxs)("div",{children:[(0,Z.jsx)(u.Z.Item,{name:"name",rules:[{required:!0,message:"Please add area unit name"}],children:(0,Z.jsx)(l.t7,{size:"w100",label:"Name",asterisk:!0,type:"text"})}),(0,Z.jsx)(u.Z.Item,{name:"symbol",rules:[{required:!0,message:"Please add  a symbol"}],children:(0,Z.jsx)(l.t7,{size:"w100",label:"Symbol",asterisk:!0,type:"text"})})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(u.Z.Item,{name:"rate",rules:[{required:!0,message:"Please add a rate"}],children:(0,Z.jsx)(l.t7,{size:"w100",label:"Rate",asterisk:!0,type:"text"})}),(0,Z.jsx)(u.Z.Item,{name:"isPublished",children:(0,Z.jsx)(l.AP,{label:"Published",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}]})})]}),(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)(l.op,{size:"normal",fontSize:"sm",onClick:a,type:"plain",children:"Cancel"}),(0,Z.jsx)(l.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:c,children:"Submit"})]})]})})},y=a(55291),x=a(5900),b=a(86345),g=a(41586),k=a(98676),D=a(3109),j=function(e){var t=e.record,a=e.openModal,n=e.permissions,r=n.deleteAreaUnit,d=n.updateAreaUnit,u=(0,o.I0)(),l=(0,i.useCallback)((function(e){if(!1!==r)return u((0,s.fD)(e,(function(){return u((0,s.cQ)())})));y.ZP.error("You don't have permission to delete this record, please contact your admin.")}),[u]);return(0,Z.jsxs)("div",{className:c,children:[(0,Z.jsx)("span",{onClick:function(){!1!==d?a(t):y.ZP.error("You don't have permission to edit this record, please contact your admin.")},children:(0,Z.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,Z.jsx)(x.Z,{placement:"top",title:"Are you sure?",onConfirm:function(){return l(t.id)},okText:"Yes",cancelText:"No",children:(0,Z.jsx)(k.Z,{className:p})})]})};function A(e){var t=(0,o.v9)((function(e){return e.usersReducer})).userPermissions,a=e.tableData,n=e.tableLoading,r=e.openModal,i=(0,o.I0)(),d=(0,o.v9)((function(e){return e.areaUnitReducer})).editAreaUnitData,u=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,a){return a+1},width:"5%"},{title:"Name",dataIndex:"name",key:"name",render:function(e){return(0,Z.jsx)(D.Z,{color:"dark-main",size:"sm",weight:"bold",children:e})}},{title:"Symbol",dataIndex:"symbol",key:"symbol",render:function(e){return(0,Z.jsx)(D.Z,{color:"dark-sub",size:"sm",children:e})}},{title:"Rate",dataIndex:"rate",key:"rate",render:function(e){return(0,Z.jsx)(D.Z,{color:"dark-sub",size:"sm",children:e})}},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:function(e,a){return(0,Z.jsx)(b.Z,{checked:e,onChange:function(e){return function(e,a){!1!==t.updateAreaUnit?i((0,s.oJ)({isPublished:!!e},a,(function(){i((0,s.cQ)())}))):y.ZP.error("You don't have permission to edit this record, please contact your admin.")}(e,a)},loading:d.loading})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,a){return(0,Z.jsx)(j,{record:a,openModal:r,permissions:t})}}];return(0,Z.jsx)(g.Z,{sticky:!0,dataSource:a,columns:u,pagination:!1,loading:n,rowKey:function(e){return"area-unit-".concat(e.id)}})}var U=function(e){return e.CREATE="createAreaUnit",e.UPDATE="updateAreaUnit",e.DELETE="deleteAreaUnit",e.READ="readAreaUnit",e}({}),w=a(18515),P=a(3798),C=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Area Units"}];var R=function(){var e=(0,P.aY)(U),t=(0,o.v9)((function(e){return e.usersReducer})).userPermissions,a=t.readAreaUnit,u=t.createAreaUnit,c=t.updateAreaUnit,p=(0,o.I0)(),f=(0,i.useState)(!1),m=(0,r.Z)(f,2),v=m[0],x=m[1],b=(0,i.useState)("new"),g=(0,r.Z)(b,2),k=g[0],D=g[1],j=(0,i.useMemo)((function(){return{id:0,name:"",symbol:"",rate:0,isPublished:!1,isDeleted:!1}}),[]),R=(0,i.useState)(j),E=(0,r.Z)(R,2),_=E[0],I=E[1],S=(0,o.v9)((function(e){return e.areaUnitReducer})),Y=S.areaUnitData,z=S.addAreaUnitData,F=S.editAreaUnitData;(0,i.useEffect)((function(){p((0,s.cQ)())}),[p]);var N=(0,i.useCallback)((function(){!1!==u?(D("new"),x(!v),I(j)):y.ZP.error("You don't have permission to create new record")}),[v,j]),M=(0,i.useCallback)((function(e){I(e),D("edit"),x(!v)}),[v]),Q=(0,i.useCallback)((function(e){var t=e;switch(k){case"edit":if(!0===c){var a=(0,n.Z)((0,n.Z)({},t),{},{rate:parseFloat(t.rate)});p((0,s.oJ)(a,_,(function(){p((0,s.cQ)()),N()})))}else y.ZP.error("You don't have permission to update this record");break;case"new":if(!0===u){var r=(0,n.Z)((0,n.Z)({},t),{},{rate:parseFloat(t.rate)});p((0,s.C3)(r,(function(){p((0,s.cQ)()),N()})))}else y.ZP.error("You don't have permission to create new record")}}),[k,p,N,_]);return(0,Z.jsxs)(d.default,{permissionSlug:e,children:[(0,Z.jsx)(l.mr,{heading:"Area Units",buttonText:"Add New Area Unit",onButtonClick:N,breadCrumbData:C,showAdd:!0===u}),!0===a&&(0,Z.jsx)(A,{tableData:Y.data,tableLoading:Y.loading,openModal:M}),!1===a&&(0,Z.jsx)(w.a$,{mainMessage:"You don't have permission to view this data"}),(0,Z.jsx)(h,{initialValues:_,type:k,onFinish:Q,onCancel:N,openModal:v,buttonLoading:z.loading||F.loading})]})}},32782:function(e,t,a){a.d(t,{C3:function(){return l},cQ:function(){return u},fD:function(){return p},oJ:function(){return c}});var n=a(74165),r=a(1413),i=a(15861),o=a(49075),s=a(21955),d=a(40169),u=function(e){return function(){var t=(0,i.Z)((0,n.Z)().mark((function t(a,i){var u,l,c,p,f,m;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=i().areaUnitReducer,l=u.areaUnitData,c=u.singleAreaUnitData,p=e?c:l,f=e?s.pt:s.Fn,m=e?"area-unit/".concat(e):"area-unit",a({type:f,payload:(0,r.Z)((0,r.Z)({},p),{},{loading:!0})}),t.prev=5,t.next=8,o.Z.get(m).then((function(e){var t;a({type:f,payload:(0,r.Z)((0,r.Z)({},p),{},{loading:!1,data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data})})})).catch((function(e){var t=(0,d.P)(e);a({type:f,payload:(0,r.Z)((0,r.Z)({},p),{},{loading:!1,error:!0,errorData:t})})}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),a({type:f,payload:(0,r.Z)((0,r.Z)({},p),{},{loading:!1,errorData:t.t0})});case 13:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,a){return t.apply(this,arguments)}}()},l=function(e,t){return function(){var a=(0,i.Z)((0,n.Z)().mark((function a(i,u){var l;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=u().areaUnitReducer.addAreaUnitData,i({type:s.RD,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!0})}),a.prev=2,a.next=5,o.Z.post("area-unit",e).then((function(e){var a;i({type:s.RD,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,data:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data})}),t&&t()})).catch((function(e){var t=(0,d.P)(e);i({type:s.RD,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,errorData:t})}),setTimeout((function(){i({type:s.RD,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,errorData:{}})})}),5e3)}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),i({type:s.RD,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,errorData:a.t0})});case 10:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(e,t){return a.apply(this,arguments)}}()},c=function(e,t,a){return function(){var u=(0,i.Z)((0,n.Z)().mark((function i(u,l){var c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=l().areaUnitReducer.editAreaUnitData,u({type:s.E2,payload:(0,r.Z)((0,r.Z)({},c),{},{loading:!0})}),n.prev=2,n.next=5,o.Z.patch("area-unit/".concat(null===t||void 0===t?void 0:t.id),e).then((function(e){var t;u({type:s.E2,payload:(0,r.Z)((0,r.Z)({},c),{},{loading:!1,data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data})}),a&&a()})).catch((function(e){var t=(0,d.P)(e);u({type:s.E2,payload:(0,r.Z)((0,r.Z)({},c),{},{loading:!1,errorData:t})})}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),u({type:s.E2,payload:(0,r.Z)((0,r.Z)({},c),{},{loading:!1,errorData:n.t0})});case 10:case"end":return n.stop()}}),i,null,[[2,7]])})));return function(e,t){return u.apply(this,arguments)}}()},p=function(e,t){return function(){var a=(0,i.Z)((0,n.Z)().mark((function a(i,u){var l;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=u().areaUnitReducer.deleteAreaUnitData,i({type:s.Vm,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!0})}),a.prev=2,a.next=5,o.Z.delete("area-unit/".concat(e)).then((function(e){var a;i({type:s.Vm,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,data:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data})}),t&&t()})).catch((function(e){var t=(0,d.P)(e);i({type:s.Vm,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,errorData:t})})}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),i({type:s.Vm,payload:(0,r.Z)((0,r.Z)({},l),{},{loading:!1,errorData:a.t0})});case 10:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(e,t){return a.apply(this,arguments)}}()}}}]);