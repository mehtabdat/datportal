"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[694],{50008:function(e,t,n){n.d(t,{t:function(){return i}});var r=n(47312),a="styles_card__cH2rF",o=n(46417),i=function(){return(0,o.jsx)("div",{className:a,children:(0,o.jsx)(r.Z,{active:!0})})}},84802:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(1413),a=n(93433),o=n(29439),i=n(82626),s=n(54060),u="styles_container__+4yMb",l="styles_onlyMyTask__eho-m",c=n(47313),d=n(55291),v=n(49958),f=n(29079),p=n(95980),h=n(85554),g=n(94037),m=n(42623),Z=n(84825),x=n(47364),j=n(9057),y=n(3798),R=n(37936),S=n(50008),b=n(46417),k=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Employee Requests",path:"/employee-requests/?all"},{isLink:!1,text:"Leave Request"}],_=function(){var e,t,n=(0,y.aY)(g.t),_=(0,h.v9)((function(e){return e.usersReducer})).userPermissions,C=(0,c.useState)({userId:void 0,fetchOpenRequest:!0,status:void 0,fromDate:void 0,toDate:void 0,page:1,perPage:6}),q=(0,o.Z)(C,2),O=q[0],w=q[1],I=(0,c.useState)({recordId:0}),D=(0,o.Z)(I,2),L=D[0],P=D[1],N=(0,c.useState)(!1),M=(0,o.Z)(N,2),z=M[0],T=M[1],A=(0,c.useMemo)((function(){return new p.c}),[]),E=(0,f.$5)({method:A.getAllRecords,initialQuery:{perPage:O.perPage,page:O.page,fetchOpenRequest:!0}}),H=E.data,U=E.onRefresh,X=E.loading,Q=E.meta,V=(0,c.useState)(""),$=(0,o.Z)(V,2),B=$[0],F=$[1],Y=(0,m.N)(B,500),G=(0,c.useState)([]),J=(0,o.Z)(G,2),K=J[0],W=J[1],ee=(0,c.useMemo)((function(){return new Z.z}),[]),te=(0,c.useCallback)((function(){Y&&ee.getAllRecords({name:Y}).then((function(e){W((function(t){var n,r,o=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,a.Z)(t),(0,a.Z)(o))}))})).catch((function(e){d.ZP.error(e.response.data.message)}))}),[Y]);return(0,c.useEffect)((function(){te()}),[te]),(0,b.jsxs)(s.Z,{permissionSlug:n,children:[(0,b.jsx)(i.mr,{heading:"Leave Requests",breadCrumbData:k,filters:(0,b.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,b.jsx)("div",{children:(0,b.jsx)(i.Xy,{type:"radio",label:"User",name:"userId",withSearch:!0,options:null===K||void 0===K?void 0:K.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.id.toString()}})),onChange:function(e){var t=(0,r.Z)((0,r.Z)({},O),{},{userId:e.target.value});w(t)},value:null===(e=O.userId)||void 0===e?void 0:e.toString(),onReset:function(){var e=(0,r.Z)((0,r.Z)({},O),{},{userId:void 0});w(e),U(e),F("")},onUpdate:function(){return U(O)},searchTerm:B,onSearch:function(e){return F(e.currentTarget.value)}})}),(0,b.jsx)("div",{children:(0,b.jsx)(i.Xy,{type:"radio",label:"Status",name:"status",withSearch:!1,options:Object.entries(R.pC).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return{label:(0,y.kC)(r.status.replaceAll("_"," ")),value:n}})),onChange:function(e){var t=(0,r.Z)((0,r.Z)({},O),{},{status:e.target.value});w(t)},value:null===(t=O.status)||void 0===t?void 0:t.toString(),onReset:function(){var e=(0,r.Z)((0,r.Z)({},O),{},{status:void 0});w(e),U(e)},onUpdate:function(){return U(O)}})}),(0,b.jsx)("div",{children:(0,b.jsx)(i.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){var t,n,a,o,i=(0,r.Z)((0,r.Z)({},O),{},{fromDate:e?null===(t=e[0])||void 0===t||null===(n=t._d)||void 0===n?void 0:n.toISOString().substring(0,10):void 0,toDate:e?null===(a=e[1])||void 0===a||null===(o=a._d)||void 0===o?void 0:o.toISOString().substring(0,10):void 0});w(i)},onReset:function(){var e=(0,r.Z)((0,r.Z)({},O),{},{fromDate:void 0,toDate:void 0});w(e),U(e)},onUpdate:function(){return U(O)}})}),(0,b.jsx)("div",{style:{backgroundColor:O.fetchOpenRequest?"var(--color-dark-main)":void 0,color:O.fetchOpenRequest?"var(--color-inactive)":void 0},onClick:function(){var e=(0,r.Z)((0,r.Z)({},O),{},{fetchOpenRequest:!O.fetchOpenRequest||void 0});w(e),U(e)},className:l,children:"Open Requests Only"})]})}),(0,b.jsx)("section",{className:u,children:X?(0,a.Z)(new Array(6)).map((function(e,t){return(0,b.jsx)(S.t,{},"shimmer".concat(t))})):0!==(null===H||void 0===H?void 0:H.length)?null===H||void 0===H?void 0:H.map((function(e,t){return(0,b.jsx)(x._,{leaveRequest:e,onClick:function(){P((0,r.Z)((0,r.Z)({},L),{},{recordId:e.id})),T(!0)}},t)})):(0,b.jsx)("div",{style:{margin:"auto"},children:(0,b.jsx)(i.I$,{description:"No requests found for the given filters, please modify the search criteria"})})}),(0,b.jsx)(v.Z,{hideOnSinglePage:!0,current:null===Q||void 0===Q?void 0:Q.page,total:null===Q||void 0===Q?void 0:Q.total,pageSize:(null===Q||void 0===Q?void 0:Q.perPage)||0,onChange:function(e,t){U((0,r.Z)((0,r.Z)({},O),{},{page:e,perPage:t}))},style:{alignSelf:"flex-end"}}),z&&(0,b.jsx)(j.Q,{openDrawer:z,onClose:function(){return T(!1)},permissions:_,record:L.recordId,reloadTableData:U})]})}},10177:function(e,t,n){var r=n(87462),a=n(47313),o=n(63961),i=n(16141),s=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o.Z}))};t.Z=a.forwardRef(s)},15491:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(87462),a=n(47313),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},i=n(16141),s=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o}))};var u=a.forwardRef(s)}}]);