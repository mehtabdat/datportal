"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[3277],{41746:function(e,n,t){var o=t(29439),a=t(47313),i=t(28080),r=t(32697),d=t(78267),s=t(45705),c=t(32344),l=t(25568),u=t(46417);n.Z=function(e){var n=e.options,t=e.onChange,p=e.value,h=(0,a.useState)(!1),f=(0,o.Z)(h,2),v=f[0],m=f[1],g=(0,u.jsx)(i.Z,{children:(0,u.jsx)("div",{className:"pa-3",children:(0,u.jsx)(r.Z.Group,{className:l.Z.checkboxGroup,options:n,onChange:function(e){t(e),m(!1)},value:p})})});return(0,u.jsx)("div",{children:(0,u.jsx)(d.Z,{trigger:["click"],open:v,onOpenChange:function(e){return m(e)},dropdownRender:function(){return g},children:(0,u.jsx)("div",{className:l.Z.label,children:(0,u.jsxs)(s.Z,{children:[(0,u.jsx)("span",{children:"More Filters"}),(0,u.jsx)(c.Z,{})]})})})})}},13277:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var o=t(4942),a=t(1413),i=t(29439),r=t(47313),d=t(82626),s=t(49355),c=t(55291),l=t(5900),u=t(28080),p=t(78267),h=t(45705),f=t(41586),v=t(98676),m=t(32344),g=t(98505),y=t(42819),Z="styles_actions__mlQ1b",x="styles_bg__red__ooun-",j="styles_dropdown__45moo",b="styles_overlay__uLv-3",P="styles_overlay_item__SMiH-",C="styles_disabledButton__BN9jf",k="styles_tabs__+3Cge",N="styles_message__wplYt",S=t(85554),w=t(46417),R=function(e){var n=e.record,t=e.onEditIconClick,o=e.onAddNoteClick,d=e.reloadTableData,s=e.permissions.deleteLeads,u=(0,r.useMemo)((function(){return new y.S}),[]),p=(0,r.useState)({confirmLoading:!1,openPopConfirm:!1}),h=(0,i.Z)(p,2),f=h[0],m=h[1];return(0,w.jsxs)("div",{className:Z,children:[(0,w.jsx)("span",{onClick:function(){return t(n)},children:(0,w.jsx)("img",{src:"/images/editicon.svg",alt:"Edit Icon"})}),(0,w.jsx)("span",{onClick:function(){return o(n)},children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:19,height:19,children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})})}),(0,w.jsx)(l.Z,{open:f.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(m((0,a.Z)((0,a.Z)({},f),{},{confirmLoading:!0})),!1===s)return c.ZP.error("You don't have permission to delete this record, please contact your admin."),void m((0,a.Z)((0,a.Z)({},f),{},{openPopConfirm:!1}));u.deleteRecord(n.id).then((function(){m((0,a.Z)((0,a.Z)({},f),{},{openPopConfirm:!1,confirmLoading:!1})),d()})).catch((function(e){var n,t,o=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message;c.ZP.error(o||"Something went wrong, please try again later."),m((0,a.Z)((0,a.Z)({},f),{},{confirmLoading:!1}))}))},onCancel:function(){return m((0,a.Z)((0,a.Z)({},f),{},{openPopConfirm:!1}))},okButtonProps:{loading:f.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||m((0,a.Z)((0,a.Z)({},f),{},{openPopConfirm:!1}))},children:(0,w.jsx)(v.Z,{className:x,onClick:function(){m((0,a.Z)((0,a.Z)({},f),{},{openPopConfirm:!0}))}})})]})},I={1:"#00337C",2:"#144272",3:"#1F8A70",4:"#AD8E70",5:"#EB1D36",6:"#EB1D36"},_=function(e){var n=e.status,t=e.recordId,o=e.reloadTableData,a=e.changeStatus,d=c.ZP.useMessage(),s=(0,i.Z)(d,2),l=s[0],f=s[1],v=(0,r.useMemo)((function(){return new y.S}),[]),g=function(e){l.open({key:e.key,type:e.type,content:e.content,duration:"loading"===e.type?0:2})},Z=(0,r.useState)(!1),x=(0,i.Z)(Z,2),k=x[0],N=x[1],S=(0,w.jsxs)(u.Z,{className:"".concat(b," pa-2"),children:[f,Object.entries([]).map((function(e){var r=(0,i.Z)(e,2),d=r[0],s=r[1];return(0,w.jsx)("div",{className:P,onClick:function(){if(n!==Number(s)){var e=Number(s);i=e,t&&!0===a?(g({key:"update",type:"loading",content:"Updating..."}),v.changeStatus(Number(t),i).then((function(e){var n,t;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&(g({key:"update",type:"success",content:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message}),N(!k),o())})).catch((function(e){var n,t;g({key:"update",type:"error",content:null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message})}))):g({key:"update",type:"error",content:"You don't have permission to change status"})}var i},children:(0,w.jsx)("span",{className:n===Number(s)?C:"",children:d})},"leads-status-".concat(d))}))]});return(0,w.jsx)("div",{children:(0,w.jsx)(p.Z,{dropdownRender:function(){return S},trigger:!0===a?["click"]:[],open:!0===a&&k,onOpenChange:function(e){N(e)},className:j,children:(0,w.jsx)("div",{children:(0,w.jsxs)(h.Z,{style:{backgroundColor:I[n],color:"#fff",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.8rem",display:"flex",width:"100%",justifyContent:"space-between"},children:[Object.entries([]).map((function(e){var t=(0,i.Z)(e,2),o=t[0];return t[1]===String(n)&&o})),!0===a&&(0,w.jsx)(m.Z,{})]})})})})};function L(e){var n=e.tableData,t=e.tableLoading,o=e.emptyText,a=e.reloadTableData,i=e.onEditIconClick,r=e.onAddNoteClick,s=(0,S.v9)((function(e){return e.usersReducer})).userPermissions,c=s.updateLeadsStatus,l=s.updateLeads,u=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1},width:"60px"},{title:"User",dataIndex:"user",key:"user",render:function(e,n){return(0,w.jsx)("div",{className:"d-flex",children:(0,w.jsxs)("div",{className:"my-auto",children:[(0,w.jsx)(d.ZT,{color:"dark-sub",size:"xs",children:"Added: ".concat((0,g.Ny)(null===n||void 0===n?void 0:n.addedDate,"dd M,yy-t"))}),(null===n||void 0===n?void 0:n.modifiedDate)&&(0,w.jsx)(d.ZT,{color:"dark-sub",size:"xs",children:"Modified: ".concat((0,g.Ny)(null===n||void 0===n?void 0:n.modifiedDate,"dd M,yy-t"))})]})})},width:"15%"},{title:"Message",dataIndex:"message",key:"message",render:function(e,n){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(d.ZT,{color:"dark-main",size:"sm",className:N,children:e})})},width:"200px"}];return!0===c&&u.push({title:"Status",dataIndex:"status",key:"status",render:function(e,n){return(0,w.jsx)(_,{recordId:n.id,status:Number(e),reloadTableData:a,changeStatus:c})},width:"10%"}),!0===l&&u.push({title:"Actions",dataIndex:"actions",key:"actions",render:function(e,n){return(0,w.jsx)(R,{record:n,onEditIconClick:i,reloadTableData:a,onAddNoteClick:r,permissions:s})},width:"8%"}),(0,w.jsx)("div",{children:(0,w.jsx)(f.Z,{sticky:!0,dataSource:n,columns:u,pagination:!1,scroll:{x:991},loading:t,rowKey:function(e){return"leads-".concat(e.id)},locale:{emptyText:o}})})}var z=t(93433),T=t(31513),A=t(25019),D=t(6929),M=t(47312),B=t(98276),E=t(14254),O=t(17327),U={note:"styles_note__JhwtM",note_footer:"styles_note_footer__XjOHp",note_footer_name:"styles_note_footer_name__tBdVP",note_footer_date:"styles_note_footer_date__bzD6C"},F=t(46646),Y=t(40169),X=t(59816),V=t(8570),q=t(32147),H=(V.Z.Paragraph,function(e){var n=e.data,t=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1},width:"60px"},{title:"User",dataIndex:"user",key:"user",render:function(e,n){return(0,w.jsx)("div",{className:"d-flex",children:(0,w.jsx)("div",{className:"my-auto",children:(0,w.jsxs)("div",{className:"d-flex mt-4",children:[(0,w.jsx)(q.$$,{className:"mr-2"}),(0,w.jsx)(d.ZT,{color:"dark-sub",size:"sm",children:"".concat((0,g.Ny)(n.addedDate,"dd MM yy"))})]})})})},width:"18%"},{title:"Message",dataIndex:"message",key:"message",render:function(e){return(0,w.jsx)(d.ZT,{color:"dark-main",size:"sm",children:e})},width:"20%"}];return(0,w.jsx)(f.Z,{dataSource:n,columns:t})}),W=t(42623),$=t(82403),G=T.Z.Option,K=function(e){var n,t,o,l,u,p,h=e.openModal,f=e.onCancel,v=e.type,m=e.record,Z=e.reloadTableData,x=e.permissions,j=x.createLeads,b=x.updateLeads,P=A.Z.useForm(),C=(0,i.Z)(P,1)[0],N=(0,r.useMemo)((function(){return new y.S}),[]),S=(0,r.useMemo)((function(){return new X.Y}),[]),R=(0,r.useMemo)((function(){return new $.k}),[]),I=(0,r.useState)(),_=(0,i.Z)(I,2),L=_[0],V=_[1],q=(0,r.useState)([]),K=(0,i.Z)(q,2),Q=K[0],J=K[1],ee=(0,r.useState)(!1),ne=(0,i.Z)(ee,2),te=ne[0],oe=ne[1],ae=(0,r.useState)([]),ie=(0,i.Z)(ae,2),re=ie[0],de=ie[1],se=(0,r.useState)({data:[],loading:!1}),ce=(0,i.Z)(se,2),le=ce[0],ue=ce[1],pe=(0,r.useState)(""),he=(0,i.Z)(pe,2),fe=he[0],ve=he[1],me=(0,W.N)(fe,500),ge=function(e){var n=(0,Y.P)(e);if("string"==typeof n.message)V((0,a.Z)((0,a.Z)({},L),{},{error:n.message}));else{var t=(0,F.O)(n.message,[]);C.setFields(t),V((0,a.Z)((0,a.Z)({},L),{},{error:""}))}},ye=(0,r.useCallback)((function(){N.getRecordById(m).then((function(e){e.data&&e.data.data&&V((0,a.Z)((0,a.Z)({},e.data),{},{loading:!1}))})).catch((function(e){ge(e)}))}),[C,m,N]),Ze=(0,r.useCallback)((function(){S.getAvailableRecords().then((function(e){e.data&&e.data.data&&J(e.data.data)}))}),[S]),xe=(0,r.useCallback)((function(e){"notes"===v&&te&&N.notelogs(m,e).then((function(e){e.data&&e.data.data&&de(e.data.data)})).catch((function(e){ge(e)}))}),[N,m,v,te]);(0,r.useEffect)((function(){xe()}),[xe]);var je=(0,r.useCallback)((function(){me&&(ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),R.getAllRecords({title:me}).then((function(e){if(e.data.data){var n=e.data.data;ue((function(e){var t=n.filter((function(n){return!e.data.some((function(e){return e.id===n.id}))}));return(0,a.Z)((0,a.Z)({},e),{},{data:[].concat((0,z.Z)(e.data),(0,z.Z)(t)),loading:!1})}))}})).catch((function(e){c.ZP.error(e.response.data.message||"Something went wrong while fetching the properties"),ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})))}),[me]);(0,r.useEffect)((function(){je()}),[je]),(0,r.useEffect)((function(){"edit"===v?(V({loading:!0}),ye(),Ze()):"notes"===v?ye():C.resetFields()}),[h,v,C,ye,Ze]);return(0,w.jsx)(d.P0,{visible:h,closable:!0,onCancel:f,titleText:"edit"===v?"Edit Lead":"notes"===v?"Notes":"Add Lead",showFooter:!1,size:"notes"===v?"1000px":"600px",children:null!==L&&void 0!==L&&L.loading?(0,w.jsx)(s.Z,{items:10}):(0,w.jsxs)(A.Z,{className:O.Z.form,onFinish:function(e){switch(V((0,a.Z)((0,a.Z)({},L),{},{buttonLoading:!0})),v){case"edit":!0===b?N.updateRecord(e,m).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&Z(),f(),V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){ge(e),V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})):(V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),c.ZP.error("You don't have enough permission to update leads"));break;case"notes":break;case"new":!0===j||(V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),c.ZP.error("You don't have enough permission to create leads"))}},form:C,children:[(null===L||void 0===L?void 0:L.error)&&(0,w.jsx)(d.EQ,{description:null===L||void 0===L?void 0:L.error,isClosable:!0,onClose:function(){return V((0,a.Z)((0,a.Z)({},L),{},{error:""}))}}),"notes"===v?(0,w.jsxs)(D.Z,{type:"card",defaultActiveKey:"addNote",onChange:function(e){return oe("logs"===e)},className:k,children:[(0,w.jsxs)(D.Z.TabPane,{tab:"Notes",children:[(0,w.jsx)("div",{children:null===L||void 0===L||null===(n=L.data)||void 0===n||null===(t=n.leadNotes)||void 0===t?void 0:t.map((function(e){var n,t;return(0,w.jsxs)("div",{className:U.note,children:[(0,w.jsx)("div",{className:U.note_content,children:null===e||void 0===e?void 0:e.note}),(0,w.jsxs)("div",{className:U.note_footer,children:[(0,w.jsxs)("div",{className:U.note_footer_name,children:[null===e||void 0===e||null===(n=e.addedBy)||void 0===n?void 0:n.firstName," ",null===e||void 0===e||null===(t=e.addedBy)||void 0===t?void 0:t.lastName]}),(0,w.jsx)("div",{className:U.note_footer_date,children:(0,g.Ny)(null===e||void 0===e?void 0:e.addedDate,"dd M,yy-t")})]})]},"note-".concat(null===e||void 0===e?void 0:e.id))}))}),(0,w.jsx)(A.Z.Item,{name:"note",rules:[{required:!0,message:"Please add notes"}],children:(0,w.jsx)(d.t7,{size:"w100",label:"Notes",type:"textArea",name:"note",placeHolder:"Add notes here...."})})]},"addNote"),(0,w.jsx)(D.Z.TabPane,{tab:"Logs",children:(0,w.jsx)(H,{data:re})},"logs")]}):(0,w.jsxs)(w.Fragment,{children:["new"===v&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{children:(0,w.jsxs)(A.Z.Item,{name:"propertyId",rules:[{required:!0,message:"Please select a property"}],style:{marginTop:10},children:[(0,w.jsxs)("label",{className:"font-size-sm",children:["Property ",(0,w.jsx)("span",{className:"color-red-yp",children:"*"})]}),(0,w.jsx)(T.Z,{allowClear:!0,style:{width:"100%"},placeholder:"Search for a property",className:"selectAntdCustom",onChange:function(e){return C.setFieldsValue({propertyId:e})},showSearch:!0,onSearch:function(e){return ve(e)},optionFilterProp:"label",options:null===le||void 0===le||null===(o=le.data)||void 0===o?void 0:o.map((function(e){return{label:e.localization[0].title,value:e.id}})),notFoundContent:!0===(null===le||void 0===le?void 0:le.loading)?(0,w.jsx)(M.Z,{}):(0,w.jsx)(B.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,w.jsx)("span",{children:"No data found, Please search for a property"})})})]})}),(0,w.jsx)("div",{children:(0,w.jsx)(A.Z.Item,{name:"source",rules:[{required:!0,message:"Please select source"}],children:(0,w.jsx)(d.AP,{asterisk:!0,label:"Source",options:Object.entries([]).map((function(e){var n=(0,i.Z)(e,2),t=n[0];return{label:n[1],value:t}})),placeholder:"Select source"})})})]}),(0,w.jsx)("div",{children:(0,w.jsx)(A.Z.Item,{name:"name",rules:[{required:!0,message:"Please add name"}],children:(0,w.jsx)(d.t7,{size:"w100",label:"Name",asterisk:!0,type:"text"})})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:(0,w.jsxs)("label",{className:"font-size-sm",children:["Phone  ",(0,w.jsx)("span",{className:"color-red-yp",children:"*"}),(0,w.jsx)(A.Z.Item,{name:"phone",rules:[{required:!0,message:"Please add phone"}],children:(0,w.jsx)(E.Z,{type:"number",addonBefore:(0,w.jsx)(T.Z,{style:{width:98},placeholder:"Select phone code",defaultValue:"new"===v?"971":(null===L||void 0===L||null===(l=L.data)||void 0===l?void 0:l.phoneCode)||"971",children:null===Q||void 0===Q?void 0:Q.map((function(e){return(0,w.jsxs)(G,{value:e.phoneCode,children:[(0,w.jsx)("span",{children:e.flag}),(0,w.jsx)("span",{className:"ml-1",children:"".concat(e.phoneCode)})]})}))}),placeholder:"Enter phone number",defaultValue:"new"===v?"":null===L||void 0===L||null===(u=L.data)||void 0===u?void 0:u.phone,controls:!1})})]})}),(0,w.jsx)(A.Z.Item,{name:"email",rules:[{required:"new"===v,message:"Please add email"}],children:(0,w.jsx)(d.t7,{size:"w100",label:"Email",asterisk:"new"===v,type:"text"})})]}),(0,w.jsx)("div",{children:(0,w.jsx)(A.Z.Item,{name:"message",rules:[{required:!0,message:"Please add message"}],children:(0,w.jsx)(d.t7,{size:"w100",label:"Message",asterisk:!0,type:"textArea",defaultValue:"new"===v?"":null===L||void 0===L||null===(p=L.data)||void 0===p?void 0:p.message})})})]}),(0,w.jsxs)("div",{className:O.Z.footer,children:[(0,w.jsx)(d.op,{size:"normal",fontSize:"sm",onClick:f,type:"plain",children:"Cancel"}),(0,w.jsx)(d.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===L||void 0===L?void 0:L.buttonLoading,children:"Submit"})]})]})})},Q=t(3113),J=t(98522),ee=t(7532),ne=t(3798),te=t(38308),oe=t(41746),ae=t(5190),ie=t(59491),re=t(18515),de=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Leads"}],se=function(){var e,n,t,l,u,p,h,f=(0,ne.aY)(J.P),v=(0,S.v9)((function(e){return e.usersReducer})).userPermissions,m=v.readLeads,Z=v.createLeads,x=v.updateLeads,j=(0,r.useMemo)((function(){return new te.b}),[]),b=(0,r.useMemo)((function(){return new ae.L}),[]),P=(0,r.useMemo)((function(){return new y.S}),[]),C=(0,r.useState)(""),k=(0,i.Z)(C,2),N=k[0],R=k[1],I=(0,W.N)(N,500),_=(0,r.useState)([]),z=(0,i.Z)(_,2),T=z[0],A=z[1],D=(0,r.useState)({loading:!1,data:[]}),M=(0,i.Z)(D,2),B=M[0],E=M[1],O=(0,r.useState)({data:[],loading:!1}),U=(0,i.Z)(O,2),F=U[0],Y=U[1],X=(0,r.useState)({data:[],loading:!1}),V=(0,i.Z)(X,2),q=V[0],H=V[1],$=(0,r.useState)({editType:"new",recordId:0,openModal:!1}),G=(0,i.Z)($,2),se=G[0],ce=G[1],le=(0,r.useState)({status:"",dateRange:[""],name:"",propertyId:0,phone:"",email:"",propertyCategory:void 0,organizationId:0,propertyUrl:"",source:void 0,sortOrder:"",sortByField:""}),ue=(0,i.Z)(le,2),pe=ue[0],he=ue[1],fe=(0,r.useState)(!1),ve=(0,i.Z)(fe,2),me=ve[0],ge=ve[1],ye=(0,r.useState)([]),Ze=(0,i.Z)(ye,2),xe=Ze[0],je=Ze[1],be=function(e){var n=null===e||void 0===e?void 0:e.target,t=n.name,i=n.value;if(("organizationId"===t||"propertyId"===t)&&!(0,ne.hj)(i)){var r="";switch(t){case"organizationId":r="Organization ID";break;case"propertyId":r="Property ID"}return c.ZP.error("".concat(r," should be a number"))}he((0,a.Z)((0,a.Z)({},pe),{},(0,o.Z)({},t,i)))},Pe=(0,r.useCallback)((function(e,n){e&&(ge(!0),he((0,a.Z)((0,a.Z)({},pe),{},(0,o.Z)({},e,n))))}),[pe]),Ce=(0,r.useCallback)((function(){I&&(Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),b.findPublished({name:I}).then((function(e){var n,t=null===(n=e.data)||void 0===n?void 0:n.data;if(t){var o=t.filter((function(e,n){return t.findIndex((function(n){return n.id===e.id}))===n}));Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{data:o})}))}})).catch((function(e){var n,t;c.ZP.error((null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Something went wrong")})).finally((function(){Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})))}),[I,b]);(0,r.useEffect)((function(){Ce()}),[Ce]);var ke=(0,r.useCallback)((function(){j.getAllRecords().then((function(e){H(e.data)})).catch((function(){H((0,a.Z)((0,a.Z)({},q),{},{loading:!1}))}))}),[q]);(0,r.useEffect)((function(){ke()}),[]);var Ne=(0,r.useCallback)((function(e){var n,t,o=(null===(n=pe.dateRange)||void 0===n?void 0:n[0])||"",i=(null===(t=pe.dateRange)||void 0===t?void 0:t[1])||"",r=o?(0,g.Ny)(o,"yy-mm-dd"):void 0,d=i?(0,g.Ny)(i,"yy-mm-dd"):void 0,s=(0,a.Z)({status:pe.status?pe.status:void 0,name:pe.name?pe.name:void 0,propertyId:Number(pe.propertyId)>0?Number(pe.propertyId):void 0,email:pe.email?pe.email:void 0,phone:pe.phone?pe.phone:void 0,fromDate:r,toDate:d,propertyCategory:pe.propertyCategory?pe.propertyCategory:void 0,organizationId:Number(pe.organizationId)>0?Number(pe.organizationId):void 0,propertyUrl:pe.propertyUrl?pe.propertyUrl:void 0,source:pe.source?pe.source:void 0,sortOrder:pe.sortOrder?pe.sortOrder:void 0,sortByField:pe.sortByField?pe.sortByField:void 0},e);P.getAllRecords(s).then((function(e){var n,t;E((0,a.Z)((0,a.Z)({},B),{},{loading:!1,data:null===(n=e.data)||void 0===n?void 0:n.data,meta:null===(t=e.data)||void 0===t?void 0:t.meta}))}))}),[pe,P]);(0,r.useEffect)((function(){me&&Ne();var e=setTimeout((function(){ge(!1)}),2e3);return function(){return clearTimeout(e)}}),[me,pe,Ne]);var Se=(0,r.useCallback)((function(e){P.getAllRecords(e).then((function(e){E(e.data)})).catch((function(e){}))}),[P]);(0,r.useEffect)((function(){E((0,a.Z)((0,a.Z)({},B),{},{loading:!0})),Se()}),[]);var we=[{label:"Organization",value:"organizationId"},{label:"Phone",value:"phone"},{label:"Email",value:"email"},{label:"Property URL",value:"propertyUrl"}],Re={organizationId:(0,w.jsx)(d.Xy,{type:"radio",label:"Organization",name:"organizationId",withSearch:!0,options:null===F||void 0===F||null===(e=F.data)||void 0===e?void 0:e.map((function(e){return{label:e.name,value:"".concat(e.id)}})),onChange:be,value:Number(null===pe||void 0===pe?void 0:pe.organizationId)>0?String(null===pe||void 0===pe?void 0:pe.organizationId):"",onReset:function(){ge(!0),Pe("organizationId",0),R("")},onUpdate:Ne,loading:null===F||void 0===F?void 0:F.loading,searchTerm:N,onSearch:function(e){return R(e.currentTarget.value)}}),phone:(0,w.jsx)(d.Xy,{type:"input",label:"Phone",name:"phone",value:String(null===pe||void 0===pe?void 0:pe.phone),onChange:be,onReset:function(){return Pe("phone","")},onUpdate:Ne}),email:(0,w.jsx)(d.Xy,{type:"email",label:"Email",name:"email",value:String(null===pe||void 0===pe?void 0:pe.email),onChange:be,onReset:function(){return Pe("email","")},onUpdate:Ne}),propertyUrl:(0,w.jsx)(d.Xy,{type:"input",label:"Property URL",name:"propertyUrl",value:String(null===pe||void 0===pe?void 0:pe.propertyUrl),onChange:be,onReset:function(){return Pe("propertyUrl","")},onUpdate:Ne})},Ie=(0,r.useCallback)((function(){var e;if((null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.length)>0){var n,t=null===B||void 0===B||null===(n=B.data)||void 0===n?void 0:n.map((function(e){}));je(t)}}),[B]);return(0,r.useEffect)((function(){Ie()}),[Ie]),(0,w.jsxs)(ee.default,{permissionSlug:f,children:[(0,w.jsx)(d.mr,{heading:"Leads",breadCrumbData:de,showAdd:!0===v.createLeads,buttonText:"Add Lead",onButtonClick:function(){!1!==Z?ce((0,a.Z)((0,a.Z)({},se),{},{openModal:!se.openModal,editType:"new"})):c.ZP.error("You don't have permission to create new record")},positionChildren:"new-line",filters:m?(0,w.jsxs)("div",{className:Q.Z.filterWrapper,children:[(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"radio",label:"Status",name:"status",options:[],value:String(null===pe||void 0===pe?void 0:pe.status),onChange:be,onReset:function(){return Pe("status","")},onUpdate:Ne})}),(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"input",label:"Name",name:"name",value:String(null===pe||void 0===pe?void 0:pe.name),onChange:be,onReset:function(){return Pe("name","")},onUpdate:Ne})}),(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"input",label:"Property ID",name:"propertyId",value:Number(null===pe||void 0===pe?void 0:pe.propertyId)>0?String(null===pe||void 0===pe?void 0:pe.propertyId):"",onChange:be,onReset:function(){return Pe("propertyId",0)},onUpdate:Ne})}),(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"radio",label:"Property Category",name:"propertyCategory",options:null===q||void 0===q||null===(n=q.data)||void 0===n?void 0:n.map((function(e){return{label:e.localization[0].title,value:e.slug}})),value:String(null===pe||void 0===pe?void 0:pe.propertyCategory),onChange:be,onReset:function(){return Pe("propertyCategory","")},onUpdate:Ne})}),(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"radio",label:"Source",name:"source",options:Object.entries([]).map((function(e){var n=(0,i.Z)(e,2),t=n[0];return{label:n[1],value:t}})),value:String(null===pe||void 0===pe?void 0:pe.source),onChange:be,onReset:function(){return Pe("source","")},onUpdate:Ne})}),(0,w.jsx)("div",{children:(0,w.jsx)(d.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){he((0,a.Z)((0,a.Z)({},pe),{},{dateRange:e}))},onReset:function(){return Pe("dateRange",[])},onUpdate:Ne})}),Object.keys(Re).map((function(e){return(null===T||void 0===T?void 0:T.includes(e))&&Re[e]})),(0,w.jsx)("div",{children:(0,w.jsx)(oe.Z,{options:null===we||void 0===we?void 0:we.map((function(e){return{label:e.label,value:e.value}})),onChange:function(e){return A(e)},value:T})}),(0,w.jsx)("div",{style:{marginLeft:"auto",marginRight:"0px"},children:(0,w.jsx)(d.Xy,{type:"radio",label:"Sort By",name:"sortByField",options:[{label:"Name",value:"name"},{label:"Email",value:"email"},{label:"Date Added",value:"addedDate"}],value:String(null===pe||void 0===pe?void 0:pe.sortByField),onChange:be,onReset:function(){return Pe("sortByField","")},onUpdate:Ne,withSort:!0})})]}):null,excelExport:!0===m&&(null===B||void 0===B||null===(t=B.data)||void 0===t?void 0:t.length)>0&&(0,w.jsx)(d.jY,{fileName:"Leads",headers:[{label:"Name",key:"name"},{label:"Email",key:"email"},{label:"Phone",key:"phone"},{label:"Source",key:"source"},{label:"Date Added",key:"addedDate"},{label:"Status",key:"status"},{label:"Property ID",key:"propertyId"},{label:"Assigned To",key:"assignedTo"},{label:"Organization",key:"organization"},{label:"Message",key:"message"},{label:"Reference",key:"reference"}],data:xe,icon:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",className:"mr-1",children:(0,w.jsx)("path",{fill:"#42526E",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm1.06 10.33c0 .41-.34.75-.75.75s-.75-.34-.75-.75V9.31l-7.72 7.72c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l7.72-7.72h-3.02c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4.83c.41 0 .75.34.75.75v4.83z"})})}),children:!0===m&&(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)(ie.Z,{type:"ghost",href:"/siteSettings/leads/tracker",style:{marginLeft:"auto",marginRight:"0px",width:"fit-content",marginTop:10},children:"Leads Tracker"})})}),B.loading?(0,w.jsx)(s.Z,{items:5,fullWidth:!0}):(0,w.jsx)(w.Fragment,{children:!0===m&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:Q.Z.antdTableWrapper,children:(0,w.jsx)(L,{tableData:null===B||void 0===B?void 0:B.data,tableLoading:null===B||void 0===B?void 0:B.loading,reloadTableData:function(){var e,n;return Ne({perPage:(null===B||void 0===B||null===(e=B.meta)||void 0===e?void 0:e.perPage)||10,page:(null===B||void 0===B||null===(n=B.meta)||void 0===n?void 0:n.page)||1})},onEditIconClick:function(e){!1!==x?ce((0,a.Z)((0,a.Z)({},se),{},{editType:"edit",recordId:e.id,openModal:!0})):c.ZP.error("You don't have permission to update record")},onAddNoteClick:function(e){ce((0,a.Z)((0,a.Z)({},se),{},{editType:"notes",recordId:e.id,openModal:!0}))}})}),(0,w.jsx)(d.tl,{total:null===B||void 0===B||null===(l=B.meta)||void 0===l?void 0:l.total,current:null===B||void 0===B||null===(u=B.meta)||void 0===u?void 0:u.page,defaultPageSize:null!==B&&void 0!==B&&null!==(p=B.meta)&&void 0!==p&&p.perPage?null===B||void 0===B||null===(h=B.meta)||void 0===h?void 0:h.perPage:10,pageSizeOptions:[10,20,50,100],onChange:function(e,n){return Ne({page:e,perPage:n})}})]})}),!1===m&&(0,w.jsx)(re.a$,{mainMessage:"You don't have permission to view this data"}),se.openModal&&(0,w.jsx)(K,{record:se.recordId,type:se.editType,reloadTableData:function(){var e,n;return Ne({perPage:(null===B||void 0===B||null===(e=B.meta)||void 0===e?void 0:e.perPage)||10,page:(null===B||void 0===B||null===(n=B.meta)||void 0===n?void 0:n.page)||1})},onCancel:function(){ce((0,a.Z)((0,a.Z)({},se),{},{openModal:!se.openModal,editType:"new"}))},openModal:se.openModal,permissions:v})]})}},59816:function(e,n,t){t.d(n,{Y:function(){return d}});var o=t(43144),a=t(15671),i=t(49075),r=t(3135),d=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="country",this.allEndpoint="country/all",this.getAllRecords=function(){return i.Z.get(n.allEndpoint)},this.getAvailableRecords=function(){return i.Z.get("".concat(n.endPoint,"/available-country"))},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e,{headers:r.C})}}))},42819:function(e,n,t){t.d(n,{S:function(){return d}});var o=t(43144),a=t(15671),i=t(49075),r=t(3135),d=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="leads",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.getNoteById=function(e){return i.Z.get("".concat(n.endPoint,"/notes/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint+"/",e)},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e)},this.changeStatus=function(e,t){return i.Z.patch("".concat(n.endPoint,"/changeStatus/").concat(e),{status:t})},this.addNote=function(e,t){return i.Z.post("".concat(n.endPoint,"/addNote/").concat(e),t)},this.notelogs=function(e,t){return i.Z.get("".concat(n.endPoint,"/logs/").concat(e),{params:t})},this.assignLead=function(e,t){return i.Z.patch("".concat(n.endPoint,"/assignLead/").concat(t),e)},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/remove/").concat(e))},this.removeNote=function(e){return i.Z.delete("".concat(n.endPoint,"/removeNote/").concat(e))},this.uploadFile=function(e){return i.Z.post("".concat(n.endPoint,"/uploadLeadsDocuments"),e,{headers:r.C})},this.removeFile=function(e){return i.Z.delete("".concat(n.endPoint,"/removeDocument/").concat(e))},this.markConcernAsResolved=function(e){return i.Z.patch("".concat(n.endPoint,"/markConcernAsResolved/").concat(e))},this.getCounts=function(){return i.Z.get("".concat(n.endPoint,"/getCounts"))}}))},5190:function(e,n,t){t.d(n,{L:function(){return d}});var o=t(43144),a=t(15671),i=t(49075),r=t(3135),d=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.findPublished=function(e){return i.Z.get(n.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint,e,{headers:r.C})},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e,{headers:r.C})},this.getTenants=function(){return i.Z.get("xero/getTenants")}}))},82403:function(e,n,t){t.d(n,{T:function(){return s},k:function(){return d}});var o=t(43144),a=t(15671),i=t(49075),r=t(3135),d=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="property",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/findOneById/").concat(e))},this.getRecordBySlug=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/update-property/").concat(t),e,{headers:r.C})},this.publishRecord=function(e){return i.Z.patch("".concat(n.endPoint,"/publish-property"),e)},this.unpublishRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/unpublish-property/").concat(t),e)},this.verifyTitleDeed=function(e,t){return i.Z.patch("".concat(n.endPoint,"/verifyTitleDeed/").concat(t),e)},this.verifyPropertyDocuments=function(e,t){return i.Z.patch("".concat(n.endPoint,"/verify-document/").concat(t),e)},this.getLogs=function(e){return i.Z.get("".concat(n.endPoint,"/logs/").concat(e))},this.autoRenew=function(e,t){return i.Z.patch("".concat(n.endPoint,"/autoRenewListing/").concat(t),{autoRenew:e})},this.updateSEO=function(e,t){return i.Z.post("".concat(n.endPoint,"/update-seo/").concat(t),e)},this.updateDynamicSEO=function(e,t){return i.Z.post("".concat(n.endPoint,"/update-dynamic-seo/").concat(t),e)},this.updateAssuredProperty=function(e,t){return i.Z.patch("".concat(n.endPoint,"/updateAssured/").concat(t),e)},this.updateImagesOrder=function(e,t){return i.Z.patch("".concat(n.endPoint,"/updateImagesOrder/").concat(t),e)},this.assignProperty=function(e,t){return i.Z.patch("".concat(n.endPoint,"/assignProperty/").concat(t),e)},this.getAllPropertyDocuments=function(e){return i.Z.get("".concat(n.endPoint,"/property-documents"),{params:e})},this.getPropertyDocumentsById=function(e){return i.Z.get("".concat(n.endPoint,"/get-property-documents/").concat(e))},this.rejectProperty=function(e,t){return i.Z.post("".concat(n.endPoint,"/rejectProperty/").concat(t),e)},this.manualAction=function(e,t){return i.Z.patch("".concat(n.endPoint,"/manualAction/").concat(t),e)}})),s=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="property-deals",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/findPropertyDeals/").concat(e))},this.getPublished=function(e){return i.Z.get("".concat(n.endPoint,"/find-published"),{params:e})},this.getPublishedDeals=function(e){return i.Z.get("".concat(n.endPoint,"/find-published-deals"),{params:e})},this.createRecord=function(e){return i.Z.post(n.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e,{headers:r.C})},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))}}))},38308:function(e,n,t){t.d(n,{b:function(){return r}});var o=t(43144),a=t(15671),i=t(49075),r=(0,o.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="project-type",this.getAllRecords=function(){return i.Z.get(i._+n.endPoint)},this.getRecordById=function(e){return i.Z.get(i._+n.endPoint+"/"+e)},this.deleteRecord=function(e){return i.Z.delete(i._+n.endPoint+"/"+e)},this.createRecord=function(e){return i.Z.post(i._+n.endPoint,e)},this.updateRecord=function(e,t){return i.Z.patch(i._+n.endPoint+"/"+t,e)}}))}}]);