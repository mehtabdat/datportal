"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[2952],{62952:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(4942),a=n(1413),i=n(29439),o=n(47313),d=n(82626),s=n(55291),c=n(98276),l=n(49355),u=n(54060),p=n(66204),y=n(41586),v=n(37936),m=n(48897),f=n(98505),x=n(46417);function h(e){var t=e.tableData,n=e.tableLoading,r=e.emptyText,a=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"60px"},{title:"Agent",dataIndex:"amount",key:"amount",render:function(e,t){var n,r,a;return(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)("img",{src:"".concat(m.lj).concat(null===(n=t.user)||void 0===n?void 0:n.profile),alt:"profile",style:{width:"30px",height:"30px",borderRadius:"100%",objectFit:"cover"}}),(0,x.jsx)("div",{className:"ml-2 my-auto",children:(0,x.jsx)(d.ZT,{color:"dark-sub",size:"xs",children:"".concat(null===(r=t.user)||void 0===r?void 0:r.firstName," ").concat(null===(a=t.user)||void 0===a?void 0:a.lastName)})})]})}},{title:"Credits",dataIndex:"creditsUsed",key:"creditsUsed",className:"text-center",render:function(e,t){return(0,x.jsx)("div",{className:"color-dark-main font-size-sm d-flex justify-center",children:(0,x.jsxs)("div",{className:"\n                        ".concat("debit"===v.$r[t.transactionType]?"color-red-yp":"","\n                       ").concat("credit"===v.$r[t.transactionType]?"color-green-yp":"","\n                    "),children:["debit"===v.$r[t.transactionType]&&"-","credit"===v.$r[t.transactionType]&&"+","\xa0","".concat(e)]})})}},{title:"Credits Balance",dataIndex:"currentBalance",key:"currentBalance",className:"text-center",render:function(e,t){return(0,x.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(e)})}},{title:"Transaction Type",dataIndex:"transactionType",key:"transactionType",className:"text-center",render:function(e,t){return(0,x.jsxs)("div",{children:["debit"===v.$r[e]&&(0,x.jsx)(p.Z,{color:"#f5222d",children:v.$r[e]}),"hold"===v.$r[e]&&(0,x.jsx)(p.Z,{color:"#fadb14",children:v.$r[e]}),"upgrade"===v.$r[e]&&(0,x.jsx)(p.Z,{color:"#497174",children:v.$r[e]}),"refund"===v.$r[e]&&(0,x.jsx)(p.Z,{color:"#f5222d",children:v.$r[e]}),"credit"===v.$r[e]&&(0,x.jsx)(p.Z,{color:"#52c41a",children:v.$r[e]})]})}},{title:"Transaction Date",dataIndex:"transactionDate",key:"transactionDate",render:function(e,t){return(0,x.jsx)(d.ZT,{color:"dark-main",size:"sm",children:(0,f.Ny)(e,"dd M,yy-t")})}},{title:"Description",dataIndex:"transactionMessage",key:"transactionMessage",render:function(e,t){return(0,x.jsx)(d.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Reference ID",dataIndex:"referenceId",key:"referenceId",className:"text-center",render:function(e,t){return(0,x.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(null===e?"":e)})}},{title:"Refunded",dataIndex:"refunded",key:"refunded",className:"text-center",render:function(e,t){return(0,x.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(!0===e?"Yes":"No")})}}];return(0,x.jsx)("div",{children:(0,x.jsx)(y.Z,{sticky:!0,dataSource:t,columns:a,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"saved-searches-view-".concat(e.id)},locale:{emptyText:r}})})}var g=n(21600),Z=n(5190),j=n(3113),T=n(3798),b=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Credit Usage History"}],I=function(){var e,t,n,p,y=(0,T.aY)(g.B),v=(0,o.useState)({loading:!1,data:[]}),m=(0,i.Z)(v,2),I=m[0],N=m[1],k=(0,o.useState)({transactionsType:"",dateRange:[""],userId:"",propertyId:"",organizationId:"",propertyType:""}),R=(0,i.Z)(k,2),C=R[0],P=R[1],D=(0,o.useState)(!1),S=(0,i.Z)(D,2),$=S[0],z=S[1],U=(0,o.useMemo)((function(){return new Z.L}),[]),w=function(e){var t=null===e||void 0===e?void 0:e.target,n=t.name,i=t.value;if(("userId"===n||"propertyId"===n)&&!(0,T.hj)(i)){var o="";switch(n){case"userId":o="User ID";break;case"propertyId":o="Property ID"}return s.ZP.error("".concat(o," should be a number"))}P((0,a.Z)((0,a.Z)({},C),{},(0,r.Z)({},n,i)))},L=(0,o.useCallback)((function(e){N((0,a.Z)((0,a.Z)({},I),{},{loading:!0}))}),[U,I]),F=(0,o.useCallback)((function(){var e,t,n=(null===(e=C.dateRange)||void 0===e?void 0:e[0])||"",r=(null===(t=C.dateRange)||void 0===t?void 0:t[1])||"",a=n?(0,f.Ny)(n,"yy-mm-dd"):void 0,i=r?(0,f.Ny)(r,"yy-mm-dd"):void 0,o={transactionsType:C.transactionsType?C.transactionsType:void 0,userId:Number(C.userId)>0?Number(C.userId):void 0,propertyId:Number(C.propertyId)>0?Number(C.propertyId):void 0,propertyType:C.propertyType?C.propertyType:void 0,fromDate:a,toDate:i};L(o)}),[C]),B=(0,o.useCallback)((function(e,t){var n,r;N((0,a.Z)((0,a.Z)({},I),{},{loading:!0}));var i=(null===(n=C.dateRange)||void 0===n?void 0:n[0])||"",o=(null===(r=C.dateRange)||void 0===r?void 0:r[1])||"",d=i?(0,f.Ny)(i,"yy-mm-dd"):void 0,s=o?(0,f.Ny)(o,"yy-mm-dd"):void 0,c={page:e,perPage:t,transactionsType:C.transactionsType?C.transactionsType:void 0,userId:Number(C.userId)>0?Number(C.userId):void 0,propertyId:Number(C.propertyId)>0?Number(C.propertyId):void 0,propertyType:C.propertyType?C.propertyType:void 0,fromDate:d,toDate:s};L(c)}),[C,U]);return(0,o.useEffect)((function(){L({perPage:10})}),[]),(0,o.useEffect)((function(){$&&F();var e=setTimeout((function(){z(!1)}),2e3);return function(){return clearTimeout(e)}}),[$,C,F]),(0,x.jsxs)(u.Z,{permissionSlug:y,children:[(0,x.jsx)(d.mr,{heading:"Credits Usage History",breadCrumbData:b,filters:(0,x.jsxs)("div",{className:j.Z.filterWrapper,children:[(0,x.jsx)("div",{children:(0,x.jsx)(d.Xy,{type:"radio",label:"Transaction Type",name:"transactionsType",options:[],value:String(null===C||void 0===C?void 0:C.transactionsType),onChange:w,onReset:function(){z(!0),P((0,a.Z)((0,a.Z)({},C),{},{transactionsType:""}))},onUpdate:F})}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Xy,{type:"input",label:"User ID",name:"userId",value:String(null===C||void 0===C?void 0:C.userId),onChange:w,onReset:function(){z(!0),P((0,a.Z)((0,a.Z)({},C),{},{userId:0}))},onUpdate:F})}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Xy,{type:"input",label:"Property ID",name:"propertyId",value:String(null===C||void 0===C?void 0:C.propertyId),onChange:w,onReset:function(){z(!0),P((0,a.Z)((0,a.Z)({},C),{},{propertyId:0}))},onUpdate:F})}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){P((0,a.Z)((0,a.Z)({},C),{},{dateRange:e}))},onReset:function(){z(!0),P((0,a.Z)((0,a.Z)({},C),{},{dateRange:[]}))},onUpdate:F})}),(0,x.jsx)("div",{children:(0,x.jsx)(d.Xy,{type:"radio",label:"Property Type",name:"propertyType",options:[{label:"Residential For Sale",value:"residential-for-sale"},{label:"Residential For Rent",value:"residential-for-rent"},{label:"Commercial For Sale",value:"commercial-for-sale"},{label:"Commercial For Rent",value:"commercial-for-rent"}].map((function(e){return{label:e.label,value:e.value}})),value:null===C||void 0===C?void 0:C.propertyType,onChange:w,onReset:function(){z(!0),P((0,a.Z)((0,a.Z)({},C),{},{propertyType:""}))},onUpdate:F})})]})}),I.loading?(0,x.jsx)(l.Z,{items:5,fullWidth:!0}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:j.Z.antdTableWrapper,children:(0,x.jsx)(h,{tableData:null===I||void 0===I?void 0:I.data,tableLoading:null===I||void 0===I?void 0:I.loading,emptyText:(0,x.jsx)(c.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:200},description:(0,x.jsx)("span",{children:"No credits usage history found"})})})}),(0,x.jsx)(d.tl,{total:null===I||void 0===I||null===(e=I.meta)||void 0===e?void 0:e.total,current:null===I||void 0===I||null===(t=I.meta)||void 0===t?void 0:t.page,defaultPageSize:null!==I&&void 0!==I&&null!==(n=I.meta)&&void 0!==n&&n.perPage?null===I||void 0===I||null===(p=I.meta)||void 0===p?void 0:p.perPage:10,pageSizeOptions:[10,20,50,100],onChange:B})]})]})}},5190:function(e,t,n){n.d(t,{L:function(){return d}});var r=n(43144),a=n(15671),i=n(49075),o=n(3135),d=(0,r.Z)((function e(){var t=this;(0,a.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return i.Z.get(t.endPoint,{params:e})},this.findPublished=function(e){return i.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(t.endPoint,e,{headers:o.C})},this.updateRecord=function(e,n){return i.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:o.C})},this.getTenants=function(){return i.Z.get("xero/getTenants")}}))}}]);