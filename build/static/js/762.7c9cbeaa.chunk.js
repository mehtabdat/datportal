"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[762],{10762:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(4942),a=t(1413),i=t(29439),o=t(47313),d=t(82626),s=t(55291),l=t(98276),c=t(49355),u=t(66204),p=t(41586),v=t(37936),y=t(48897),m=t(98505),g=t(46417);function x(e){var n=e.tableData,t=e.tableLoading,r=e.emptyText,a=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,t){return t+1},width:"60px"},{title:"Organization",dataIndex:"organization",key:"organization",render:function(e,n){var t,r,a;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)("img",{src:"".concat(y.lj).concat(null===e||void 0===e?void 0:e.logo),alt:"organization",style:{width:"20px",height:"20px",borderRadius:"100%",objectFit:"cover"}}),(0,g.jsx)("div",{className:"ml-2 my-auto",children:(0,g.jsx)(d.ZT,{color:"dark-sub",size:"xs",children:"".concat(null===e||void 0===e?void 0:e.name)})})]})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",weight:"semi",className:"my-1 text-center",children:"Agent"}),(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)("img",{src:"".concat(y.lj).concat(null===(t=n.user)||void 0===t?void 0:t.profile),alt:"profile",style:{width:"20px",height:"20px",borderRadius:"100%",objectFit:"cover"}}),(0,g.jsx)("div",{className:"ml-2 my-auto",children:(0,g.jsx)(d.ZT,{color:"dark-sub",size:"xs",children:"".concat(null===(r=n.user)||void 0===r?void 0:r.firstName," ").concat(null===(a=n.user)||void 0===a?void 0:a.lastName)})})]})]})]})}},{title:"Credits",dataIndex:"creditsUsed",key:"creditsUsed",className:"text-center",render:function(e,n){return(0,g.jsx)("div",{className:"color-dark-main font-size-sm d-flex justify-center",children:(0,g.jsxs)("div",{className:"\n                        ".concat("debit"===v.$r[n.transactionType]?"color-red-yp":"","\n                       ").concat("credit"===v.$r[n.transactionType]?"color-green-yp":"","\n                    "),children:["debit"===v.$r[n.transactionType]&&"-","credit"===v.$r[n.transactionType]&&"+","\xa0","".concat(e)]})})}},{title:"Credits Balance",dataIndex:"currentBalance",key:"currentBalance",className:"text-center",render:function(e,n){return(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(e)})}},{title:"Transaction Type",dataIndex:"transactionType",key:"transactionType",className:"text-center",render:function(e,n){return(0,g.jsxs)("div",{children:["debit"===v.$r[e]&&(0,g.jsx)(u.Z,{color:"#f5222d",children:v.$r[e]}),"hold"===v.$r[e]&&(0,g.jsx)(u.Z,{color:"#fadb14",children:v.$r[e]}),"upgrade"===v.$r[e]&&(0,g.jsx)(u.Z,{color:"#497174",children:v.$r[e]}),"refund"===v.$r[e]&&(0,g.jsx)(u.Z,{color:"#f5222d",children:v.$r[e]}),"credit"===v.$r[e]&&(0,g.jsx)(u.Z,{color:"#52c41a",children:v.$r[e]})]})}},{title:"Transaction Date",dataIndex:"transactionDate",key:"transactionDate",render:function(e,n){return(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",children:(0,m.Ny)(e,"dd M,yy-t")})}},{title:"Description",dataIndex:"transactionMessage",key:"transactionMessage",render:function(e,n){return(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",children:e})}},{title:"Reference ID",dataIndex:"referenceId",key:"referenceId",className:"text-center",render:function(e,n){return(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(null===e?"":e)})}},{title:"Refunded",dataIndex:"refunded",key:"refunded",className:"text-center",render:function(e,n){return(0,g.jsx)(d.ZT,{color:"dark-main",size:"sm",children:"".concat(!0===e?"Yes":"No")})}}];return(0,g.jsx)("div",{children:(0,g.jsx)(p.Z,{sticky:!0,dataSource:n,columns:a,pagination:!1,scroll:{x:991},loading:t,rowKey:function(e){return"saved-searches-view-".concat(e.id)},locale:{emptyText:r}})})}var f=t(21600),h=t(5190),j=t(3113),I=t(3798),b=t(7532),Z=[{text:"Home",isLink:!0,path:"/"},{text:"Site Settings",isLink:!0,path:"/siteSettings"},{isLink:!1,text:"Credit Usage History"}],T=function(){var e,n,t,u,p=(0,I.aY)(f.B),v=(0,o.useState)({loading:!1,data:[]}),y=(0,i.Z)(v,2),T=y[0],N=y[1],k=(0,o.useState)({transactionsType:"",dateRange:[""],userId:0,propertyId:0,organizationId:0,propertyType:""}),z=(0,i.Z)(k,2),R=z[0],C=z[1],D=(0,o.useState)(!1),P=(0,i.Z)(D,2),S=P[0],$=P[1],U=(0,o.useMemo)((function(){return new h.L}),[]),w=function(e){var n=null===e||void 0===e?void 0:e.target,t=n.name,i=n.value;if(("userId"===t||"propertyId"===t||"organizationId"===t)&&!(0,I.hj)(i)){var o="";switch(t){case"userId":o="User ID";break;case"propertyId":o="Property ID";break;case"organizationId":o="Organization ID"}return s.ZP.error("".concat(o," should be a number"))}C((0,a.Z)((0,a.Z)({},R),{},(0,r.Z)({},t,i)))},F=(0,o.useCallback)((function(e){N((0,a.Z)((0,a.Z)({},T),{},{loading:!0}))}),[U,T]),L=(0,o.useCallback)((function(){var e,n,t=(null===(e=R.dateRange)||void 0===e?void 0:e[0])||"",r=(null===(n=R.dateRange)||void 0===n?void 0:n[1])||"",a=t?(0,m.Ny)(t,"yy-mm-dd"):void 0,i=r?(0,m.Ny)(r,"yy-mm-dd"):void 0,o={transactionsType:R.transactionsType?R.transactionsType:void 0,userId:Number(R.userId)>0?Number(R.userId):void 0,propertyId:Number(R.propertyId)>0?Number(R.propertyId):void 0,organizationId:Number(R.organizationId)>0?Number(R.organizationId):void 0,propertyType:R.propertyType?R.propertyType:void 0,fromDate:a,toDate:i};F(o)}),[R]),X=(0,o.useCallback)((function(e,n){var t,r,a=(null===(t=R.dateRange)||void 0===t?void 0:t[0])||"",i=(null===(r=R.dateRange)||void 0===r?void 0:r[1])||"",o=a?(0,m.Ny)(a,"yy-mm-dd"):void 0,d=i?(0,m.Ny)(i,"yy-mm-dd"):void 0,s={page:e,perPage:n,transactionsType:R.transactionsType?R.transactionsType:void 0,userId:Number(R.userId)>0?Number(R.userId):void 0,propertyId:Number(R.propertyId)>0?Number(R.propertyId):void 0,organizationId:Number(R.organizationId)>0?Number(R.organizationId):void 0,propertyType:R.propertyType?R.propertyType:void 0,fromDate:o,toDate:d};F(s)}),[R]);return(0,o.useEffect)((function(){F({perPage:10})}),[]),(0,o.useEffect)((function(){S&&L();var e=setTimeout((function(){$(!1)}),2e3);return function(){return clearTimeout(e)}}),[S,R,L]),(0,g.jsxs)(b.default,{permissionSlug:p,children:[(0,g.jsx)(d.mr,{heading:"Credits Usage History",breadCrumbData:Z,filters:(0,g.jsxs)("div",{className:j.Z.filterWrapper,children:[(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"radio",label:"Transaction Type",name:"transactionsType",options:Object.entries([]).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return{label:(0,I.kC)(t),value:r}})),value:String(null===R||void 0===R?void 0:R.transactionsType),onChange:w,onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{transactionsType:""}))},onUpdate:L})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"input",label:"Organization ID",name:"organizationId",value:(null===R||void 0===R?void 0:R.organizationId)>0?String(null===R||void 0===R?void 0:R.organizationId):"",onChange:w,onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{organizationId:0}))},onUpdate:L})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"input",label:"User ID",name:"userId",value:(null===R||void 0===R?void 0:R.userId)>0?String(null===R||void 0===R?void 0:R.userId):"",onChange:w,onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{userId:0}))},onUpdate:L})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"input",label:"Property ID",name:"propertyId",value:(null===R||void 0===R?void 0:R.propertyId)>0?String(null===R||void 0===R?void 0:R.propertyId):"",onChange:w,onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{propertyId:0}))},onUpdate:L})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){C((0,a.Z)((0,a.Z)({},R),{},{dateRange:e}))},onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{dateRange:[]}))},onUpdate:L})}),(0,g.jsx)("div",{children:(0,g.jsx)(d.Xy,{type:"radio",label:"Property Type",name:"propertyType",options:[{label:"Residential For Sale",value:"residential-for-sale"},{label:"Residential For Rent",value:"residential-for-rent"},{label:"Commercial For Sale",value:"commercial-for-sale"},{label:"Commercial For Rent",value:"commercial-for-rent"}].map((function(e){return{label:e.label,value:e.value}})),value:null===R||void 0===R?void 0:R.propertyType,onChange:w,onReset:function(){$(!0),C((0,a.Z)((0,a.Z)({},R),{},{propertyType:""}))},onUpdate:L})})]})}),T.loading?(0,g.jsx)(c.Z,{items:5,fullWidth:!0}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:j.Z.antdTableWrapper,children:(0,g.jsx)(x,{tableData:null===T||void 0===T?void 0:T.data,tableLoading:null===T||void 0===T?void 0:T.loading,emptyText:(0,g.jsx)(l.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:200},description:(0,g.jsx)("span",{children:"No credits usage history found"})})})}),(0,g.jsx)(d.tl,{total:null===T||void 0===T||null===(e=T.meta)||void 0===e?void 0:e.total,current:null===T||void 0===T||null===(n=T.meta)||void 0===n?void 0:n.page,defaultPageSize:null!==T&&void 0!==T&&null!==(t=T.meta)&&void 0!==t&&t.perPage?null===T||void 0===T||null===(u=T.meta)||void 0===u?void 0:u.perPage:10,pageSizeOptions:[10,20,50,100],onChange:X})]})]})}},5190:function(e,n,t){t.d(n,{L:function(){return d}});var r=t(43144),a=t(15671),i=t(49075),o=t(3135),d=(0,r.Z)((function e(){var n=this;(0,a.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return i.Z.get(n.endPoint,{params:e})},this.findPublished=function(e){return i.Z.get(n.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(n.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(n.endPoint,e,{headers:o.C})},this.updateRecord=function(e,t){return i.Z.patch("".concat(n.endPoint,"/").concat(t),e,{headers:o.C})},this.getTenants=function(){return i.Z.get("xero/getTenants")}}))}}]);