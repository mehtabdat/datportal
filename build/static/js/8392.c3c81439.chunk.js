"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[8392],{98392:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var o=n(4942),a=n(1413),i=n(29439),r=n(47313),s=n(7532),l=n(25019),c=n(55291),d=n(82626),u=n(17327),p=n(49355),g=n(48897),h=n(3798),f=n(46646),m=n(40169),v=n(43144),Z=n(15671),y=n(49075),x=n(3135),b=(0,v.Z)((function e(){var t=this;(0,Z.Z)(this,e),this.endPoint="blogs",this.createRecord=function(e){return y.Z.post(t.endPoint+"/",e,{headers:x.C})},this.getAllRecords=function(e){return y.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return y.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.getAllPublishedRecords=function(){return y.Z.get("".concat(t.endPoint,"/find-published"))},this.getRecordByOneSlug=function(e){return y.Z.get("".concat(t.endPoint,"/findOneBySlug/").concat(e))},this.updateRecord=function(e,n){return y.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:x.C})},this.deleteRecord=function(e){return y.Z.delete("".concat(t.endPoint,"/").concat(e))},this.updateRecordByStatus=function(e,n){return y.Z.post("".concat(t.endPoint,"/changeStatus/").concat(e),{status:n})},this.verifyAndPublish=function(e,n){return y.Z.post("".concat(t.endPoint,"/verifyAndPublish/").concat(n),e,{headers:x.C})},this.updateSEOById=function(e,n){return y.Z.post("".concat(t.endPoint,"/update-seo/").concat(e),n)},this.getAllImages=function(e){return y.Z.get("".concat(t.endPoint,"/getBlogImages/").concat(e))},this.uploadImages=function(e){return y.Z.post("".concat(t.endPoint,"/uploadImages"),e,{headers:x.C})},this.removeImages=function(e){return y.Z.delete("".concat(t.endPoint,"/removeImages/").concat(e))}})),j=n(37936),P=n(59816),C=n(22461),k=n(46417),I=function(e){var t,n,o,s,v,Z,y,x=e.openModal,I=e.onCancel,S=e.type,w=e.record,B=e.reloadTableData,A=e.permissions,_=A.updateBlogs,R=A.createBlogs,E=A.updateBlogsSEO,N=l.Z.useForm(),D=(0,i.Z)(N,1)[0],T=(0,r.useMemo)((function(){return new b}),[]),M=(0,r.useMemo)((function(){return new P.Y}),[]),z=(0,r.useMemo)((function(){return new C.F}),[]),O=(0,r.useState)(),F=(0,i.Z)(O,2),L=F[0],Y=F[1],U=(0,r.useState)([]),q=(0,i.Z)(U,2),H=q[0],K=q[1],V=(0,r.useState)([]),X=(0,i.Z)(V,2),W=X[0],G=X[1],J=function(e){var t=(0,m.P)(e);if("string"==typeof t.message)Y((0,a.Z)((0,a.Z)({},L),{},{error:t.message}));else{var n=(0,f.O)(t.message,[]);D.setFields(n),Y((0,a.Z)((0,a.Z)({},L),{},{error:""}))}},Q=(0,r.useCallback)((function(){T.getRecordById(w).then((function(e){e.data&&e.data.data&&(D.setFieldsValue((0,a.Z)((0,a.Z)({translations:e.data.data.localization},e.data.data),{},{isPublished:e.data.data.isPublished})),Y((0,a.Z)((0,a.Z)({},e.data),{},{loading:!1})))})).catch((function(e){J(e)}))}),[D,w,T]),$=(0,r.useCallback)((function(){"seo"!==S&&M.getAllRecords().then((function(e){e.data&&e.data.data&&K(e.data.data)}))}),[M,S]),ee=(0,r.useCallback)((function(){"seo"!==S&&z.getAllRecords().then((function(e){e.data&&e.data.data&&G(e.data.data)}))}),[z,S]);(0,r.useEffect)((function(){"edit"===S?(Y({loading:!0}),Q(),$(),ee()):"seo"===S?Q():($(),ee(),D.resetFields())}),[x,S,D,Q,$,ee]);return(0,k.jsx)(d.P0,{visible:x,size:"seo"===S?"700px":"900px",closable:!0,onCancel:I,titleText:"new"===S?"Add New Blog":"edit"===S?"Edit Blog":"SEO",showFooter:!1,children:null!==L&&void 0!==L&&L.loading?(0,k.jsx)(p.Z,{items:10}):(0,k.jsxs)(l.Z,{className:u.Z.form,onFinish:function(e){Y((0,a.Z)((0,a.Z)({},L),{},{buttonLoading:!0}));var t=new FormData;if("seo"!==S){var n=["image","translations"];Object.entries(e).forEach((function(e){n.includes(e[0])||t.append(e[0],e[1])})),e.image&&"string"!==typeof e.image&&e.image.fileList.length>0&&t.append("image",e.image.fileList[0].originFileObj),e.translations&&e.translations.forEach((function(e,n){t.append("translations[".concat(n+1,"][language]"),e.language),t.append("translations[".concat(n+1,"][title]"),e.title),t.append("translations[".concat(n+1,"][highlight]"),e.highlight),t.append("translations[".concat(n+1,"][description]"),e.description)}))}switch(S){case"new":!0===R?T.createRecord(t).then((function(e){B(),I(),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){J(e),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})):(Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),c.ZP.error("You don't have permission to create a new record"));break;case"edit":!0===_?T.updateRecord(t,null===L||void 0===L?void 0:L.data.id).then((function(e){B(),I(),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})).catch((function(e){J(e),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})):(Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),c.ZP.error("You don't have permission to update this record"));break;case"seo":!0===E?T.updateSEOById(w,{seoTitle:null===e||void 0===e?void 0:e.seoTitle,seoDescription:null===e||void 0===e?void 0:e.seoDescription}).then((function(e){B(),I(),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})).catch((function(e){J(e),Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})):(Y((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),c.ZP.error("You don't have permission to update this record"))}},form:D,children:[(null===L||void 0===L?void 0:L.error)&&(0,k.jsx)(d.EQ,{description:null===L||void 0===L?void 0:L.error,isClosable:!0,onClose:function(){Y((0,a.Z)((0,a.Z)({},L),{},{error:""}))}}),("new"===S||"edit"===S)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(l.Z.Item,{name:"countryId",rules:[{required:!0,message:"Please Select a country!"}],children:(0,k.jsx)(d.AP,{label:"Country",placeholder:"Please select country",options:null===H||void 0===H?void 0:H.map((function(e){return{label:e.name,value:e.id}})),asterisk:!0})}),(0,k.jsx)(l.Z.Item,{name:"category",rules:[{required:!0,message:"Please Select a category!"}],children:(0,k.jsx)(d.AP,{label:"Blog Category",placeholder:"Please select category",options:Object.entries(j.iK).map((function(e){var t=(0,i.Z)(e,2),n=t[0],o=t[1];return{label:n,value:Number(o)}})),asterisk:!0})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(l.Z.Item,{name:"slug",rules:[{required:!0,message:"Please add a slug"}],children:(0,k.jsx)(d.t7,{onChange:function(e){var t=e.target,n=(0,h.V3)(t.value);D.setFieldsValue({slug:n})},size:"w100",label:"Slug",asterisk:!0,type:"text"})}),(0,k.jsx)(l.Z.Item,{name:"blogCategoryId",rules:[{required:!0,message:"Please select a blog category"}],children:(0,k.jsx)(d.AP,{label:"Blogs Category",placeholder:"Please select a blog category",options:null===W||void 0===W?void 0:W.map((function(e){return{label:e.localization[0].title,value:e.id}})),asterisk:!0})})]}),(0,k.jsx)(d.WH,{title:"Blog Details",formName:"translations",description:!0,highlight:!0,form:D,defaultValue:null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.localization}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(l.Z.Item,{name:"imageAlt",rules:[{required:!1}],children:(0,k.jsx)(d.t7,{size:"w100",label:"Image Alt Text",type:"text"})}),(0,k.jsx)(l.Z.Item,{name:"status",children:(0,k.jsx)(d.AP,{label:"Status",options:Object.entries(j.PK).map((function(e){var t=(0,i.Z)(e,2),n=t[0],o=t[1];return{label:n,value:Number(o)}}))})})]}),(0,k.jsx)(d.wA,{name:"image",defaultFileList:"edit"===S&&L&&(null===(n=L.data)||void 0===n?void 0:n.image)&&[{uid:null===(o=L.data)||void 0===o?void 0:o.id,name:null===(s=L.data)||void 0===s?void 0:s.image,status:"done",url:g.lj+(null===(v=L.data)||void 0===v?void 0:v.image)}]})]})]}),"seo"===S&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:(0,k.jsx)(l.Z.Item,{name:"seoTitle",rules:[{required:!0,message:"Please add SEO Title"}],children:(0,k.jsx)(d.t7,{size:"w100",label:"Title",type:"text",asterisk:!0})})}),(0,k.jsx)("div",{children:(0,k.jsx)(l.Z.Item,{name:"seoDescription",rules:[{required:!0,message:"Please add SEO Description"}],children:null!==L&&void 0!==L&&null!==(Z=L.data)&&void 0!==Z&&Z.seoDescription?(0,k.jsx)(d.t7,{size:"w100",label:"Description",type:"textArea",asterisk:!0,defaultValue:null===L||void 0===L||null===(y=L.data)||void 0===y?void 0:y.seoDescription}):null!==L&&void 0!==L&&L.data?(0,k.jsx)(d.t7,{size:"w100",label:"Description",type:"textArea",asterisk:!0}):(0,k.jsx)(p.Z,{items:1,fullWidth:!0})})})]}),(0,k.jsxs)("div",{className:u.Z.footer,children:[(0,k.jsx)(d.op,{size:"normal",fontSize:"sm",onClick:I,type:"plain",children:"Cancel"}),(0,k.jsx)(d.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===L||void 0===L?void 0:L.buttonLoading,children:"Submit"})]})]})})},S=n(8570),w=n(5900),B=n(28080),A=n(78267),_=n(45705),R=n(21680),E=n(41586),N=n(98676),D=n(32344),T=n(3109),M="styles_dropdown__L6mRm",z="styles_overlay__1FUXd",O="styles_overlay_item__-v5lZ",F="styles_disabledButton__HYo7P",L=n(98505),Y=n(32147),U=n(85554),q=n(40096),H=S.Z.Paragraph,K=function(e){var t=e.record,n=e.onEditIconClick,o=e.reloadTableData,s=e.onSeoIconClick,l=e.onImageClick,d=e.permissions.deleteBlogs,p=(0,r.useState)({confirmLoading:!1,openPopConfirm:!1}),g=(0,i.Z)(p,2),h=g[0],f=g[1],m=(0,r.useMemo)((function(){return new b}),[]);return(0,k.jsxs)("div",{className:u.Z.actions,children:[(0,k.jsx)("span",{onClick:function(){return l(t)},children:(0,k.jsx)(Y.XB,{color:"#fff"})}),(0,k.jsx)("span",{onClick:function(){return s(t)},children:(0,k.jsx)(Y.iC,{})}),(0,k.jsx)("span",{onClick:function(){return n(t)},children:(0,k.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,k.jsx)(w.Z,{open:h.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:function(){if(f((0,a.Z)((0,a.Z)({},h),{},{confirmLoading:!0})),!1===d)return c.ZP.error("You don't have permission to delete this record, please contact your admin."),void f((0,a.Z)((0,a.Z)({},h),{},{openPopConfirm:!1}));m.deleteRecord(t.id).then((function(e){f((0,a.Z)((0,a.Z)({},h),{},{openPopConfirm:!1,confirmLoading:!1})),o()})).catch((function(e){f((0,a.Z)((0,a.Z)({},h),{},{confirmLoading:!1}))}))},onCancel:function(){return f((0,a.Z)((0,a.Z)({},h),{},{openPopConfirm:!1}))},okButtonProps:{loading:h.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:function(e){e||f((0,a.Z)((0,a.Z)({},h),{},{openPopConfirm:!1}))},children:(0,k.jsx)(N.Z,{className:u.Z.bg__red,onClick:function(){f((0,a.Z)((0,a.Z)({},h),{},{openPopConfirm:!0}))}})})]})},V=function(e){var t=e.status,n=e.recordId,o=e.reloadTableData,a=e.changeBlogsStatus,s=e.verifyAndPublishBlogs,l=c.ZP.useMessage(),d=(0,i.Z)(l,2),u=d[0],p=d[1],g=(0,r.useMemo)((function(){return new b}),[]),h=function(e){u.open({key:e.key,type:e.type,content:e.content,duration:"loading"===e.type?0:2})},f=(0,r.useState)(!1),m=(0,i.Z)(f,2),v=m[0],Z=m[1],y=(0,k.jsxs)(B.Z,{className:"".concat(z," pa-2"),children:[p,Object.entries(j.PK).map((function(e){var r=(0,i.Z)(e,2),l=r[0],c=r[1];return(0,k.jsx)("div",{className:O,onClick:function(){if(a){var e=Number(c);t!==e&&(c===j.PK["Verified & Published"]?(i=e,n&&!0===s?(h({key:"publish",type:"loading",content:"Publishing..."}),g.verifyAndPublish({status:i},Number(n)).then((function(e){var t,n;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data&&(h({key:"publish",type:"success",content:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message}),Z(!v),o())})).catch((function(e){var t,n;h({key:"publish",type:"error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message})}))):h({key:"publish",type:"error",content:"You don't have permission to publish"})):function(e){n&&!0===a?(h({key:"update",type:"loading",content:"Updating..."}),g.updateRecordByStatus(Number(n),e).then((function(e){var t,n;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data&&(h({key:"update",type:"success",content:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message}),Z(!v),o())})).catch((function(e){var t,n;h({key:"update",type:"error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message})}))):h({key:"update",type:"error",content:"You don't have permission to change status"})}(e))}var i},children:(0,k.jsx)("span",{className:t===Number(c)?F:"",children:l})},"blogs-status-".concat(l))}))]});return(0,k.jsx)("div",{children:(0,k.jsx)(A.Z,{dropdownRender:function(){return y},trigger:!0===a?["click"]:[],open:!0===a&&v,onOpenChange:function(e){Z(e)},className:M,children:(0,k.jsx)("div",{children:(0,k.jsxs)(_.Z,{children:[Object.entries(j.PK).map((function(e){var n=(0,i.Z)(e,2),o=n[0];return n[1]===String(t)&&o})),!0===a&&(0,k.jsx)(D.Z,{})]})})})})};function X(e){var t=e.tableData,n=e.tableLoading,o=e.onEditIconClick,a=e.reloadTableData,i=e.onSeoIconClick,r=e.onImageClick,s=(0,U.v9)((function(e){return e.usersReducer})).userPermissions,l=s.changeBlogsStatus,c=s.verifyAndPublishBlogs,d=q.Z.getLocalAccessToken(),p=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"5%"},{title:"Title",dataIndex:"description",key:"description",render:function(e,t){var n;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T.Z,{color:"dark-main",size:"sm",weight:"bold",children:t.localization[0].title}),4===t.status?(0,k.jsx)("a",{href:"".concat(g.JH,"/en/blogs/").concat(null===(n=t.blogsCategory)||void 0===n?void 0:n.slug,"/").concat(t.slug),target:"_blank",rel:"noreferrer",children:(0,k.jsx)(H,{ellipsis:{rows:1,expandable:!1},title:t.localization[0].title,className:"font-size-xs color-light-800 mt-1",children:t.slug})}):(0,k.jsxs)("a",{href:"".concat(g.JH,"/en/blogs/preview/").concat(t.id,"?access_token=").concat(d),target:"_blank",rel:"noreferrer",title:"Preview ".concat(t.localization[0].title),className:"d-flex font-size-xs color-light-800 mt-1",children:["Preview Blog ",(0,k.jsx)(Y.ON,{className:"my-auto ml-1"})]})]})}},{title:"Category",dataIndex:"blogsCategory",key:"blogsCategory",render:function(e,t){var n,o;return(0,k.jsx)(T.Z,{color:"dark-main",size:"sm",weight:"bold",children:null===t||void 0===t||null===(n=t.blogsCategory)||void 0===n||null===(o=n.localization[0])||void 0===o?void 0:o.title})}},{title:"Country",dataIndex:"country",key:"country",render:function(e,t){return(0,k.jsx)(T.Z,{color:"dark-sub",size:"sm",children:t.country.name})}},{title:"Image",dataIndex:"image",key:"image",render:function(e,t){return e?(0,k.jsx)(R.Z,{width:50,height:50,src:"".concat(g.lj).concat(e),alt:t.imageAlt,preview:!1,rootClassName:"object-fit-contain"}):(0,k.jsx)(k.Fragment,{})}},{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T.Z,{color:"dark-sub",size:"sm",children:"Added: ".concat((0,L.Ny)(t.addedDate,"MM dd yy"))}),(0,k.jsx)(T.Z,{color:"dark-sub",size:"sm",children:"Modified: ".concat(t.modifiedDate?(0,L.Ny)(null===t||void 0===t?void 0:t.modifiedDate,"MM dd yy"):"Not Modified")})]})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return(0,k.jsx)(V,{recordId:t.id,status:e,reloadTableData:a,verifyAndPublishBlogs:c,changeBlogsStatus:l})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return(0,k.jsx)(K,{record:t,onEditIconClick:o,reloadTableData:a,onSeoIconClick:i,onImageClick:r,permissions:s})}}];return(0,k.jsx)("div",{className:u.Z.antdTableWrapper,children:(0,k.jsx)(E.Z,{sticky:!0,dataSource:t,columns:p,pagination:!1,scroll:{x:991},loading:n,rowKey:function(e){return"site-blogs-".concat(e.id)}})})}var W=function(e){return e.CREATE="createBlogs",e.UPDATE="updateBlogs",e.DELETE="deleteBlogs",e.READ="readBlogs",e.CHANGE_STATUS="changeBlogsStatus",e.VERIFY_AND_PUBLISH="verifyAndPublishBlogs",e.UPDATE_SEO="updateBlogsSEO",e}({}),G=n(74165),J=n(93433),Q=n(15861),$=n(59491),ee=n(77278),te="styles_form__dYEEa",ne="styles_formItems__j1DIS",oe="styles_footer__7GFh2",ae="styles_dragger__68iD4",ie="styles_numberOfUploads__x0mce",re="styles_uploadedImages__p-USS",se="styles_imageWrap__01aNd",le=S.Z.Paragraph,ce=function(e){var t=e.openModal,n=e.onCancel,o=e.recordId,a=l.Z.useForm(),s=(0,i.Z)(a,1)[0],u=(0,r.useState)([]),p=(0,i.Z)(u,2),h=p[0],f=p[1],m=(0,r.useMemo)((function(){return new b}),[]),v=function(){var e=(0,Q.Z)((0,G.Z)().mark((function e(t,n){return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m.removeImages(t).then((function(e){f((function(e){return(0,J.Z)(e.filter((function(e,t){return t!==n})))})),c.ZP.success("Image Deleted Successfully")})).catch((function(e){var t,n;c.ZP.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error Deleting Images")}))}catch(o){console.error("Error Deleting Images",o)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,Q.Z)((0,G.Z)().mark((function e(t){var n,a,i,r;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.onSuccess,a=t.onError,i=t.file,(r=new FormData).append("file",i),r.append("blogId",String(o));try{m.uploadImages(r).then((function(e){f((function(t){return[].concat((0,J.Z)(t),[e.data.data[0]])})),n("ok")})).catch((function(e){a({err:e})}))}catch(s){a({err:s})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=(0,r.useCallback)((0,Q.Z)((0,G.Z)().mark((function e(){return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m.getAllImages(o).then((function(e){f(e.data.data)})).catch((function(e){var t,n;c.ZP.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error Fetching Images")}))}catch(t){console.error("Error Fetching Images",t)}case 1:case"end":return e.stop()}}),e)}))),[o,m]);return(0,r.useEffect)((function(){t&&y()}),[t]),(0,k.jsx)(d.P0,{visible:t,closable:!0,onCancel:n,titleText:"Upload Images",showFooter:!1,children:(0,k.jsxs)(l.Z,{onFinish:function(){return n()},form:s,className:te,children:[(0,k.jsxs)("div",{className:ne,children:[(0,k.jsx)(l.Z.Item,{name:"images",children:(0,k.jsxs)(ee.Z.Dragger,{accept:".png,.jpg,.jpeg",className:ae,multiple:!0,name:"file",maxCount:20,customRequest:Z,showUploadList:!1,children:[(0,k.jsx)("p",{className:"ant-upload-hint",children:"Drag image here or click to upload"}),(0,k.jsx)("div",{className:ie,children:"".concat(h.length,"/20")})]})}),(0,k.jsx)("div",{className:re,children:null===h||void 0===h?void 0:h.map((function(e,t){return function(e,t){return(0,k.jsxs)("div",{className:se,children:[(0,k.jsx)("img",{src:"".concat(g.lj).concat(e.path),alt:e.path}),(0,k.jsx)(le,{copyable:{text:"".concat(g.lj).concat(e.path)},ellipsis:{rows:1,expandable:!0,symbol:"more"},children:e.file}),(0,k.jsx)("span",{children:(0,k.jsx)($.Z,{onClick:function(){return v(e.id,t)},children:"Remove"})})]},"edit-images-card-".concat(e.id))}(e,t)}))})]}),(0,k.jsxs)("div",{className:oe,children:[(0,k.jsx)(d.op,{size:"normal",fontSize:"sm",onClick:n,type:"plain",children:"Cancel"}),(0,k.jsx)(d.op,{type:"primary",size:"normal",htmlType:"submit",children:"Done"})]})]})})},de=n(42623),ue=n(18515),pe=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Blogs"}];var ge=function(){var e,t,n,l,u=(0,h.aY)(W),p=(0,U.v9)((function(e){return e.usersReducer})).userPermissions,g=p.readBlogs,f=p.createBlogs,m=p.updateBlogs,v=p.updateBlogsSEO,Z=(0,r.useState)({editType:"new",recordId:0,openModal:!1}),y=(0,i.Z)(Z,2),x=y[0],P=y[1],S=(0,r.useState)({openModal:!1,recordId:0}),w=(0,i.Z)(S,2),B=w[0],A=w[1],_=(0,r.useMemo)((function(){return new b}),[]),R=(0,r.useMemo)((function(){return new C.F}),[]),E=(0,r.useState)(""),N=(0,i.Z)(E,2),D=N[0],T=N[1],M=(0,de.N)(D,500),z=(0,r.useState)({isLoading:!1,error:{},data:[]}),O=(0,i.Z)(z,2),F=O[0],L=O[1],Y=(0,r.useState)([]),q=(0,i.Z)(Y,2),H=q[0],K=q[1],V=(0,r.useState)({status:0,category:0,type:0}),G=(0,i.Z)(V,2),J=G[0],Q=G[1],$=(0,r.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],oe=function(){!1!==f?P((0,a.Z)((0,a.Z)({},x),{},{openModal:!x.openModal,editType:"new"})):c.ZP.error("You don't have permission to create new record")},ae=(0,r.useCallback)((function(e){L((0,a.Z)((0,a.Z)({},F),{},{loading:!0})),_.getAllRecords(e).then((function(e){L(e.data)})).catch((function(e){}))}),[F,_]),ie=(0,r.useCallback)((function(){R.getAllRecords().then((function(e){K(e.data.data)})).catch((function(e){}))}),[R]),re=(0,r.useCallback)((function(){var e={category:(null===J||void 0===J?void 0:J.category)||void 0,status:(null===J||void 0===J?void 0:J.status)||void 0,title:M||void 0,type:(null===J||void 0===J?void 0:J.type)||void 0};ae(e)}),[J,_,M]);(0,r.useEffect)((function(){M?ae({title:M}):ae()}),[M]),(0,r.useEffect)((function(){ie()}),[]);var se=function(e){var t=null===e||void 0===e?void 0:e.target,n=t.name,i=t.value;Q((0,a.Z)((0,a.Z)({},J),{},(0,o.Z)({},n,i)))},le=(0,r.useCallback)((function(e,t){var n={page:e,perPage:t,title:M||void 0,category:(null===J||void 0===J?void 0:J.category)||void 0,status:(null===J||void 0===J?void 0:J.status)||void 0,type:(null===J||void 0===J?void 0:J.type)||void 0};ae(n)}),[F,_,J,M,ae]);return(0,r.useEffect)((function(){te&&re();var e=setTimeout((function(){ne(!1)}),2e3);return function(){return clearTimeout(e)}}),[te,J,re]),(0,k.jsxs)(s.default,{permissionSlug:u,children:[(0,k.jsx)(d.mr,{heading:"Blogs",buttonText:"Add New Blog",onButtonClick:oe,breadCrumbData:pe,showAdd:!0===f,filters:!0===g?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:(0,k.jsx)(d.t7,{placeHolder:"Search...",icon:(0,k.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",className:"py-1",value:D,onChange:function(e){var t=e.currentTarget.value;T(t)}})}),(0,k.jsx)("div",{children:(0,k.jsx)(d.Xy,{type:"radio",label:"Status",name:"status",options:Object.entries(j.PK).map((function(e){var t=(0,i.Z)(e,2);return{label:t[0],value:t[1]}})),onChange:se,value:String(null===J||void 0===J?void 0:J.status),onReset:function(){ne(!0),Q((0,a.Z)((0,a.Z)({},J),{},{status:0}))},onUpdate:re})}),(0,k.jsx)("div",{children:(0,k.jsx)(d.Xy,{type:"radio",label:"Category",name:"category",options:H.map((function(e){return{label:e.localization[0].title,value:"".concat(e.id)}})),onChange:se,value:String(null===J||void 0===J?void 0:J.category),onReset:function(){ne(!0),Q((0,a.Z)((0,a.Z)({},J),{},{category:0}))},onUpdate:re})}),(0,k.jsx)("div",{children:(0,k.jsx)(d.Xy,{type:"radio",label:"Type",name:"type",options:Object.entries(j.iK).map((function(e){var t=(0,i.Z)(e,2);return{label:t[0],value:t[1]}})),onChange:se,value:String(null===J||void 0===J?void 0:J.type),onReset:function(){ne(!0),Q((0,a.Z)((0,a.Z)({},J),{},{type:0}))},onUpdate:re})})]}):null}),!0===g&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(X,{tableData:F.data,tableLoading:F.loading,onEditIconClick:function(e){!1!==m?P((0,a.Z)((0,a.Z)({},x),{},{editType:"edit",recordId:e.id,openModal:!0})):c.ZP.error("You don't have permission to update record")},reloadTableData:ae,onSeoIconClick:function(e){!1!==v?P((0,a.Z)((0,a.Z)({},x),{},{editType:"seo",recordId:e.id,openModal:!0})):c.ZP.error("You don't have permission to update the SEO record")},onImageClick:function(e){!1!==m?A((0,a.Z)((0,a.Z)({},B),{},{openModal:!0,recordId:e.id})):c.ZP.error("You don't have permission to update record")}}),(0,k.jsx)(d.tl,{total:null===F||void 0===F||null===(e=F.meta)||void 0===e?void 0:e.total,current:null===F||void 0===F||null===(t=F.meta)||void 0===t?void 0:t.page,defaultPageSize:null!==F&&void 0!==F&&null!==(n=F.meta)&&void 0!==n&&n.perPage?null===F||void 0===F||null===(l=F.meta)||void 0===l?void 0:l.perPage:10,pageSizeOptions:[10,20,50,100],onChange:le})]}),!1===g&&(0,k.jsx)(ue.a$,{mainMessage:"You don't have permission to view this data"}),x.openModal&&(0,k.jsx)(I,{record:x.recordId,type:x.editType,reloadTableData:function(){var e,t;return ae({page:null===F||void 0===F||null===(e=F.meta)||void 0===e?void 0:e.page,perPage:null===F||void 0===F||null===(t=F.meta)||void 0===t?void 0:t.perPage})},onCancel:oe,openModal:x.openModal,permissions:p}),B.openModal&&(0,k.jsx)(ce,{recordId:B.recordId,onCancel:function(){A((0,a.Z)((0,a.Z)({},B),{},{openModal:!1}))},openModal:B.openModal})]})}},22461:function(e,t,n){n.d(t,{F:function(){return s}});var o=n(43144),a=n(15671),i=n(49075),r=n(3135),s=(0,o.Z)((function e(){var t=this;(0,a.Z)(this,e),this.endPoint="blogs-category",this.createRecord=function(e){return i.Z.post(t.endPoint+"/",e,{headers:r.C})},this.getAllRecords=function(e){return i.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return i.Z.get("".concat(t.endPoint,"/").concat(e,"?all=true"))},this.getAllPublishedRecords=function(){return i.Z.get("".concat(t.endPoint,"/find-published"))},this.getRecordByOneSlug=function(e){return i.Z.get("".concat(t.endPoint,"/findOneBySlug/").concat(e))},this.updateRecord=function(e,n){return i.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})},this.deleteRecord=function(e){return i.Z.delete("".concat(t.endPoint,"/").concat(e))},this.updateRecordByStatus=function(e,n){return i.Z.patch("".concat(t.endPoint,"/changeStatus/").concat(e),{data:{status:n}})},this.createVerifyAndPublish=function(e,n){return i.Z.post("".concat(t.endPoint,"/verifyAndPublish/").concat(n),e,{headers:r.C})},this.updateSEOById=function(e,n){return i.Z.patch("".concat(t.endPoint,"/update-seo/").concat(e),n)},this.unpublishedRecords=function(e,n){return i.Z.get("".concat(t.endPoint,"/publish-unpublished/").concat(e),{data:{status:n}})}}))},59816:function(e,t,n){n.d(t,{Y:function(){return s}});var o=n(43144),a=n(15671),i=n(49075),r=n(3135),s=(0,o.Z)((function e(){var t=this;(0,a.Z)(this,e),this.endPoint="country",this.allEndpoint="country/all",this.getAllRecords=function(){return i.Z.get(t.allEndpoint)},this.getAvailableRecords=function(){return i.Z.get("".concat(t.endPoint,"/available-country"))},this.getRecordById=function(e){return i.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return i.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return i.Z.post(t.endPoint+"/",e,{headers:r.C})},this.updateRecord=function(e,n){return i.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:r.C})}}))}}]);