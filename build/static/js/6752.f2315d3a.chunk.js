"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[6752],{70815:function(e,n,a){a.d(n,{r:function(){return g}});var t=a(1413),r=a(29439),i=a(45987),o=a(55291),d=a(86345),s=a(47313),u=a(40169),c=a(46417),l=["onChange","checked","recordId","allowChange"],g=function(e){var n=e.onChange,a=e.checked,g=e.recordId,h=e.allowChange,f=void 0===h||h,p=(0,i.Z)(e,l),m=(0,s.useState)({loading:!1,checked:!1}),v=(0,r.Z)(m,2),Z=v[0],x=v[1];return(0,s.useEffect)((function(){x((0,t.Z)((0,t.Z)({},Z),{},{checked:a}))}),[a]),(0,c.jsx)(d.Z,{checked:Z.checked,onChange:function(e){!0===f?(x((0,t.Z)((0,t.Z)({},Z),{},{loading:!0})),n(e,g,p).then((function(n){x((0,t.Z)((0,t.Z)({},Z),{},{checked:e,loading:!1})),o.ZP.success(n.data.message)})).catch((function(e){x((0,t.Z)((0,t.Z)({},Z),{},{loading:!1}));var n=(0,u.P)(e);"string"===typeof n.message?o.ZP.error(n.message):o.ZP.error("Something went wrong")}))):o.ZP.error("You don't have permission to change this record, please contact your admin.")},loading:Z.loading})}},26752:function(e,n,a){a.r(n),a.d(n,{default:function(){return M}});var t=a(1413),r=a(29439),i=a(47313),o=a(85554),d=a(7532),s=a(25019),u=a(82626),c="styles_actions__IAzlJ",l="styles_bg__red__n83Xu",g="styles_form__+WvZr",h="styles_footer__RvTgo",f=a(49355),p=a(76670),m=a(46417),v=function(e){var n=e.openModal,a=e.onCancel,d=e.onFinish,c=e.buttonLoading,l=e.initialValues,v=e.type,Z=(0,o.I0)(),x=s.Z.useForm(),y=(0,r.Z)(x,1)[0],b=(0,o.v9)((function(e){return e.languageReducer})),k=b.addLanguageData,P=b.singleLanguageData,j=b.editLanguageData,w="new"===v?k.errorData:j.errorData;return(0,i.useEffect)((function(){var e;"edit"===v?y.setFieldsValue((0,t.Z)((0,t.Z)({},P.data),{},{isPublished:null===(e=P.data)||void 0===e?void 0:e.isPublished})):y.resetFields()}),[v,y,P]),(0,i.useEffect)((function(){"edit"===v&&Z((0,p.yB)(l.id))}),[Z,l.id,v]),(0,m.jsx)(u.P0,{visible:n,onCancel:a,titleText:"edit"===v?"Edit Language":"Add Language",showFooter:!1,children:P.loading?(0,m.jsx)(f.Z,{items:4}):(0,m.jsxs)(s.Z,{className:g,onFinish:d,form:y,children:[null!==w&&void 0!==w&&w.statusCode?(0,m.jsx)(u.EQ,{description:null===w||void 0===w?void 0:w.message,isClosable:!0}):null,(0,m.jsxs)("div",{children:[(0,m.jsx)(s.Z.Item,{name:"name",rules:[{required:!0,message:"Please add language name"}],children:(0,m.jsx)(u.t7,{size:"w100",label:"Name",asterisk:!0,type:"text"})}),(0,m.jsx)(s.Z.Item,{name:"nativeName",rules:[{required:!0,message:"Please add  native name"}],children:(0,m.jsx)(u.t7,{size:"w100",label:"Native Name",asterisk:!0,type:"text"})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(s.Z.Item,{name:"code",rules:[{required:!0,message:"Please add iso code"}],children:(0,m.jsx)(u.t7,{size:"w100",label:"ISO Code",asterisk:!0,type:"text"})}),(0,m.jsx)(s.Z.Item,{name:"isPublished",children:(0,m.jsx)(u.AP,{label:"Published",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}]})})]}),(0,m.jsxs)("div",{className:h,children:[(0,m.jsx)(u.op,{size:"normal",fontSize:"sm",onClick:a,type:"plain",children:"Cancel"}),(0,m.jsx)(u.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:c,children:"Submit"})]})]})})},Z=a(74165),x=a(15861),y=a(55291),b=a(5900),k=a(41586),P=a(98676),j=a(3109),w=a(70815),C=a(71294),L=a(43144),I=a(15671),D=a(49075),R=(0,L.Z)((function e(){var n=this;(0,I.Z)(this,e),this.endPoint="language",this.getAllRecords=function(){return D.Z.get(n.endPoint)},this.getRecordById=function(e){return D.Z.get("".concat(n.endPoint,"/").concat(e))},this.getPublished=function(){return D.Z.get("".concat(n.endPoint,"/find-published"))},this.deleteRecord=function(e){return D.Z.delete("".concat(n.endPoint,"/").concat(e))},this.createRecord=function(e){return D.Z.post(n.endPoint+"/",e)},this.updateRecord=function(e,a){return D.Z.patch("".concat(n.endPoint,"/").concat(a),e)}})),N=function(e){var n=e.record,a=e.openModal,t=e.permissions.deleteLanguage,r=(0,i.useMemo)((function(){return new R}),[]),d=(0,o.I0)(),s=(0,i.useCallback)((function(e){!1!==t?r.deleteRecord(e).then((function(e){e&&e.data&&r.getAllRecords().then((function(e){var n;e&&e.data&&d({type:C.H8,payload:{loading:!1,data:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data}})}))})):y.ZP.error("You don't have permission to delete this record, please contact your admin.")}),[d,r]);return(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("span",{onClick:function(){return a(n)},children:(0,m.jsx)("img",{src:"/images/editicon.svg",alt:""})}),(0,m.jsx)(b.Z,{placement:"top",title:"Are you sure?",onConfirm:function(){return s(n.id)},okText:"Yes",cancelText:"No",children:(0,m.jsx)(P.Z,{className:l})})]})};function S(e){var n=e.tableData,a=e.tableLoading,t=e.openModal,r=(0,o.v9)((function(e){return e.usersReducer})).userPermissions,i=new R,d=function(){var e=(0,x.Z)((0,Z.Z)().mark((function e(n,a){var t;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateRecord({isPublished:n},a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),s=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,n,a){return a+1},width:"5%"},{title:"Name",dataIndex:"name",key:"name",render:function(e){return(0,m.jsx)(j.Z,{color:"dark-main",size:"sm",weight:"bold",children:e})}},{title:"ISO Code",dataIndex:"code",key:"code",render:function(e){return(0,m.jsx)(j.Z,{color:"dark-sub",size:"sm",children:e})}},{title:"Native Name",dataIndex:"nativeName",key:"nativeName",render:function(e){return(0,m.jsx)(j.Z,{color:"dark-sub",size:"sm",children:e})}},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:function(e,n){return(0,m.jsx)(w.r,{checked:e,onChange:d,recordId:n.id})}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,n){return(0,m.jsx)(N,{record:n,openModal:t,permissions:r})}}];return(0,m.jsx)(k.Z,{sticky:!0,dataSource:n,columns:s,pagination:!1,loading:a,rowKey:function(e){return"language-".concat(e.id)}})}var _=function(e){return e.CREATE="createLanguage",e.UPDATE="updateLanguage",e.DELETE="deleteLanguage",e.READ="readLanguage",e}({}),E=a(18515),A=a(3798),z=[{text:"Home",isLink:!0,path:"/"},{isLink:!0,text:"Site Settings",path:"/siteSettings"},{isLink:!1,text:"Language"}];var M=function(){var e=(0,A.aY)(_),n=(0,o.v9)((function(e){return e.usersReducer})).userPermissions,a=n.readLanguage,s=n.createLanguage,c=n.updateLanguage,l=(0,o.I0)(),g=(0,i.useState)(!1),h=(0,r.Z)(g,2),f=h[0],p=h[1],Z=(0,i.useState)("new"),x=(0,r.Z)(Z,2),b=x[0],k=x[1],P=(0,i.useMemo)((function(){return new R}),[]),j=(0,i.useMemo)((function(){return{id:0,name:"",code:"",nativeName:"",isPublished:!1,isDeleted:!1}}),[]),w=(0,i.useState)(j),L=(0,r.Z)(w,2),I=L[0],D=L[1],N=(0,o.v9)((function(e){return e.languageReducer})),M=N.languageData,Y=N.addLanguageData,T=N.editLanguageData,F=(0,i.useCallback)((function(){l({type:C.H8,payload:{loading:!0,error:{},data:[]}}),P.getAllRecords().then((function(e){var n;l({type:C.H8,payload:(0,t.Z)((0,t.Z)({},M),{},{loading:!1,data:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data})})}))}),[l,M,P]);(0,i.useEffect)((function(){F()}),[]);var H=(0,i.useCallback)((function(){!1!==s?(k("new"),p(!f),D(j)):y.ZP.error("You don't have permission to create new record, please contact your admin.")}),[f,j]),B=(0,i.useCallback)((function(e){!1!==c?(D(e),k("edit"),p(!f)):y.ZP.error("You don't have permission to update record, please contact your admin.")}),[f]),q=(0,i.useCallback)((function(e){var n=e;switch(b){case"new":!0===s?P.createRecord(n).then((function(e){e&&e.data&&(F(),H())})):y.ZP.error("You don't have permission to create new record, please contact your admin.");break;case"edit":!0===c?P.updateRecord(n,I.id).then((function(e){e&&e.data&&(F(),H())})).catch((function(e){var n,a;y.ZP.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)})):y.ZP.error("You don't have permission to update record, please contact your admin.")}}),[b,H,I,P,F]);return(0,m.jsxs)(d.default,{permissionSlug:e,children:[(0,m.jsx)(u.mr,{heading:"Language",buttonText:"Add Langugage",onButtonClick:H,breadCrumbData:z,showAdd:!0===s}),!0===a&&(0,m.jsx)(S,{tableData:null===M||void 0===M?void 0:M.data,tableLoading:null===M||void 0===M?void 0:M.loading,openModal:B}),!1===a&&(0,m.jsx)(E.a$,{mainMessage:"You don't have permission to view this data"}),(0,m.jsx)(v,{initialValues:I,type:b,onFinish:q,onCancel:H,openModal:f,buttonLoading:Y.loading||T.loading})]})}},76670:function(e,n,a){a.d(n,{yB:function(){return u}});var t=a(74165),r=a(1413),i=a(15861),o=a(49075),d=a(71294),s=a(40169),u=function(e){return function(){var n=(0,i.Z)((0,t.Z)().mark((function n(a,i){var u,c,l,g,h,f;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=i().languageReducer,c=u.languageData,l=u.singleLanguageData,g=e?c:l,h=e?d.FE:d.H8,f=e?"language/".concat(e):"language",a({type:h,payload:(0,r.Z)((0,r.Z)({},g),{},{loading:!0})}),n.prev=5,n.next=8,o.Z.get(f).then((function(e){var n;a({type:h,payload:(0,r.Z)((0,r.Z)({},g),{},{loading:!1,data:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data})})})).catch((function(e){var n=(0,s.P)(e);a({type:h,payload:(0,r.Z)((0,r.Z)({},g),{},{loading:!1,error:!0,errorData:n})})}));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(5),a({type:h,payload:(0,r.Z)((0,r.Z)({},g),{},{loading:!1,errorData:n.t0})});case 13:case"end":return n.stop()}}),n,null,[[5,10]])})));return function(e,a){return n.apply(this,arguments)}}()}}}]);