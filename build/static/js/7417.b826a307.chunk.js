"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[7417],{82183:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(41586),r=n(3109),a=n(3113),i=n(85554),d=n(98505),l=n(3798),s=n(37936),c=n(70816),u=n.n(c),m=n(46417);function h(e){var t,n,c=e.tableData,h=e.tableLoading,v=e.onEditIconClick,f=(e.reloadTableData,e.emptyText),p=(0,i.v9)((function(e){return e.usersReducer})).userPermissions,y=[];null===(t=c.workingHour)||void 0===t||null===(n=t.hours)||void 0===n||n.forEach((function(e){e.closed&&y.push(e.day)}));var x=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"7.5%"},{title:"Date",dataIndex:"day",key:"day",render:function(e,t){var n,o;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(r.Z,{className:"cursor-pointer",color:v?"primary-main":"dark-main",size:"sm",weight:"bold",onClick:function(){v&&v(t.recordId?"edit":"new",e,t.recordId)},children:(0,d.Ny)(e,"dd M,yy")}),(0,m.jsx)("small",{className:"pl-2 color-dark-sub",children:"\n\t\t\t\t\t".concat(t.checkIn?"["+u()(t.checkIn).format("hh:mm A"):"","\n\t\t\t\t\t").concat(t.checkOut?" - "+u()(t.checkOut).format("hh:mm A")+"]":"","\n\t\t\t\t\t")})]}),t.ModifiedBy&&(0,m.jsxs)("small",{style:{color:"var(--color-dark-sub)",fontSize:"0.6rem"},children:[(0,m.jsx)("span",{children:"Modified on "}),(0,m.jsxs)("span",{children:[" ",t.modifiedDate&&(0,d.Ny)(t.modifiedDate,"dd M,yy")]}),(0,m.jsx)("span",{children:" by "}),(0,m.jsx)("span",{className:"inline-block",children:(null===(n=t.ModifiedBy)||void 0===n?void 0:n.firstName)+" "+(null===(o=t.ModifiedBy)||void 0===o?void 0:o.lastName)+" "})]}),(0,m.jsx)("div",{})]})},width:"250px"},{title:"Day",dataIndex:"day",key:"day",render:function(e){return(0,m.jsx)(r.Z,{color:"dark-main",size:"sm",weight:"bold",children:d.c1[new Date(e).getDay()]})}},{title:"Hours worked",dataIndex:"hoursWorked",key:"hoursWorked",render:function(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(r.Z,{color:"dark-main",size:"sm",weight:"bold",children:e?e+" hours":"N/A"})})}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(r.Z,{style:{color:s.vo[e-1]},size:"sm",weight:"bold",children:(0,l.H8)(new Date,t.day)?"-":(0,l.kC)(s.H8[e])})})}},{title:"Pro Rated Deduction",dataIndex:"proRatedDeduction",key:"proRatedDeduction",render:function(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(r.Z,{color:"dark-main",size:"sm",weight:"bold",children:e})})}},{title:"Note",dataIndex:"note",key:"note",render:function(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(r.Z,{color:"dark-main",size:"xs",weight:"normal",children:e})})},width:"200px"},p.updateAttendance?{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return p.updateAttendance&&!(0,l.H8)(new Date,t.day)&&(0,m.jsx)("div",{className:a.Z.actions,children:(0,m.jsx)("span",{onClick:function(){v&&v(t.recordId?"edit":"new",t.day,t.recordId)},children:(0,m.jsx)("img",{src:"/images/editicon.svg",alt:""})})})},width:"100px"}:{}];return(0,m.jsx)("div",{style:{maxHeight:"calc(100vh - 80px)",clear:"both",maxWidth:"100%",overflow:"auto"},children:(0,m.jsx)(o.Z,{sticky:!0,dataSource:null===c||void 0===c?void 0:c.attendanceData,columns:x,scroll:{x:991},pagination:!1,loading:h,rowKey:function(e){return"Attendance-type-".concat(e.day)},locale:{emptyText:f}})})}},57417:function(e,t,n){n.r(t),n.d(t,{default:function(){return we}});var o=n(93433),r=n(4942),a=n(1413),i=n(29439),d=n(47313),l=n(25019),s=n(55291),c=n(82626),u=n(3113),m=n(49355),h=n(46646),v=n(40169),f=n(43144),p=n(15671),y=n(49075),x=(0,f.Z)((function e(){var t=this;(0,p.Z)(this,e),this.endPoint="payroll",this.getAllRecords=function(e){return y.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return y.Z.get(y._+t.endPoint+"/findOne/"+e)},this.deleteRecord=function(e){return y.Z.delete(y._+t.endPoint+"/"+e)},this.createRecord=function(e){return y.Z.post(y._+t.endPoint,e)},this.updateRecord=function(e,n){return y.Z.patch(y._+t.endPoint+"/update/"+n,e)},this.markAsPaid=function(e){return y.Z.patch(y._+t.endPoint+"/markAsPaid",e)},this.recalculateRecord=function(e){return y.Z.patch(y._+t.endPoint+"/recalculate/"+e)},this.generateReport=function(e){return y.Z.post("".concat(t.endPoint,"/generateReport"),e,{responseType:"blob"})}})),Z=n(46417),g=function(e){var t,n=e.openModal,o=e.onCancel,r=e.type,f=e.record,p=e.reloadTableData,y=e.permissions.updatePayroll,g=l.Z.useForm(),j=(0,i.Z)(g,1)[0],b=new x,k=(0,d.useState)(),w=(0,i.Z)(k,2),D=w[0],P=w[1],z=function(e){var t=(0,v.P)(e);if("string"==typeof t.message)P((0,a.Z)((0,a.Z)({},D),{},{error:t.message}));else{var n=(0,h.O)(t.message,[]);j.setFields(n),P((0,a.Z)((0,a.Z)({},D),{},{error:""}))}},C=(0,d.useCallback)((function(){b.getRecordById(f).then((function(e){e.data&&e.data.data&&(j.setFieldsValue((0,a.Z)({},e.data.data)),P((0,a.Z)((0,a.Z)({},e.data),{},{loading:!1})))})).catch((function(e){z(e)}))}),[j,f,b]);(0,d.useEffect)((function(){"edit"===r?(P({loading:!0}),C()):j.resetFields()}),[]);return(0,Z.jsx)(c.P0,{visible:n,closable:!0,onCancel:o,titleText:"Manual Correction",showFooter:!1,children:null!==D&&void 0!==D&&D.loading?(0,Z.jsx)(m.Z,{items:3}):(0,Z.jsxs)(l.Z,{className:u.Z.form,onFinish:function(e){P((0,a.Z)((0,a.Z)({},D),{},{buttonLoading:!0})),!0===y?b.updateRecord(e,f).then((function(e){p(),o(),P((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})).catch((function(e){z(e),P((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})}))})):(P((function(e){return(0,a.Z)((0,a.Z)({},e),{},{buttonLoading:!1})})),s.ZP.error("You don't have permission to update this record"))},form:j,children:[(null===D||void 0===D?void 0:D.error)&&(0,Z.jsx)(c.EQ,{description:null===D||void 0===D?void 0:D.error,isClosable:!0,onClose:function(){P((0,a.Z)((0,a.Z)({},D),{},{error:""}))}}),(0,Z.jsx)("div",{children:(0,Z.jsx)(l.Z.Item,{name:"manualCorrection",rules:[{required:!0,message:"Please add amount"}],children:(0,Z.jsx)(c.t7,{size:"w100",label:"Amount",type:"number",asterisk:!0,defaultValue:null===D||void 0===D||null===(t=D.data)||void 0===t?void 0:t.manualCorrection})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(l.Z.Item,{name:"note",rules:[{required:!0,message:"Please add a note"}],children:(0,Z.jsx)(c.t7,{size:"w100",label:"Note",asterisk:!0,type:"text",placeHolder:"Enter note"})})}),(0,Z.jsxs)("div",{className:"d-flex justify-end",children:[(0,Z.jsx)(c.op,{size:"normal",fontSize:"sm",onClick:o,type:"plain",children:"Cancel"}),(0,Z.jsx)(c.op,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:null===D||void 0===D?void 0:D.buttonLoading,children:"edit"===r?"Edit Asset":"Add Asset"})]})]})})},j=n(74165),b=n(15861),k=n(37388),w=n(5900),D=n(78267),P=n(66204),z=n(72652),C=n(61677),R=n(41586),N=n(97258),I=n(59491),_=n(35432),S=n(87462),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar-circle",theme:"outlined"},E=n(16141),M=function(e,t){return d.createElement(E.Z,(0,S.Z)({},e,{ref:t,icon:A}))};var L=d.forwardRef(M),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"},B=function(e,t){return d.createElement(E.Z,(0,S.Z)({},e,{ref:t,icon:F}))};var T=d.forwardRef(B),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"},U=function(e,t){return d.createElement(E.Z,(0,S.Z)({},e,{ref:t,icon:H}))};var W=d.forwardRef(U),O=n(71703),V=n(3109),q=n(85554),Y=n(3798),Q=n(98505),$={forgotPasswordImg:"style_forgotPasswordImg__IlYNV",dropdown:"style_dropdown__mkSd9",overlay:"style_overlay__5BG7+",overlay_item:"style_overlay_item__Rvl2i",disabledButton:"style_disabledButton__zckUL",profileScoreWrap:"style_profileScoreWrap__+va7H",scoreOverlay:"style_scoreOverlay__7vWor",cardWrap:"style_cardWrap__m-JFv",card:"style_card__Ok0QJ",card__green:"style_card__green__77QFS",card__info:"style_card__info__6RmeR",drawerElement:"style_drawerElement__Btz4q"},K=n(32147),G=n(37936),J=n(53245),X=n(51812),ee=n(70816),te=n.n(ee),ne=n(82183),oe=n(29079),re=n(80235),ae=function(e){var t=e.record,n=e.onEditIconClick,o=e.reloadTableData,r=e.permissions,a=(r.deletePayroll,r.updatePayroll),l=r.readPayroll,c=(0,d.useState)(!1),m=(0,i.Z)(c,2),h=m[0],v=m[1],f=(0,d.useState)([]),p=(0,i.Z)(f,2),y=p[0],g=p[1],P=new x,z=(0,d.useCallback)((0,b.Z)((0,j.Z)().mark((function e(){var n;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new X.s,h&&n.getUserAttendance({year:te()(null===t||void 0===t?void 0:t.PayrollCycle.toDate).year(),month:te()(null===t||void 0===t?void 0:t.PayrollCycle.fromDate).add(10,"d").month(),userId:null===t||void 0===t?void 0:t.User.id}).then((function(e){if(e.data.data&&e.data.data.attendanceData.length>0){var t,n,o=null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.attendanceData.map((function(e){return{date:(0,Q.Ny)(null===e||void 0===e?void 0:e.day,"dd MM,yy"),day:Q.c1[new Date(e.day).getDay()],hours:null===e||void 0===e?void 0:e.hoursWorked,status:(0,Y.kC)(G.H8[e.status]),proRatedDeduction:e.proRatedDeduction,note:e.note}}));g(o)}})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[t.id,h]);(0,d.useEffect)((function(){z()}),[z]);var C=[{key:"1",label:a&&(0,Z.jsx)(k.Z,{title:"Edit",children:(0,Z.jsxs)("div",{className:"".concat(u.Z.actions," ").concat($.overlay_card_item),onClick:function(){return n(t)},children:[(0,Z.jsx)("span",{children:(0,Z.jsx)("img",{src:"/images/editicon.svg",alt:""})}),"Manual correction"]})})},{key:"2",label:a&&(0,Z.jsx)(w.Z,{placement:"top",title:"Are you sure?",onConfirm:function(){!1!==a?P.markAsPaid({ids:[t.id]}).then((function(e){o()})).catch((function(e){})):s.ZP.error("You don't have permission to update this record, please contact your admin.")},okText:"Yes",cancelText:"No",children:(0,Z.jsx)(k.Z,{title:"Mark as paid",children:(0,Z.jsxs)("div",{className:"".concat(u.Z.actions," ").concat($.overlay_card_item),children:[(0,Z.jsx)(L,{style:{color:"white"}}),"Mark as paid"]})})})},{key:"3",label:a&&(0,Z.jsx)(k.Z,{title:"Recalculate",children:(0,Z.jsxs)("div",{className:"".concat(u.Z.actions," ").concat($.overlay_card_item),onClick:function(){!1!==a?P.recalculateRecord(t.id).then((function(e){o()})).catch((function(e){var t,n;s.ZP.error(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)})):s.ZP.error("You don't have permission to update this record, please contact your admin.")},children:[(0,Z.jsx)(T,{style:{color:"white"}}),"Recalculate"]})})},{key:"4",label:l&&(0,Z.jsx)(k.Z,{title:"Export to Excel",children:(0,Z.jsxs)("div",{className:"".concat(u.Z.actions," ").concat($.overlay_card_item),onClick:function(){z()},children:[(0,Z.jsx)(W,{style:{color:"white"}}),(0,Z.jsx)(J.CSVLink,{filename:"Payroll "+t.User.firstName+" "+t.User.lastName,headers:[{label:"Date",key:"date"},{label:"Day",key:"day"},{label:"Hours",key:"hours"},{label:"Status",key:"status"},{label:"Pro Rated Deduction",key:"proRatedDeduction"},{label:"Note",key:"note"}],data:y,onClick:z,children:(0,Z.jsx)("span",{style:{color:"black"},children:"Export to Excel"})})]})})}];return(0,Z.jsx)(D.Z,{menu:{items:C},trigger:["click"],children:(0,Z.jsx)("span",{onClick:function(){v(!0)},style:{cursor:"pointer",padding:"5px"},children:(0,Z.jsx)(K.nX,{height:25,width:25,color:"#7e869a"})})})};function ie(e){var t,n,o,r,l,s,c,m,h,v,f,p,y,g,j,b,k,w,D,S,A,E,M,L,F,B,T=e.tableData,H=e.tableLoading,U=e.onEditIconClick,W=e.reloadTableData,K=e.meta,G=e.filters,J=(0,q.v9)((function(e){return e.usersReducer})).userPermissions,ee=(0,d.useState)({open:!1,selected:void 0}),ie=(0,i.Z)(ee,2),de=ie[0],le=ie[1],se=new x,ce=new X.s,ue=(0,oe.K2)({method:ce.findUserAttendanceForPayroll,initialQuery:{fromDate:null===(t=de.selected)||void 0===t?void 0:t.PayrollCycle.fromDate,toDate:null===(n=de.selected)||void 0===n?void 0:n.PayrollCycle.toDate,userId:null===(o=de.selected)||void 0===o?void 0:o.User.id},condition:null===de||void 0===de?void 0:de.selected}),me=ue.data,he=(ue.onRefresh,ue.setData,ue.loading),ve=[{title:"S.No",dataIndex:"index",key:"index",render:function(e,t,n){return n+1},width:"80px"},{title:"Employee",dataIndex:"employee",key:"employee",render:function(e,t){return(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:t.User.firstName+" "+t.User.lastName})},width:"200px"},{title:"Period",dataIndex:"fromDate",key:"fromDate",render:function(e,t){return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(0,Q.Ny)(t.PayrollCycle.fromDate,"dd M,yy")+" - "+(0,Q.Ny)(t.PayrollCycle.toDate,"dd M,yy")}),(0,Y.ZQ)(new Date,t.PayrollCycle.fromDate,t.PayrollCycle.toDate)?(0,Z.jsx)(P.Z,{color:"green",children:"Current"}):null]}),(0,Z.jsx)(V.Z,{className:"cursor-pointer",size:"sm",color:"primary-main",onClick:function(){return le({selected:t,open:!0})},children:"View Report"})]})},width:"180px"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return t.processing?(0,Z.jsx)(z.Z,{}):(0,Z.jsx)(V.Z,{color:t.paid?"primary-main":"dark-sub",size:"sm",children:t.paid?"Paid":"Not paid"})},width:"100px"},{title:"Deductions",dataIndex:"Deductions",key:"Deductions",render:function(e,t){return e.length?(0,Z.jsx)(C.Z,{content:(0,Z.jsx)("div",{className:"font-size-sm",children:e.map((function(e){return(0,Z.jsxs)("div",{children:[e.title,":  ",e.amount.toFixed(2)," AED"]})}))}),title:"Deductions",children:(0,Z.jsx)("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-primary-main)",cursor:"pointer"},children:e.length+" deductions"})}):(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"No deductions"})},width:"160px"},{title:"Summary",dataIndex:"summary",key:"summary",render:function(e,t){return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Total days in cycle: "+t.totalDays}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Working days: "+t.totalWorkingDays}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Days worked: "+t.totalDaysWorked}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Lates: "+t.totalLates}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Incompletes: "+t.totalIncompletes}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Absences: "+t.totalAbsences}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Deduction from leave credits: "+t.toBeDeductedFromLeaveCredits}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Deduction from salary: "+t.toBeDeductedFromCurrentSalary})]})},width:"280px"},{title:"Payment",dataIndex:"payment",key:"payment",render:function(e,t){return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Salary: "+t.salaryAmount+" AED"}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Manual Correction: "+t.manualCorrection+" AED"}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Other amount: "+t.otherAmount+" AED"}),(0,Z.jsx)(V.Z,{color:t.totalDeduction?"red-yp":"dark-sub",size:"sm",children:"Deductions: "+(0,Y.xG)(t.totalDeduction)}),(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",weight:"bold",children:"Receivable: "+(0,Y.xG)(t.totalReceivable)})]})},width:"280px"},{title:"Date",dataIndex:"addedDate",key:"addedDate",render:function(e,t){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Added: ".concat((0,Q.Ny)(e,"dd M,yy"))})})},width:"100px"},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return(0,Z.jsx)(ae,{record:t,onEditIconClick:U,reloadTableData:W,permissions:J})},width:"100px"}];return(0,Z.jsxs)("div",{className:u.Z.antdTableWrapper,children:[(0,Z.jsx)(R.Z,{sticky:!0,dataSource:T,columns:ve,pagination:{current:null===K||void 0===K?void 0:K.page,total:null===K||void 0===K?void 0:K.total,hideOnSinglePage:!0,pageSize:null===K||void 0===K?void 0:K.perPage,onChange:function(e,t){W((0,a.Z)((0,a.Z)({},G),{},{page:e,perPage:t}))}},scroll:{x:991},loading:H,rowKey:function(e){return"Payroll-".concat(e.id)}}),(0,Z.jsx)(N.Z,{width:window.innerWidth>768?"75%":"100%",title:(0,Z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Z.jsx)("div",{children:"Payroll Report of "+(null===(r=de.selected)||void 0===r?void 0:r.User.firstName)+" "+(null===(l=de.selected)||void 0===l?void 0:l.User.lastName)+" for the Month of "+Q.e7[null===(s=te()(null===de||void 0===de||null===(c=de.selected)||void 0===c||null===(m=c.PayrollCycle)||void 0===m?void 0:m.fromDate).add(10,"d"))||void 0===s?void 0:s.month()][1]}),null!==(h=de.selected)&&void 0!==h&&h.paid?(0,Z.jsxs)("p",{className:"color-primary-main",children:[(0,Z.jsx)(O.Z,{})," Paid"]}):(0,Z.jsx)(I.Z,{onClick:function(){var e,t;(t=null===(e=de.selected)||void 0===e?void 0:e.id)&&se.markAsPaid({ids:[t]}).then((function(e){W(),le((0,a.Z)((0,a.Z)({},de),{},{selected:(0,a.Z)((0,a.Z)({},de.selected),{},{paid:!0})}))})).catch((function(e){}))},size:"small",children:"Mark as paid"})]}),placement:"right",onClose:function(){return le((0,a.Z)((0,a.Z)({},de),{},{open:!1}))},open:de.open,children:(0,Z.jsxs)("div",{style:{padding:"1rem 0 0 1rem",display:"flex",gap:"1rem"},children:[(0,Z.jsxs)("div",{style:{width:window.innerWidth>768?"25%":"100%",marginTop:"1rem"},children:[(0,Z.jsx)(V.Z,{color:"dark-main",size:"normal",weight:"bold",style:{marginBottom:"1rem"},children:"Summary"}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Total days in cycle: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(v=de.selected)||void 0===v?void 0:v.totalDays})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Working days: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(f=de.selected)||void 0===f?void 0:f.totalWorkingDays})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Days worked: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(p=de.selected)||void 0===p?void 0:p.totalDaysWorked})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Lates: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(y=de.selected)||void 0===y?void 0:y.totalLates})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Incompletes: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(null===(g=de.selected)||void 0===g?void 0:g.totalIncompletes)+" days"})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Absences: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(j=de.selected)||void 0===j?void 0:j.totalAbsences})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Deduction from leave credits: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:null===(b=de.selected)||void 0===b?void 0:b.toBeDeductedFromLeaveCredits})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Deduction from salary: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(null===(k=de.selected)||void 0===k?void 0:k.toBeDeductedFromCurrentSalary)+" days"})]}),(0,Z.jsx)(V.Z,{color:"dark-main",size:"normal",weight:"bold",style:{margin:"3rem 0 1rem 0"},children:"Payment"}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Salary: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(null===(w=de.selected)||void 0===w?void 0:w.salaryAmount)+" AED"})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Manual Correction: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(null===(D=de.selected)||void 0===D?void 0:D.manualCorrection)+" AED"})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:"Other amount: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",children:(null===(S=de.selected)||void 0===S?void 0:S.otherAmount)+" AED"})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:null!==(A=de.selected)&&void 0!==A&&A.totalDeduction?"red-yp":"dark-sub",size:"sm",children:"Deductions: "})," ",(0,Z.jsx)(V.Z,{color:null!==(E=de.selected)&&void 0!==E&&E.totalDeduction?"red-yp":"dark-sub",size:"sm",children:(null===(M=de.selected)||void 0===M?void 0:M.totalDeduction.toFixed(2))+" AED"})]}),(0,Z.jsxs)("div",{className:$.drawerElement,children:[(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",weight:"bold",children:"Receivable: "})," ",(0,Z.jsx)(V.Z,{color:"dark-sub",size:"sm",weight:"bold",children:(null===(L=de.selected)||void 0===L?void 0:L.totalReceivable.toFixed(2))+" AED"})]}),(null===(F=de.selected)||void 0===F?void 0:F.Deductions.length)&&(0,Z.jsx)(_.Z,{style:{margin:"3rem 0 1rem 0"},defaultActiveKey:["0"],children:(0,Z.jsx)(_.Z.Panel,{header:(0,Z.jsx)("div",{style:{padding:"0 0.25rem"},children:"Deductions"}),children:(0,Z.jsx)("div",{style:{padding:"0.5rem"},className:"font-size-sm color-dark-sub",children:null===(B=de.selected)||void 0===B?void 0:B.Deductions.map((function(e){return(0,Z.jsxs)("div",{children:["- ",e.title,":  ",e.amount.toFixed(2)," AED"]})}))})},"0")})]}),(0,Z.jsx)("div",{style:{width:"75%"},children:(0,Z.jsx)(ne.Z,{tableData:me||{},tableLoading:he,reloadTableData:function(){},emptyText:(0,Z.jsx)(re.Z,{description:"No records found"})})})]})})]})}var de=n(31513),le=n(98276),se=n(18515),ce=n(53641),ue=n(54060),me=n(42623),he=n(84825),ve=n(78593),fe=n(70804),pe=n(28770),ye=n(85336),xe=n(70584),Ze=function(e){return e.all="all",e.users="users",e.department="department",e.organization="organization",e}({}),ge=n(38859),je=n(5190),be=function(e){var t,n,r,u=e.isModalOpen,m=e.setIsModalOpen,h=l.Z.useForm(),v=(0,i.Z)(h,1)[0],f=(0,d.useState)("all"),p=(0,i.Z)(f,2),y=p[0],g=p[1],k=(0,d.useState)(!1),w=(0,i.Z)(k,2),D=w[0],P=w[1],z=(0,d.useMemo)((function(){return new x}),[]),C=(0,d.useMemo)((function(){return new ve.f}),[]),R=(0,d.useMemo)((function(){return new he.z}),[]),N=(0,d.useMemo)((function(){return new ge.o}),[]),I=(0,d.useMemo)((function(){return new je.L}),[]),_=(0,d.useState)(""),S=(0,i.Z)(_,2),A=S[0],E=S[1],M=(0,d.useState)({loading:!1,data:[]}),L=(0,i.Z)(M,2),F=L[0],B=L[1],T=(0,me.N)(A,500),H=(0,oe.$5)({method:function(){return C.getAllRecords()}}).data,U=(0,d.useState)({loading:!1,data:[]}),W=(0,i.Z)(U,2),O=W[0],V=W[1],q=(0,d.useState)({loading:!1,data:[]}),$=(0,i.Z)(q,2),K=$[0],G=$[1],J=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,o,r,a,i,d,l;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,z.generateReport(t);case 4:n=e.sent,o=n.headers["content-disposition"],a=(r=(0,fe.Z)(/filename=(.*)/,{filename:1}).exec(o))&&r.groups&&r.groups.filename?r.groups.filename:"downloaded_file.xlsx",s.ZP.success("Report downloaded successfully"),i=window.URL.createObjectURL(new Blob([n.data])),(d=document.createElement("a")).href=i,d.download=a,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(i),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),l=(0,Y.S3)(e.t0),s.ZP.error(l||"Something went wrong while downloading the file");case 23:return e.prev=23,P(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,19,23,26]])})));return function(t){return e.apply(this,arguments)}}(),X=(0,d.useCallback)((function(){V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),(0,N.getAllRecords)().then((function(e){var t=e.data.data;V((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.data.find((function(e){return(null===e||void 0===e?void 0:e.id)===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t=(0,Y.S3)(e);s.ZP.error(t||"Something went wrong"),V((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))}))}),[N]),ee=(0,d.useCallback)((function(){G((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),(0,I.getAllRecords)().then((function(e){var t=(null===e||void 0===e?void 0:e.data).data;G((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.data.find((function(e){return(null===e||void 0===e?void 0:e.id)===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t=(0,Y.S3)(e);s.ZP.error(t||"Something went wrong"),G((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))}))}),[I]),te=(0,d.useCallback)((function(e){g(e),e===Ze.department&&0===O.data.length&&X(),e===Ze.organization&&0===K.data.length&&ee()}),[X,ee,O.data.length,K.data.length]);return(0,d.useEffect)((function(){var e;""!==T&&(e=T,B((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!0})})),(0,R.getAllRecords)({name:e}).then((function(e){var t=e.data.data;B((function(e){var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.data.find((function(e){return(null===e||void 0===e?void 0:e.id)===t.id})))}));return{data:[].concat((0,o.Z)(e.data),(0,o.Z)(n)),loading:!1}}))})).catch((function(e){var t=(0,Y.S3)(e);s.ZP.error(t||"Something went wrong"),B((function(e){return(0,a.Z)((0,a.Z)({},e),{},{loading:!1})}))})))}),[T]),(0,Z.jsx)(pe.Z,{title:"Export to Excel",open:u,onCancel:function(){return m(!1)},okText:"Export",okButtonProps:{form:"export_form",htmlType:"submit",loading:D},children:(0,Z.jsxs)(l.Z,{layout:"vertical",form:v,onFinish:J,name:"export_form",children:[(0,Z.jsx)(l.Z.Item,{name:"payrollCycleId",requiredMark:"optional",style:{marginBottom:10},rules:[{required:!0,message:"Please select a payroll cycle"}],children:(0,Z.jsx)(ye.Z,{options:(null===H||void 0===H?void 0:H.filter((function(e){return e.processed})).map((function(e){return{label:"".concat((0,Q.Ny)(e.fromDate,"dd M,yy")," - ").concat((0,Q.Ny)(e.toDate,"dd M,yy")),value:"".concat(e.id)}})))||[],label:"Payroll Cycle"})}),(0,Z.jsx)(l.Z.Item,{name:"reportType",requiredMark:"optional",style:{marginBottom:10},rules:[{required:!0,message:"Please select a report type"}],children:(0,Z.jsx)(ye.Z,{label:"Report Type",options:(0,xe.hx)(Ze).map((function(e){return{label:(0,Y.kC)(null===e||void 0===e?void 0:e.label),value:null===e||void 0===e?void 0:e.value}})),value:y,onChange:function(e){return te(e)}})}),(0,Z.jsxs)("div",{className:"mt-3",children:[y===Ze.users&&(0,Z.jsx)(l.Z.Item,{name:"userIds",requiredMark:"optional",rules:[{required:!0,message:"Please select a user"}],children:(0,Z.jsx)(c.Ld,{asterisk:!1,label:"Users",loading:null===F||void 0===F?void 0:F.loading,mode:"multiple",options:null===F||void 0===F||null===(t=F.data)||void 0===t?void 0:t.map((function(e){return{label:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName),value:"".concat(null===e||void 0===e?void 0:e.id)}})),onSearch:function(e){return E(e)},notFoundDescription:"".concat(A&&!F.loading?"No employees found, modify your search and try again":"Search for employees to generate report for")})}),y===Ze.department&&(0,Z.jsx)(l.Z.Item,{name:"departmentId",requiredMark:"optional",rules:[{required:!0,message:"Please select a department"}],children:(0,Z.jsx)(c.Ld,{asterisk:!1,label:"Departments",loading:null===O||void 0===O?void 0:O.loading,options:null===O||void 0===O||null===(n=O.data)||void 0===n?void 0:n.map((function(e){return{label:null===e||void 0===e?void 0:e.title,value:"".concat(null===e||void 0===e?void 0:e.id)}})),onSearch:function(){}})})]}),y===Ze.organization&&(0,Z.jsx)(l.Z.Item,{name:"organizationId",requiredMark:"optional",rules:[{required:!0,message:"Please select an organization"}],children:(0,Z.jsx)(c.Ld,{asterisk:!1,label:"Organizations",loading:null===K||void 0===K?void 0:K.loading,options:null===K||void 0===K||null===(r=K.data)||void 0===r?void 0:r.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:"".concat(null===e||void 0===e?void 0:e.id)}})),onSearch:function(){}})})]})})},ke=[{text:"Home",isLink:!0,path:"/"},{isLink:!1,text:"Payroll"}];var we=function(){var e=(0,d.useState)([]),t=(0,i.Z)(e,2),n=(t[0],t[1]),l=(0,Y.aY)(ce.c),u=(0,q.v9)((function(e){return e.usersReducer})).userPermissions,m=u.readPayroll,h=u.updatePayroll,v=u.readAllPayroll,f=(0,d.useState)({editType:"new",recordId:0,openModal:!1}),p=(0,i.Z)(f,2),y=p[0],j=p[1],b=(0,d.useState)(!1),k=(0,i.Z)(b,2),w=k[0],D=k[1],P=new x,z=new ve.f,C=(0,oe.$5)({method:z.getAllRecords,initialQuery:{perPage:500}}).data,R=(0,d.useState)({userId:void 0,fromDate:void 0,toDate:void 0,payrollCycleId:void 0,page:1,perPage:10}),N=(0,i.Z)(R,2),_=N[0],S=N[1],A=(0,oe.$5)({method:P.getAllRecords,initialQuery:(0,a.Z)({},_)}),E=A.data,M=A.onRefresh,L=(A.setData,A.loading),F=A.meta,B=(0,d.useState)(!1),T=(0,i.Z)(B,2),H=(T[0],T[1]),U=((0,d.useCallback)((function(e,t){e&&(H(!0),S((0,a.Z)((0,a.Z)({},_),{},(0,r.Z)({},e,t))))}),[_]),(0,d.useState)("")),W=(0,i.Z)(U,2),O=W[0],V=W[1],$=(0,me.N)(O,500),K=(0,d.useState)([]),G=(0,i.Z)(K,2),J=G[0],X=G[1],ee=(0,d.useMemo)((function(){return new he.z}),[]),te=(0,d.useCallback)((function(){$?ee.getAllRecords({name:$}).then((function(e){X((function(t){var n,r,a=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.filter((function(e){return!(null!==t&&void 0!==t&&t.find((function(t){return t.id===e.id})))}));return[].concat((0,o.Z)(t),(0,o.Z)(a))}))})).catch((function(e){s.ZP.error(e.response.data.message)})):_.userId&&ee.getRecordById(_.userId).then((function(e){var t;X([null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data])})).catch((function(e){s.ZP.error(e.response.data.message)}))}),[$]);(0,d.useEffect)((function(){te()}),[te,_.userId]);var ne=(0,d.useCallback)((function(){if(E&&E.length>0){var e=null===E||void 0===E?void 0:E.map((function(e){return{date:(0,Q.Ny)(e.addedDate,"dd M,yy"),employee:e.User.firstName+" "+e.User.lastName,fromDate:(0,Q.Ny)(e.PayrollCycle.fromDate,"dd M,yy"),toDate:(0,Q.Ny)(e.PayrollCycle.toDate,"dd M,yy"),status:e.paid?"Paid":"Not paid",totalWorkingDays:e.totalWorkingDays,totalDaysWorked:e.totalDaysWorked,totalLates:e.totalLates,totalIncompletes:e.totalIncompletes,totalAbsences:e.totalAbsences,toBeDeductedFromLeaveCredits:e.toBeDeductedFromLeaveCredits,toBeDeductedFromCurrentSalary:e.toBeDeductedFromCurrentSalary,salaryAmount:e.salaryAmount,manualCorrection:e.manualCorrection,otherAmount:e.otherAmount,totalDeduction:e.totalDeduction,totalReceivable:e.totalReceivable}}));n(e)}}),[E]);return(0,d.useEffect)((function(){ne()}),[ne]),(0,Z.jsxs)(ue.Z,{permissionSlug:l,children:[(0,Z.jsx)(c.mr,{heading:"Payroll",breadCrumbData:ke,excelExport:(0,Z.jsx)(I.Z,{style:{marginRight:15,display:"flex",alignItems:"center"},onClick:function(){return D(!0)},icon:(0,Z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",className:"mr-1",children:(0,Z.jsx)("path",{fill:"#42526E",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm1.06 10.33c0 .41-.34.75-.75.75s-.75-.34-.75-.75V9.31l-7.72 7.72c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l7.72-7.72h-3.02c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4.83c.41 0 .75.34.75.75v4.83z"})}),children:"Export to Excel"}),filters:(0,Z.jsxs)("div",{children:[v&&(0,Z.jsx)("div",{children:(0,Z.jsx)(de.Z,{allowClear:!0,placeholder:"Search for the employee",className:"selectAntdCustom",onChange:function(e){var t=(0,a.Z)((0,a.Z)({},_),{},{userId:e});S(t),M(t)},value:_.userId?_.userId:void 0,showSearch:!0,onSearch:function(e){return V(e)},optionFilterProp:"label",options:null===J||void 0===J?void 0:J.map((function(e){return{label:e.firstName+" "+e.lastName,value:e.id}})),notFoundContent:(0,Z.jsx)(le.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:(0,Z.jsx)("span",{children:"No data found, Please search for the employee"})})})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(de.Z,{options:(null===C||void 0===C?void 0:C.map((function(e){return{label:"".concat((0,Q.Ny)(e.fromDate,"dd M,yy")," - ").concat((0,Q.Ny)(e.toDate,"dd M,yy")),value:"".concat(e.id)}})))||[],placeholder:"Payroll Cycle",showSearch:!0,allowClear:!0,optionFilterProp:"label",style:{width:"200px"},className:"selectAntdCustom",onClear:function(){var e=(0,a.Z)((0,a.Z)({},_),{},{payrollCycleId:void 0});S(e),M(e)},onSelect:function(e){var t=(0,a.Z)((0,a.Z)({},_),{},{payrollCycleId:e});S(t),M(t)}})}),(0,Z.jsx)(c.Xy,{type:"datepicker",label:"Date",name:"dateRange",onChange:function(e){var t,n,o,r,i=(0,a.Z)((0,a.Z)({},_),{},{fromDate:e?null===(t=e[0])||void 0===t||null===(n=t._d)||void 0===n?void 0:n.toISOString().substring(0,10):void 0,toDate:e?null===(o=e[1])||void 0===o||null===(r=o._d)||void 0===r?void 0:r.toISOString().substring(0,10):void 0});S(i)},onReset:function(){var e=(0,a.Z)((0,a.Z)({},_),{},{fromDate:void 0,toDate:void 0});S(e),M(e)},onUpdate:function(){return M(_)}})]})}),!0===m&&E&&(0,Z.jsx)(ie,{tableData:E,tableLoading:L,onEditIconClick:function(e){!1!==h?j((0,a.Z)((0,a.Z)({},y),{},{editType:"edit",recordId:e.id,openModal:!0})):s.ZP.error("You don't have permission to update this record")},reloadTableData:M,meta:F,filters:_}),!1===m&&(0,Z.jsx)(se.a$,{mainMessage:"You don't have permission to view this data"}),y.openModal&&(0,Z.jsx)(g,{record:y.recordId,type:y.editType,reloadTableData:M,onCancel:function(){j((0,a.Z)((0,a.Z)({},y),{},{openModal:!y.openModal,editType:"new"}))},openModal:y.openModal,permissions:u}),w&&(0,Z.jsx)(be,{isModalOpen:w,setIsModalOpen:D})]})}},51812:function(e,t,n){n.d(t,{s:function(){return i}});var o=n(43144),r=n(15671),a=n(49075),i=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="attendance",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.getUserAttendance=function(e){return a.Z.get(t.endPoint+"/getUserAttendance",{params:e})},this.findUserAttendanceForPayroll=function(e){return a.Z.get(t.endPoint+"/findUserAttendanceForPayroll",{params:e})},this.findPublished=function(e){return a.Z.get("".concat(t.endPoint,"/published"),{params:e})},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e)},this.generateReport=function(e){return a.Z.post("".concat(t.endPoint,"/generateReport"),e,{responseType:"blob"})}}))},38859:function(e,t,n){n.d(t,{o:function(){return i}});var o=n(43144),r=n(15671),a=n(49075),i=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="department",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getAllPublishedRecords=function(e){return a.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return a.Z.get(t.endPoint+"/"+e)},this.deleteRecord=function(e){return a.Z.delete(t.endPoint+"/"+e)},this.createRecord=function(e){return a.Z.post(t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch(t.endPoint+"/"+n,e)}}))},5190:function(e,t,n){n.d(t,{L:function(){return d}});var o=n(43144),r=n(15671),a=n(49075),i=n(3135),d=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="organization",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.findPublished=function(e){return a.Z.get(t.endPoint+"/find-published",{params:e})},this.getRecordById=function(e){return a.Z.get("".concat(t.endPoint,"/").concat(e))},this.deleteRecord=function(e){return a.Z.delete("".concat(t.endPoint,"/").concat(e))},this.createRecord=function(e){return a.Z.post(t.endPoint,e,{headers:i.C})},this.updateRecord=function(e,n){return a.Z.patch("".concat(t.endPoint,"/").concat(n),e,{headers:i.C})},this.getTenants=function(){return a.Z.get("xero/getTenants")}}))},78593:function(e,t,n){n.d(t,{f:function(){return i}});var o=n(43144),r=n(15671),a=n(49075),i=(0,o.Z)((function e(){var t=this;(0,r.Z)(this,e),this.endPoint="payroll-cycle",this.getAllRecords=function(e){return a.Z.get(t.endPoint,{params:e})},this.getRecordById=function(e){return a.Z.get(a._+t.endPoint+"/"+e)},this.deleteRecord=function(e){return a.Z.delete(a._+t.endPoint+"/"+e)},this.createRecord=function(e){return a.Z.post(a._+t.endPoint,e)},this.updateRecord=function(e,n){return a.Z.patch(a._+t.endPoint+"/"+n,e)},this.processRecord=function(e){return a.Z.patch(a._+t.endPoint+"/process/"+e)}}))},70584:function(e,t,n){n.d(t,{HH:function(){return d},JY:function(){return i},Ug:function(){return l},hx:function(){return a},vA:function(){return c},xy:function(){return s}});var o=n(29439),r=n(37936),a=function(e){return Object.entries(e).filter((function(e){var t=(0,o.Z)(e,1)[0];return isNaN(Number(t))})).map((function(e){var t=(0,o.Z)(e,2);return{label:t[0],value:t[1]}}))},i=a(r.dq),d=a(r.B1),l=a(r.LN),s=a(r.PH),c=a(r.fk)},70804:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(71002),r=n(89611),a=n(60136);function i(){i=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,o,a){var i=new RegExp(e,o);return t.set(i,a||t.get(e)),(0,r.Z)(i,n.prototype)}function d(e,n){var o=t.get(n);return Object.keys(o).reduce((function(t,n){var r=o[n];if("number"==typeof r)t[n]=e[r];else{for(var a=0;void 0===e[r[a]]&&a+1<r.length;)a++;t[n]=e[r[a]]}return t}),Object.create(null))}return(0,a.Z)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=d(n,this);var o=n.indices;o&&(o.groups=d(o,this))}return n},n.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var a=t.get(this);return e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){var n=a[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof r){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,o.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(d(e,i)),r.apply(this,e)}))}return e[Symbol.replace].call(this,n,r)},i.apply(this,arguments)}}}]);