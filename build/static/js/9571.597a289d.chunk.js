"use strict";(self.webpackChunkdat_projects=self.webpackChunkdat_projects||[]).push([[9571],{89571:function(e,s,n){n.r(s),n.d(s,{default:function(){return K}});var a=n(68197),r=n(59624),l=n(3109),i=n(29439),o=n(87866),t=n(55291),c=n(25019),d=n(32697),u=n(47313),m=n(85554),h=n(69686),v=n(74165),g=n(1413),x=n(15861),f=n(40096),p=n(6108),_=new h.n,j=function(e,s){return function(){var n=(0,x.Z)((0,v.Z)().mark((function n(a,r){var l;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=r().loginReducer.loginDetails,a({type:p.K,payload:(0,g.Z)((0,g.Z)({},l),{},{loading:!0})});try{_.login(e).then((function(e){var n,r,i,o,t,c=null===(n=e.data)||void 0===n?void 0:n.data;null!==c&&void 0!==c&&c.token&&(f.Z.updateLocalAccessToken(null===c||void 0===c||null===(i=c.token)||void 0===i?void 0:i.access_token),f.Z.updateLocalRefreshToken(null===c||void 0===c||null===(o=c.token)||void 0===o?void 0:o.refresh_token),f.Z.saveUserData(null===(t=e.data.data)||void 0===t?void 0:t.userData));a({type:p.K,payload:(0,g.Z)((0,g.Z)({},l),{},{loading:!1,data:null===(r=e.data)||void 0===r?void 0:r.data})}),s&&s()})).catch((function(e){a({type:p.K,payload:(0,g.Z)((0,g.Z)({},l),{},{loading:!1,errorData:e})})}))}catch(i){a({type:p.K,payload:(0,g.Z)((0,g.Z)({},l),{},{loading:!1,errorData:i})})}case 3:case"end":return n.stop()}}),n)})));return function(e,s){return n.apply(this,arguments)}}()},w=n(12351),Z=n(37831),k=n(32147),y="style_form__nanlG",I="style_headingWrap__gMYfT",N="style_logoWrap__bLOrN",b="style_logo__H7mKm",P="style_forgotPasswordImg__CDEfy",z="styles_slide_up__k68QA",D="styles_slide_down__973ou",L="styles_hide__PXjYI",R=n(46417),C=function(){var e=["Infrastructures","Energy","Resources"],s=(0,u.useState)({curIndex:0,focusIndex:0,prevIndex:-1}),n=(0,i.Z)(s,2),a=n[0],r=n[1];return(0,u.useEffect)((function(){var s=setInterval((function(){var s=a.curIndex,n=s+1;n>=e.length&&(n=0),r({curIndex:n,prevIndex:s,focusIndex:n})}),2e3);return function(){return clearInterval(s)}})),(0,R.jsx)(R.Fragment,{children:e.map((function(s,n){return n===a.curIndex?(0,R.jsx)("div",{className:z,children:e[a.curIndex]},"some_child"+n):n===a.prevIndex?(0,R.jsx)("div",{className:"".concat(D," ").concat(a.focusIndex!==n?L:""),children:e[a.prevIndex]},"hide_child"+n):""}))})},W=function(){var e=(0,m.I0)(),s=(0,m.v9)((function(e){return e.loginReducer})).loginDetails,n=(0,u.useMemo)((function(){return new h.n}),[]),a=(0,u.useState)({sent:!1,clicked:!1}),r=(0,i.Z)(a,2),v=r[0],g=r[1],x=(0,u.useCallback)((function(){var e,n,a,r;null!==(e=s.errorData.response)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.message&&t.ZP.error(null===(a=s.errorData.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)}),[s.errorData]);return(0,u.useEffect)((function(){x()}),[x]),(0,R.jsxs)("div",{className:y,children:[(0,R.jsxs)("div",{className:N,children:[(0,R.jsx)("div",{className:I,children:null!==v&&void 0!==v&&v.clicked?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(l.Z,{color:"dark-main",size:"lg",weight:"bold",children:"Reset Password!"}),(0,R.jsx)(l.Z,{color:"dark-sub",size:"xs",children:"Enter your email address and we'll send you a link to reset your password."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(l.Z,{color:"dark-main",size:"lg",weight:"bold",children:"Welcome back!"}),(0,R.jsx)(l.Z,{color:"dark-sub",size:"xs",children:"Lets get you signed in"})]})}),(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)(k.TR,{color:"#137749"}),(0,R.jsx)(C,{})]})]}),(null===v||void 0===v?void 0:v.clicked)&&(0,R.jsxs)("div",{className:"d-flex cursor-pointer mb-5",onClick:function(){return g({sent:!1,clicked:!1})},children:[(0,R.jsx)(k.xC,{className:"mr-2"}),(0,R.jsx)(l.Z,{color:"dark-sub",size:"normal",children:"Back to Login"})]}),(null===v||void 0===v?void 0:v.sent)&&(null===v||void 0===v?void 0:v.clicked)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("img",{src:"/images/forgot-password.svg",className:P,alt:"forgot-password"}),(0,R.jsx)(l.Z,{color:"dark-sub",size:"md",weight:"semi",className:"text-center my-4",children:"We have sent you an email with a link to reset your password."})]}),(0,R.jsxs)(c.Z,{name:"login",validateTrigger:"onChange",onFinish:function(s){if(null!==v&&void 0!==v&&v.clicked)n.sendPasswordResetLink(s.email).then((function(e){var s;200===(null===(s=e.data)||void 0===s?void 0:s.statusCode)&&(t.ZP.success(e.data.message),g({sent:!0,clicked:!0}))})).catch((function(e){var s=e.response.data.message;s.error(s),g({sent:!1,clicked:!0})}));else{e(j(s,(function(){var e="/",s=new URLSearchParams(window.location.search).get("redirectUrl");s&&(e=s),window.location.href=e})))}},autoComplete:"off",children:[(0,R.jsx)(c.Z.Item,{name:"email",rules:[{required:!0,message:"Please enter your email!"},{type:"email",message:"Please enter a valid email!"}],children:(0,R.jsx)(Z.Z,{size:"w100",icon:(0,R.jsx)(o.Z,{}),label:"Email",placeHolder:"Email address",className:"pa-2"})}),!(null!==v&&void 0!==v&&v.clicked)&&(0,R.jsx)(c.Z.Item,{name:"password",rules:[{required:!0,message:"Please enter your password!"}],children:(0,R.jsx)(Z.Z,{size:"w100",type:"password",label:"Password",placeHolder:"Password",className:"pa-2"})}),!(null!==v&&void 0!==v&&v.clicked)&&(0,R.jsxs)(c.Z.Item,{children:[(0,R.jsx)(d.Z,{className:"font-size-xs",children:"Remember me"}),(0,R.jsx)(l.Z,{color:"dark-sub",size:"xs",weight:"semi",className:"float-right cursor-pointer mt-1",onClick:function(){return g({sent:!1,clicked:!0})},children:"Forgot Password?"})]}),(0,R.jsx)(c.Z.Item,{children:(0,R.jsx)(w.Z,{size:"w100",type:"primary",htmlType:"submit",loading:s.loading,children:null!==v&&void 0!==v&&v.clicked?"Reset Password":"Sign In"})})]})]})},E="login_row__SuBsx",F="login_colLeft__U1yVO",S="login_contentWrap__ecIWd",T="login_frameImage__SDhGi",H="login_formWrap__c5iaL",K=function(){var e=localStorage.getItem("access_token"),s=window.innerWidth;return e?(window.location.href="/",(0,R.jsx)(R.Fragment,{})):(0,R.jsx)(R.Fragment,{children:!e&&(0,R.jsxs)(a.Z,{className:E,children:[(0,R.jsxs)(r.Z,{className:F,xs:24,sm:24,md:12,children:[(0,R.jsx)(k.UP,{width:s>768?400:300,height:s>768?450:300,className:T}),(0,R.jsx)(l.Z,{size:"xxxl",weight:"bold",type:"h1",lineHeight:s>768?4:2,className:S,children:"Welcome to DAT Portal"})]}),(0,R.jsx)(r.Z,{xs:24,sm:24,md:12,children:(0,R.jsx)("div",{className:H,children:(0,R.jsx)(W,{})})})]})})}},87866:function(e,s,n){n.d(s,{Z:function(){return t}});var a=n(87462),r=n(47313),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},i=n(16141),o=function(e,s){return r.createElement(i.Z,(0,a.Z)({},e,{ref:s,icon:l}))};var t=r.forwardRef(o)}}]);